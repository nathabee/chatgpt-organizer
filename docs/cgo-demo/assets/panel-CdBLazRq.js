function tc(){function e(Le,ec){if(!Le)throw new Error(`[dom] Missing #${ec}`);return Le}const t=e(document.getElementById("scopeLabel"),"scopeLabel"),i=e(document.getElementById("btnScopeChange"),"btnScopeChange"),n=e(document.getElementById("btnScopeRefresh"),"btnScopeRefresh"),c=e(document.getElementById("scopeDialog"),"scopeDialog"),a=e(document.getElementById("scopeDate"),"scopeDate"),o=e(document.getElementById("btnScopeCancel"),"btnScopeCancel"),r=e(document.getElementById("btnScopeApply"),"btnScopeApply"),u=e(document.getElementById("scopeLoadedSingles"),"scopeLoadedSingles"),j=e(document.getElementById("scopeLoadedProjects"),"scopeLoadedProjects"),l=e(document.getElementById("scopeLoadedProjectChats"),"scopeLoadedProjectChats"),h=e(document.querySelector(".scopeLoading"),"scopeLoading"),s=document.getElementById("tabSingle"),p=document.getElementById("tabProjects"),g=document.getElementById("viewSingle"),b=document.getElementById("viewProjects"),S=document.getElementById("tabOrganize"),T=document.getElementById("tabSearch"),E=document.getElementById("tabLogs"),m=document.getElementById("tabStats"),C=document.getElementById("viewOrganize"),d=document.getElementById("viewSearch"),I=document.getElementById("viewLogs"),v=document.getElementById("viewStats"),w=e(document.getElementById("searchQuery"),"searchQuery"),x=e(document.getElementById("btnSearchClear"),"btnSearchClear"),L=e(document.getElementById("btnSearchResetFilters"),"btnSearchResetFilters"),f=e(document.getElementById("searchScope"),"searchScope"),P=e(document.getElementById("searchArchived"),"searchArchived"),Z=e(document.getElementById("searchUpdatedWithin"),"searchUpdatedWithin"),_=e(document.getElementById("searchCreatedWithin"),"searchCreatedWithin"),y=e(document.getElementById("searchUpdatedAfter"),"searchUpdatedAfter"),z=e(document.getElementById("searchUpdatedBefore"),"searchUpdatedBefore"),B=e(document.getElementById("searchCreatedAfter"),"searchCreatedAfter"),O=e(document.getElementById("searchCreatedBefore"),"searchCreatedBefore"),A=e(document.getElementById("searchInfoBox"),"searchInfoBox"),U=e(document.getElementById("btnSearchListSingle"),"btnSearchListSingle"),H=e(document.getElementById("btnSearchListProjects"),"btnSearchListProjects"),N=e(document.getElementById("searchLoadedSingles"),"searchLoadedSingles"),$=e(document.getElementById("searchLoadedProjects"),"searchLoadedProjects"),G=e(document.getElementById("searchLoadedProjectChats"),"searchLoadedProjectChats"),F=e(document.getElementById("searchInfoLimits"),"searchInfoLimits"),te=e(document.getElementById("searchStatus"),"searchStatus"),ne=e(document.getElementById("searchResultsCount"),"searchResultsCount"),Qe=e(document.getElementById("searchResults"),"searchResults"),et=document.getElementById("singleLimit"),tt=document.getElementById("btnListSingle"),nt=document.getElementById("singleStatus"),ct=document.getElementById("cbSingleToggleAll"),it=document.getElementById("btnSingleDelete"),st=document.getElementById("singleExecOut"),ot=document.getElementById("singleExecProgressWrap"),at=document.getElementById("singleExecProgress"),rt=document.getElementById("singleExecProgressText"),lt=document.getElementById("singleConfirmBox"),dt=document.getElementById("singleConfirmTitle"),ut=document.getElementById("singleConfirmPreview"),gt=document.getElementById("singleCbConfirm"),pt=document.getElementById("singleBtnConfirmExecute"),mt=document.getElementById("singleBtnCancelExecute"),ht=document.getElementById("singleCount"),ft=document.getElementById("singleSelectedCount"),Tt=document.getElementById("singleList"),Et=document.getElementById("projectsLimit"),Ct=document.getElementById("projectsChatsLimit"),St=document.getElementById("btnListProjects"),bt=document.getElementById("projectsStatus"),yt=document.getElementById("btnProjectsDelete"),It=document.getElementById("projectsExecOut"),vt=document.getElementById("projectsChatsExecProgressWrap"),jt=document.getElementById("projectsChatsExecProgress"),Pt=document.getElementById("projectsChatsExecProgressText"),xt=document.getElementById("projectsProjectsExecProgressWrap"),zt=document.getElementById("projectsProjectsExecProgress"),Lt=document.getElementById("projectsProjectsExecProgressText"),wt=document.getElementById("projectsConfirmBox"),Zt=document.getElementById("projectsConfirmTitle"),Ot=document.getElementById("projectsConfirmPreview"),kt=document.getElementById("projectsCbConfirm"),Bt=document.getElementById("projectsBtnConfirmExecute"),Dt=document.getElementById("projectsBtnCancelExecute"),At=document.getElementById("projectsCount"),_t=document.getElementById("projectsChatsCount"),$t=document.getElementById("projectsSelectedChatsCount"),Rt=document.getElementById("projectsSelectedProjectsCount"),Mt=document.getElementById("projectsList"),Nt=e(document.getElementById("mountCreateProjectProjects"),"mountCreateProjectProjects"),Ut=e(document.getElementById("mountCreateProjectOrganize"),"mountCreateProjectOrganize"),Ht=document.getElementById("logsLimit"),Gt=document.getElementById("btnLogsRefresh"),Ft=document.getElementById("logsStatus"),Jt=document.getElementById("logsTrimKeep"),Wt=document.getElementById("btnLogsTrim"),Vt=document.getElementById("btnLogsExport"),Xt=document.getElementById("btnLogsClear"),Kt=document.getElementById("logsOut"),Yt=document.getElementById("cfgTraceScope"),qt=document.getElementById("cfgStopAfterOutOfScope"),Qt=document.getElementById("btnCfgResetDefaults"),en=document.getElementById("cfgStatus"),tn=document.getElementById("logsCbDebug"),nn=document.getElementById("debugLimit"),cn=document.getElementById("btnDebugRefresh"),sn=document.getElementById("btnDebugExport"),on=document.getElementById("btnDebugClear"),an=document.getElementById("debugStatus"),rn=document.getElementById("debugOut"),ln=e(document.getElementById("btnStatsRecalc"),"btnStatsRecalc"),dn=e(document.getElementById("statsStatus"),"statsStatus"),un=e(document.getElementById("statsLastCacheUpdate"),"statsLastCacheUpdate"),gn=e(document.getElementById("statsSnapshotBox"),"statsSnapshotBox"),pn=e(document.getElementById("statsSingleChats"),"statsSingleChats"),mn=e(document.getElementById("statsProjects"),"statsProjects"),hn=e(document.getElementById("statsProjectChats"),"statsProjectChats"),fn=e(document.getElementById("statsTotalChats"),"statsTotalChats"),Tn=e(document.getElementById("statsArchivedChats"),"statsArchivedChats"),En=e(document.getElementById("statsAvgChatsPerProject"),"statsAvgChatsPerProject"),Cn=e(document.getElementById("statsLimitsHint"),"statsLimitsHint"),Sn=e(document.getElementById("statsActivityBox"),"statsActivityBox"),bn=e(document.getElementById("statsActivityExplain"),"statsActivityExplain"),yn=e(document.getElementById("statsCreatedHeatmap"),"statsCreatedHeatmap"),In=e(document.getElementById("statsLifetimeHist"),"statsLifetimeHist"),vn=e(document.getElementById("statsProjectsBox"),"statsProjectsBox"),jn=e(document.getElementById("statsProjectSizeHist"),"statsProjectSizeHist"),Pn=e(document.getElementById("statsTopProjects"),"statsTopProjects"),xn=e(document.getElementById("statsDeletesBox"),"statsDeletesBox"),zn=e(document.getElementById("statsDeletedChats"),"statsDeletedChats"),Ln=e(document.getElementById("statsDeletedProjects"),"statsDeletedProjects"),wn=e(document.getElementById("organizeSource"),"organizeSource"),Zn=e(document.getElementById("organizeFilter"),"organizeFilter"),On=e(document.getElementById("cbOrganizeToggleAll"),"cbOrganizeToggleAll"),kn=e(document.getElementById("organizeSourceStatus"),"organizeSourceStatus"),Bn=e(document.getElementById("organizeSourceCount"),"organizeSourceCount"),Dn=e(document.getElementById("organizeSelectedCount"),"organizeSelectedCount"),An=e(document.getElementById("organizeSourceList"),"organizeSourceList"),_n=e(document.getElementById("organizeProjectFilter"),"organizeProjectFilter"),$n=e(document.getElementById("btnOrganizeClearTarget"),"btnOrganizeClearTarget"),Rn=e(document.getElementById("organizeProjectsStatus"),"organizeProjectsStatus"),Mn=e(document.getElementById("organizeProjectsCount"),"organizeProjectsCount"),Nn=e(document.getElementById("organizeTargetLabel"),"organizeTargetLabel"),Un=e(document.getElementById("organizeProjectList"),"organizeProjectList"),Hn=e(document.getElementById("btnOrganizeMove"),"btnOrganizeMove"),Gn=e(document.getElementById("organizeExecOut"),"organizeExecOut"),Fn=e(document.getElementById("organizeExecProgressWrap"),"organizeExecProgressWrap"),Jn=e(document.getElementById("organizeExecProgress"),"organizeExecProgress"),Wn=e(document.getElementById("organizeExecProgressText"),"organizeExecProgressText"),Vn=e(document.getElementById("organizeConfirmBox"),"organizeConfirmBox"),Xn=e(document.getElementById("organizeConfirmTitle"),"organizeConfirmTitle"),Kn=e(document.getElementById("organizeConfirmPreview"),"organizeConfirmPreview"),Yn=e(document.getElementById("organizeCbConfirm"),"organizeCbConfirm"),qn=e(document.getElementById("organizeBtnConfirmExecute"),"organizeBtnConfirmExecute"),Qn=e(document.getElementById("organizeBtnCancelExecute"),"organizeBtnCancelExecute");return{tabSingle:s,tabProjects:p,viewSingle:g,viewProjects:b,tabOrganize:S,tabSearch:T,tabLogs:E,tabStats:m,viewOrganize:C,viewSearch:d,viewLogs:I,viewStats:v,scopeLabelEl:t,btnScopeChange:i,btnScopeRefresh:n,scopeDialogEl:c,scopeDateEl:a,btnScopeCancel:o,btnScopeApply:r,scopeLoadedSinglesEl:u,scopeLoadedProjectsEl:j,scopeLoadedProjectChatsEl:l,scopeLoadingEl:h,searchInfoBoxEl:A,btnSearchListSingle:U,btnSearchListProjects:H,searchLoadedSinglesEl:N,searchLoadedProjectsEl:$,searchLoadedProjectChatsEl:G,searchInfoLimitsEl:F,btnSearchResetFilters:L,searchStatusEl:te,searchQueryEl:w,btnSearchClear:x,searchScopeEl:f,searchArchivedEl:P,searchUpdatedWithinEl:Z,searchUpdatedAfterEl:y,searchUpdatedBeforeEl:z,searchCreatedWithinEl:_,searchCreatedAfterEl:B,searchCreatedBeforeEl:O,searchResultsCountEl:ne,searchResultsEl:Qe,singleLimitEl:et,btnListSingle:tt,singleStatusEl:nt,cbSingleToggleAll:ct,btnSingleDelete:it,singleExecOutEl:st,singleExecProgressWrapEl:ot,singleExecProgressEl:at,singleExecProgressTextEl:rt,singleConfirmBoxEl:lt,singleConfirmTitleEl:dt,singleConfirmPreviewEl:ut,singleCbConfirmEl:gt,singleBtnConfirmExecute:pt,singleBtnCancelExecute:mt,singleCountEl:ht,singleSelectedCountEl:ft,singleListEl:Tt,projectsLimitEl:Et,projectsChatsLimitEl:Ct,btnListProjects:St,projectsStatusEl:bt,btnProjectsDelete:yt,projectsExecOutEl:It,projectsChatsExecProgressWrapEl:vt,projectsChatsExecProgressEl:jt,projectsChatsExecProgressTextEl:Pt,projectsProjectsExecProgressWrapEl:xt,projectsProjectsExecProgressEl:zt,projectsProjectsExecProgressTextEl:Lt,projectsConfirmBoxEl:wt,projectsConfirmTitleEl:Zt,projectsConfirmPreviewEl:Ot,projectsCbConfirmEl:kt,projectsBtnConfirmExecute:Bt,projectsBtnCancelExecute:Dt,projectsCountEl:At,projectsChatsCountEl:_t,projectsSelectedChatsCountEl:$t,projectsSelectedProjectsCountEl:Rt,projectsListEl:Mt,mountCreateProjectProjectsEl:Nt,mountCreateProjectOrganizeEl:Ut,cfgTraceScopeEl:Yt,cfgStopAfterOutOfScopeEl:qt,btnCfgResetDefaults:Qt,cfgStatusEl:en,logsLimitEl:Ht,btnLogsRefresh:Gt,logsStatusEl:Ft,logsTrimKeepEl:Jt,btnLogsTrim:Wt,btnLogsExport:Vt,btnLogsClear:Xt,logsOutEl:Kt,logsCbDebugEl:tn,debugLimitEl:nn,btnDebugRefresh:cn,btnDebugExport:sn,btnDebugClear:on,debugStatusEl:an,debugOutEl:rn,btnStatsRecalc:ln,statsStatusEl:dn,statsLastCacheUpdateEl:un,statsSnapshotBoxEl:gn,statsSingleChatsEl:pn,statsProjectsEl:mn,statsProjectChatsEl:hn,statsTotalChatsEl:fn,statsArchivedChatsEl:Tn,statsAvgChatsPerProjectEl:En,statsLimitsHintEl:Cn,statsActivityBoxEl:Sn,statsActivityExplainEl:bn,statsCreatedHeatmapEl:yn,statsLifetimeHistEl:In,statsProjectsBoxEl:vn,statsProjectSizeHistEl:jn,statsTopProjectsEl:Pn,statsDeletesBoxEl:xn,statsDeletedChatsEl:zn,statsDeletedProjectsEl:Ln,organizeSourceEl:wn,organizeFilterEl:Zn,cbOrganizeToggleAll:On,organizeSourceStatusEl:kn,organizeSourceCountEl:Bn,organizeSelectedCountEl:Dn,organizeSourceListEl:An,organizeProjectFilterEl:_n,btnOrganizeClearTarget:$n,organizeProjectsStatusEl:Rn,organizeProjectsCountEl:Mn,organizeTargetLabelEl:Nn,organizeProjectListEl:Un,btnOrganizeMove:Hn,organizeExecOutEl:Gn,organizeExecProgressWrapEl:Fn,organizeExecProgressEl:Jn,organizeExecProgressTextEl:Wn,organizeConfirmBoxEl:Vn,organizeConfirmTitleEl:Xn,organizeConfirmPreviewEl:Kn,organizeCbConfirmEl:Yn,organizeBtnConfirmExecute:qn,organizeBtnCancelExecute:Qn}}const k={PING:"CGO_PING",PANEL_REFRESH_ALL:"CGO_PANEL_REFRESH_ALL",LIST_ALL_CHATS:"CGO_LIST_ALL_CHATS",LIST_ALL_CHATS_PROGRESS:"CGO_LIST_ALL_CHATS_PROGRESS",LIST_ALL_CHATS_DONE:"CGO_LIST_ALL_CHATS_DONE",LIST_GIZMO_PROJECTS:"CGO_LIST_GIZMO_PROJECTS",LIST_GIZMO_PROJECTS_PROGRESS:"CGO_LIST_GIZMO_PROJECTS_PROGRESS",LIST_GIZMO_PROJECTS_DONE:"CGO_LIST_GIZMO_PROJECTS_DONE",EXECUTE_DELETE:"CGO_EXECUTE_DELETE",EXECUTE_DELETE_PROGRESS:"CGO_EXECUTE_DELETE_PROGRESS",EXECUTE_DELETE_DONE:"CGO_EXECUTE_DELETE_DONE",DELETE_PROJECTS:"CGO_DELETE_PROJECTS",DELETE_PROJECTS_PROGRESS:"CGO_DELETE_PROJECTS_PROGRESS",DELETE_PROJECTS_DONE:"CGO_DELETE_PROJECTS_DONE",MOVE_CHATS_TO_PROJECT:"CGO_MOVE_CHATS_TO_PROJECT",MOVE_CHATS_TO_PROJECT_PROGRESS:"CGO_MOVE_CHATS_TO_PROJECT_PROGRESS",MOVE_CHATS_TO_PROJECT_DONE:"CGO_MOVE_CHATS_TO_PROJECT_DONE",CREATE_PROJECT:"CGO_CREATE_PROJECT",CREATE_PROJECT_PROGRESS:"CGO_CREATE_PROJECT_PROGRESS",CREATE_PROJECT_DONE:"CGO_CREATE_PROJECT_DONE"},ce={projects:[{gizmoId:"g-wp",title:"WordPress Plugin Lab",href:"#",conversations:[{id:"c-wp-01",title:"Gutenberg block structure: block.json and edit/save",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-01",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-04T13:00:00Z",pinnedTime:null},{id:"c-wp-02",title:"Theme.json tokens: using WP preset colors properly",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-02",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-05T14:00:00Z",pinnedTime:null},{id:"c-wp-03",title:"Shortcodes vs blocks: when to use what",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-03",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-06T15:00:00Z",pinnedTime:null},{id:"c-wp-04",title:"WP REST API auth: nonce + cookies vs app passwords",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-04",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-07T16:00:00Z",pinnedTime:null},{id:"c-wp-05",title:"Plugin build pipeline: webpack vs Vite for blocks",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-05",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-08T17:00:00Z",pinnedTime:null},{id:"c-wp-06",title:"Internationalization: __(), _x(), and build steps",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-06",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-09T18:00:00Z",pinnedTime:null},{id:"c-wp-07",title:"Security checklist: sanitize, escape, capability checks",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-07",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-10T19:00:00Z",pinnedTime:null},{id:"c-wp-08",title:"FSE templates: managing patterns and template parts",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-08",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-11T20:00:00Z",pinnedTime:null},{id:"c-wp-09",title:"WP-CLI automation: exports, imports, and resets",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-09",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-12T21:00:00Z",pinnedTime:null},{id:"c-wp-10",title:"Performance: object cache, transients, and query reduction",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-10",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-13T22:00:00Z",pinnedTime:null}]},{gizmoId:"g-gh",title:"GitHub Workflow & Releases",href:"#",conversations:[{id:"c-gh-01",title:"Release assets: tagging strategy and upload via gh cli",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-01",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-02T13:00:00Z",pinnedTime:null},{id:"c-gh-02",title:"Changelog discipline: keep a version.md readable",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-02",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-03T14:00:00Z",pinnedTime:null},{id:"c-gh-03",title:"Repo hygiene: .gitignore, large files, and build artifacts",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-03",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-04T15:00:00Z",pinnedTime:null},{id:"c-gh-04",title:"Git add: '.' vs '-A' and deletion behavior",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-04",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-05T16:00:00Z",pinnedTime:null},{id:"c-gh-05",title:"PR workflow: branch naming and small reviewable commits",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-05",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-06T17:00:00Z",pinnedTime:null},{id:"c-gh-06",title:"CI basics: lint, typecheck, build, and release gates",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-06",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-07T18:00:00Z",pinnedTime:null}]},{gizmoId:"g-chrome-ext",title:"Chrome Extension Engineering",href:"#",conversations:[{id:"c-chx-01",title:"Manifest V3 overview: service worker + permissions",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-01",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-15T13:00:00Z",pinnedTime:null},{id:"c-chx-02",title:"Messaging patterns: panel ↔ background ↔ content",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-02",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-16T14:00:00Z",pinnedTime:null},{id:"c-chx-03",title:"Storage: chrome.storage.local vs session",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-03",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-17T15:00:00Z",pinnedTime:null},{id:"c-chx-04",title:"Rate limiting: throttling delete operations safely",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-04",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-18T16:00:00Z",pinnedTime:null},{id:"c-chx-05",title:"UI: side panel architecture and tab routing",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-05",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-19T17:00:00Z",pinnedTime:null},{id:"c-chx-06",title:"Testing: creating a demo mode with mocked seams",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-06",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-20T18:00:00Z",pinnedTime:null},{id:"c-chx-07",title:"Error handling: retry policies and progress events",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-07",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-21T19:00:00Z",pinnedTime:null},{id:"c-chx-08",title:"Packaging: dist layout and release zip scripts",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-08",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-22T20:00:00Z",pinnedTime:null}]},{gizmoId:"g-firefox-ext",title:"Firefox Extension Port (WebExtensions)",href:"#",conversations:[{id:"c-ffx-01",title:"Chrome vs Firefox APIs: browser.* polyfills and gaps",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-01",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-22T13:00:00Z",pinnedTime:null},{id:"c-ffx-02",title:"MV3 support status: what to avoid for portability",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-02",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-23T14:00:00Z",pinnedTime:null},{id:"c-ffx-03",title:"Side panel alternatives: UI constraints in Firefox",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-03",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-24T15:00:00Z",pinnedTime:null},{id:"c-ffx-04",title:"Packaging & signing: AMO upload checklist",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-04",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-25T16:00:00Z",pinnedTime:null}]},{gizmoId:"g-vite",title:"Vite Build System",href:"#",conversations:[{id:"c-vite-01",title:"Vite plugins: resolveId hooks and swapping seams",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-01",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-02T13:00:00Z",pinnedTime:null},{id:"c-vite-02",title:"Static asset emission: generateBundle and fileName paths",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-02",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-03T14:00:00Z",pinnedTime:null},{id:"c-vite-03",title:"Dev vs build parity: ensuring preview matches prod",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-03",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-04T15:00:00Z",pinnedTime:null},{id:"c-vite-04",title:"Aliasing strategies: regex alias vs plugin-based swapping",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-04",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-05T16:00:00Z",pinnedTime:null},{id:"c-vite-05",title:"TypeScript imports: allowImportingTsExtensions pitfalls",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-05",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-06T17:00:00Z",pinnedTime:null}]},{gizmoId:"g-node",title:"Node.js Backend Patterns",href:"#",conversations:[{id:"c-node-01",title:"HTTP server basics: Express vs Fastify tradeoffs",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-01",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-23T13:00:00Z",pinnedTime:null},{id:"c-node-02",title:"Logging: structured logs and request correlation IDs",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-02",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-24T14:00:00Z",pinnedTime:null},{id:"c-node-03",title:"Auth: session cookies vs JWT in practice",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-03",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-25T15:00:00Z",pinnedTime:null},{id:"c-node-04",title:"Error boundaries: central error middleware strategy",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-04",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-26T16:00:00Z",pinnedTime:null},{id:"c-node-05",title:"Rate limiting: burst control and backoff policies",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-05",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-27T17:00:00Z",pinnedTime:null},{id:"c-node-06",title:"Deployment: process managers and health endpoints",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-06",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-28T18:00:00Z",pinnedTime:null},{id:"c-node-07",title:"Security headers: CSP, HSTS, and X-Frame-Options",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-07",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-29T19:00:00Z",pinnedTime:null},{id:"c-node-08",title:"Postgres patterns: migrations, pool sizing, retries",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-08",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-30T20:00:00Z",pinnedTime:null},{id:"c-node-09",title:"Queues: background jobs and idempotency keys",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-09",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-31T21:00:00Z",pinnedTime:null},{id:"c-node-10",title:"Monorepo setup: shared types and build pipelines",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-10",createTime:"2025-12-22T12:00:00Z",updateTime:"2026-01-01T22:00:00Z",pinnedTime:null},{id:"c-node-11",title:"Observability: metrics, tracing, dashboards",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-11",createTime:"2025-12-22T12:00:00Z",updateTime:"2026-01-02T23:00:00Z",pinnedTime:null}]},{gizmoId:"g-ts",title:"TypeScript Deep Dive",href:"#",conversations:[{id:"c-ts-01",title:"Discriminated unions for message buses",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-01",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-14T13:00:00Z",pinnedTime:null},{id:"c-ts-02",title:"Narrowing: type guards and exhaustive checks",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-02",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-15T14:00:00Z",pinnedTime:null},{id:"c-ts-03",title:"Strict mode: fixing implicit any and unknown",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-03",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-16T15:00:00Z",pinnedTime:null},{id:"c-ts-04",title:"API typing: request/response alignment and reuse",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-04",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-17T16:00:00Z",pinnedTime:null},{id:"c-ts-05",title:"Build targets: ESM, CJS, and browser bundles",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-05",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-18T17:00:00Z",pinnedTime:null},{id:"c-ts-06",title:"Module resolution: paths, aliases, and tooling",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-06",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-19T18:00:00Z",pinnedTime:null},{id:"c-ts-07",title:"Runtime validation: zod vs manual checks",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-07",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-20T19:00:00Z",pinnedTime:null},{id:"c-ts-08",title:"Error types: designing safe error objects",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-08",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-21T20:00:00Z",pinnedTime:null}]},{gizmoId:"g-ai",title:"AI Engineering Notes",href:"#",conversations:[{id:"c-ai-01",title:"Prompt design: constraints, examples, and failure modes",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-01",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-17T13:00:00Z",pinnedTime:null},{id:"c-ai-02",title:"RAG pipeline: chunking and retrieval tuning",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-02",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-18T14:00:00Z",pinnedTime:null},{id:"c-ai-03",title:"Evaluation: golden sets and regression tests",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-03",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-19T15:00:00Z",pinnedTime:null},{id:"c-ai-04",title:"Safety: what to log vs what not to log",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-04",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-20T16:00:00Z",pinnedTime:null},{id:"c-ai-05",title:"Latency: caching, streaming, and batching strategies",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-05",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-21T17:00:00Z",pinnedTime:null},{id:"c-ai-06",title:"Cost control: token budgets and request shaping",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-06",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-22T18:00:00Z",pinnedTime:null},{id:"c-ai-07",title:"Agent orchestration: tools, retries, and guardrails",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-07",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-23T19:00:00Z",pinnedTime:null},{id:"c-ai-08",title:"Model selection: quality vs speed tradeoffs",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-08",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-24T20:00:00Z",pinnedTime:null},{id:"c-ai-09",title:"Data privacy: redaction strategies and minimization",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-09",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-25T21:00:00Z",pinnedTime:null},{id:"c-ai-10",title:"Vector DB options: what matters in production",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-10",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-26T22:00:00Z",pinnedTime:null},{id:"c-ai-11",title:"Embedding drift: how to re-index safely",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-11",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-27T23:00:00Z",pinnedTime:null},{id:"c-ai-12",title:"Fine-tuning vs prompting: decision checklist",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-12",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-29T00:00:00Z",pinnedTime:null},{id:"c-ai-13",title:"Multi-language: tokenization surprises and UX",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-13",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-30T01:00:00Z",pinnedTime:null},{id:"c-ai-14",title:"Human-in-the-loop: review workflows that scale",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-14",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-07-01T02:00:00Z",pinnedTime:null},{id:"c-ai-15",title:"Incident playbook: model outages and fallback plans",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-15",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-07-02T03:00:00Z",pinnedTime:null}]},{gizmoId:"g-algo",title:"Algorithms & Data Structures",href:"#",conversations:[{id:"c-algo-01",title:"Big-O in real life: when it actually matters",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-01",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-09T13:00:00Z",pinnedTime:null},{id:"c-algo-02",title:"Graphs: BFS/DFS patterns and common mistakes",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-02",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-10T14:00:00Z",pinnedTime:null},{id:"c-algo-03",title:"Sorting: stable vs unstable and why you care",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-03",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-11T15:00:00Z",pinnedTime:null},{id:"c-algo-04",title:"Hashing: collisions, load factors, and performance",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-04",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-12T16:00:00Z",pinnedTime:null},{id:"c-algo-05",title:"Dynamic programming: memoization strategy guide",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-05",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-13T17:00:00Z",pinnedTime:null},{id:"c-algo-06",title:"Heaps: priority queues for scheduling tasks",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-06",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-14T18:00:00Z",pinnedTime:null},{id:"c-algo-07",title:"Bit tricks: fast masks and feature flags",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-07",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-15T19:00:00Z",pinnedTime:null},{id:"c-algo-08",title:"Strings: prefix functions, tries, and search",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-08",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-16T20:00:00Z",pinnedTime:null},{id:"c-algo-09",title:"Caching: LRU designs and edge cases",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-09",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-17T21:00:00Z",pinnedTime:null}]},{gizmoId:"g-sec",title:"Security & Hardening",href:"#",conversations:[{id:"c-sec-01",title:"CSP practical guide: reducing XSS risk",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-01",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-24T13:00:00Z",pinnedTime:null},{id:"c-sec-02",title:"CSRF: why it still bites modern apps",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-02",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-25T14:00:00Z",pinnedTime:null},{id:"c-sec-03",title:"Secrets management: env files vs vault",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-03",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-26T15:00:00Z",pinnedTime:null},{id:"c-sec-04",title:"Supply chain: npm audit realities and mitigation",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-04",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-27T16:00:00Z",pinnedTime:null},{id:"c-sec-05",title:"AuthZ: roles, scopes, and permission boundaries",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-05",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-28T17:00:00Z",pinnedTime:null},{id:"c-sec-06",title:"OWASP Top 10: the parts that actually show up",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-06",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-29T18:00:00Z",pinnedTime:null},{id:"c-sec-07",title:"Rate limiting & abuse: bots and scraping controls",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-07",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-30T19:00:00Z",pinnedTime:null},{id:"c-sec-08",title:"Server headers: hardening for modern browsers",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-08",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-01T20:00:00Z",pinnedTime:null},{id:"c-sec-09",title:"Cookie flags: SameSite, Secure, HttpOnly usage",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-09",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-02T21:00:00Z",pinnedTime:null},{id:"c-sec-10",title:"Dependency pinning: lockfiles and reproducibility",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-10",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-03T22:00:00Z",pinnedTime:null},{id:"c-sec-11",title:"TLS basics: certificates, renewals, and traps",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-11",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-04T23:00:00Z",pinnedTime:null},{id:"c-sec-12",title:"App isolation: containers and least privilege",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-12",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-06T00:00:00Z",pinnedTime:null},{id:"c-sec-13",title:"Logging sensitive data: redaction rules",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-13",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-07T01:00:00Z",pinnedTime:null}]},{gizmoId:"g-license",title:"Licenses & Compliance",href:"#",conversations:[{id:"c-lic-01",title:"MIT vs Apache-2.0: practical differences",gizmoId:"g-license",href:"https://chatgpt.com/c/c-lic-01",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-17T13:00:00Z",pinnedTime:null},{id:"c-lic-02",title:"GPL concerns: linking, distribution, and obligations",gizmoId:"g-license",href:"https://chatgpt.com/c/c-lic-02",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-18T14:00:00Z",pinnedTime:null},{id:"c-lic-03",title:"Third-party notices: what to ship with releases",gizmoId:"g-license",href:"https://chatgpt.com/c/c-lic-03",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-19T15:00:00Z",pinnedTime:null}]},{gizmoId:"g-cpp",title:"C++ Foundations",href:"#",conversations:[{id:"c-cpp-01",title:"Modern C++: RAII, smart pointers, and ownership",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-01",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-09T13:00:00Z",pinnedTime:null},{id:"c-cpp-02",title:"Build systems: CMake patterns that don’t hurt",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-02",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-10T14:00:00Z",pinnedTime:null},{id:"c-cpp-03",title:"Undefined behavior: why it is worse than bugs",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-03",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-11T15:00:00Z",pinnedTime:null},{id:"c-cpp-04",title:"Move semantics: when it actually helps",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-04",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-12T16:00:00Z",pinnedTime:null},{id:"c-cpp-05",title:"Templates: compile-time errors and diagnostics",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-05",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-13T17:00:00Z",pinnedTime:null}]},{gizmoId:"g-python",title:"Python Tooling",href:"#",conversations:[{id:"c-py-01",title:"Virtualenv vs Poetry vs uv: picking one",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-01",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-19T13:00:00Z",pinnedTime:null},{id:"c-py-02",title:"Type hints: mypy/pyright strategy",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-02",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-20T14:00:00Z",pinnedTime:null},{id:"c-py-03",title:"FastAPI patterns: dependencies and testing",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-03",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-21T15:00:00Z",pinnedTime:null},{id:"c-py-04",title:"Packaging: wheels, sdists, and versioning",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-04",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-22T16:00:00Z",pinnedTime:null},{id:"c-py-05",title:"Scripting: CLI ergonomics and config layout",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-05",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-23T17:00:00Z",pinnedTime:null},{id:"c-py-06",title:"Data processing: pandas performance basics",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-06",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-24T18:00:00Z",pinnedTime:null},{id:"c-py-07",title:"Async: when to use asyncio and when not",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-07",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-25T19:00:00Z",pinnedTime:null}]},{gizmoId:"g-docker",title:"Docker & Compose",href:"#",conversations:[{id:"c-dk-01",title:"Compose profiles: clean dev vs prod separation",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-01",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-11T13:00:00Z",pinnedTime:null},{id:"c-dk-02",title:"Healthchecks: making dependencies reliable",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-02",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-12T14:00:00Z",pinnedTime:null},{id:"c-dk-03",title:"Volumes: avoiding permission hell with UID/GID",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-03",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-13T15:00:00Z",pinnedTime:null},{id:"c-dk-04",title:"Build stages: small images and fast rebuilds",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-04",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-14T16:00:00Z",pinnedTime:null},{id:"c-dk-05",title:"Reverse proxy patterns: Apache vs Nginx",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-05",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-15T17:00:00Z",pinnedTime:null},{id:"c-dk-06",title:"Static hosting container: serving dist/ safely",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-06",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-16T18:00:00Z",pinnedTime:null},{id:"c-dk-07",title:"Secrets: env files vs Docker secrets",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-07",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-17T19:00:00Z",pinnedTime:null},{id:"c-dk-08",title:"Network: internal URLs and cross-service calls",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-08",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-18T20:00:00Z",pinnedTime:null}]},{gizmoId:"g-next",title:"Next.js Notes",href:"#",conversations:[{id:"c-next-01",title:"App Router: layouts, pages, and route handlers",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-01",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-02T13:00:00Z",pinnedTime:null},{id:"c-next-02",title:"Deployment: build output and runtime configs",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-02",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-03T14:00:00Z",pinnedTime:null},{id:"c-next-03",title:"Static assets: serving under a subpath cleanly",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-03",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-04T15:00:00Z",pinnedTime:null},{id:"c-next-04",title:"Auth flow: proxy headers and cookie security",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-04",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-05T16:00:00Z",pinnedTime:null},{id:"c-next-05",title:"Performance: bundle analysis and caching",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-05",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-06T17:00:00Z",pinnedTime:null}]},{gizmoId:"g-rest",title:"REST API Design",href:"#",conversations:[{id:"c-rest-01",title:"Pagination: cursor vs offset",gizmoId:"g-rest",href:"https://chatgpt.com/c/c-rest-01",createTime:"2025-11-17T12:00:00Z",updateTime:"2025-11-18T13:00:00Z",pinnedTime:null},{id:"c-rest-02",title:"Error formats: consistent error contracts",gizmoId:"g-rest",href:"https://chatgpt.com/c/c-rest-02",createTime:"2025-11-17T12:00:00Z",updateTime:"2025-11-19T14:00:00Z",pinnedTime:null}]},{gizmoId:"g-uiux",title:"UI/UX for Developer Tools",href:"#",conversations:[{id:"c-ui-01",title:"Progress UI: what users need to trust it",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-01",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-12T13:00:00Z",pinnedTime:null},{id:"c-ui-02",title:"Confirmation dialogs: reducing destructive mistakes",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-02",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-13T14:00:00Z",pinnedTime:null},{id:"c-ui-03",title:"Information density: logs that stay readable",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-03",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-14T15:00:00Z",pinnedTime:null},{id:"c-ui-04",title:"Keyboard navigation: focus order and ARIA basics",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-04",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-15T16:00:00Z",pinnedTime:null},{id:"c-ui-05",title:"UX copy: writing status messages that aren’t lies",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-05",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-16T17:00:00Z",pinnedTime:null},{id:"c-ui-06",title:"Empty states: making the UI feel alive",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-06",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-17T18:00:00Z",pinnedTime:null},{id:"c-ui-07",title:"Filter/search: fast client-side techniques",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-07",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-18T19:00:00Z",pinnedTime:null},{id:"c-ui-08",title:"Design tokens: theme-aware colors and spacing",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-08",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-19T20:00:00Z",pinnedTime:null},{id:"c-ui-09",title:"Accessibility: contrast and reduced motion",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-09",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-20T21:00:00Z",pinnedTime:null},{id:"c-ui-10",title:"Responsive layout: two-column split strategies",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-10",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-21T22:00:00Z",pinnedTime:null},{id:"c-ui-11",title:"Error feedback: inline vs toast vs log-only",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-11",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-22T23:00:00Z",pinnedTime:null},{id:"c-ui-12",title:"Consistency: reusable components in the panel",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-12",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-24T00:00:00Z",pinnedTime:null}]},{gizmoId:"g-testing",title:"Testing & QA",href:"#",conversations:[{id:"c-tst-01",title:"Smoke tests: verifying build artifacts exist",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-01",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-22T13:00:00Z",pinnedTime:null},{id:"c-tst-02",title:"Type-check gates: catching message schema drift",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-02",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-23T14:00:00Z",pinnedTime:null},{id:"c-tst-03",title:"Mocking seams: runtime + storage wrappers",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-03",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-24T15:00:00Z",pinnedTime:null},{id:"c-tst-04",title:"Regression tests: keep demo data stable for screenshots",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-04",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-25T16:00:00Z",pinnedTime:null},{id:"c-tst-05",title:"E2E: controlling flakiness with deterministic fixtures",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-05",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-26T17:00:00Z",pinnedTime:null},{id:"c-tst-06",title:"Error injection: simulate failures and retries",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-06",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-27T18:00:00Z",pinnedTime:null},{id:"c-tst-07",title:"Performance: measuring UI responsiveness",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-07",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-28T19:00:00Z",pinnedTime:null}]},{gizmoId:"g-arch",title:"Architecture & Refactors",href:"#",conversations:[{id:"c-arch-01",title:"Separating platform seams: runtime, storage, fetch",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-01",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-09T13:00:00Z",pinnedTime:null},{id:"c-arch-02",title:"Cache strategy: snapshots and subscriptions",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-02",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-10T14:00:00Z",pinnedTime:null},{id:"c-arch-03",title:"Events vs responses: progress events contract",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-03",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-11T15:00:00Z",pinnedTime:null},{id:"c-arch-04",title:"Logging tiers: audit log vs debug trace",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-04",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-12T16:00:00Z",pinnedTime:null},{id:"c-arch-05",title:"Config handling: dev config vs API config",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-05",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-13T17:00:00Z",pinnedTime:null},{id:"c-arch-06",title:"Keeping code clean: no backward compatibility hacks",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-06",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-14T18:00:00Z",pinnedTime:null},{id:"c-arch-07",title:"Message typing: union composition in shared/messages",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-07",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-15T19:00:00Z",pinnedTime:null},{id:"c-arch-08",title:"Organize tab: confirm UI layout improvements",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-08",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-16T20:00:00Z",pinnedTime:null},{id:"c-arch-09",title:"Scope system: YMD filtering and out-of-scope guard",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-09",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-17T21:00:00Z",pinnedTime:null},{id:"c-arch-10",title:"Release tooling: zip builds and GitHub automation",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-10",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-18T22:00:00Z",pinnedTime:null},{id:"c-arch-11",title:"Demo packaging: dist independence and embedding",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-11",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-19T23:00:00Z",pinnedTime:null}]},{gizmoId:"g-misc",title:"Misc Notes & Scratchpad",href:"#",conversations:[{id:"c-misc-01",title:"Naming: choosing clear message constants",gizmoId:"g-misc",href:"https://chatgpt.com/c/c-misc-01",createTime:"2025-07-07T12:00:00Z",updateTime:"2025-07-08T13:00:00Z",pinnedTime:null},{id:"c-misc-02",title:"UI polish: microcopy and empty state wording",gizmoId:"g-misc",href:"https://chatgpt.com/c/c-misc-02",createTime:"2025-07-07T12:00:00Z",updateTime:"2025-07-09T14:00:00Z",pinnedTime:null}]}],singles:[{id:"c-s-01",title:"Quickstart: build and load unpacked extension",gizmoId:null,href:"https://chatgpt.com/c/c-s-01",createTime:"2026-01-08T12:00:00Z",updateTime:"2026-01-08T13:00:00Z",pinnedTime:null},{id:"c-s-02",title:"Debugging: why a tab click does nothing",gizmoId:null,href:"https://chatgpt.com/c/c-s-02",createTime:"2026-01-04T12:00:00Z",updateTime:"2026-01-04T14:00:00Z",pinnedTime:null},{id:"c-s-03",title:"Vite: dev vs preview and why it matters",gizmoId:null,href:"https://chatgpt.com/c/c-s-03",createTime:"2025-12-31T12:00:00Z",updateTime:"2025-12-31T15:00:00Z",pinnedTime:null},{id:"c-s-04",title:"TypeScript error: union event types mismatch",gizmoId:null,href:"https://chatgpt.com/c/c-s-04",createTime:"2025-12-27T12:00:00Z",updateTime:"2025-12-27T16:00:00Z",pinnedTime:null},{id:"c-s-05",title:"Chrome storage: local vs sync differences",gizmoId:null,href:"https://chatgpt.com/c/c-s-05",createTime:"2025-12-23T12:00:00Z",updateTime:"2025-12-23T17:00:00Z",pinnedTime:null},{id:"c-s-06",title:"Design: two-column layout for safer confirmations",gizmoId:null,href:"https://chatgpt.com/c/c-s-06",createTime:"2025-12-19T12:00:00Z",updateTime:"2025-12-19T18:00:00Z",pinnedTime:null},{id:"c-s-07",title:"Security: CSP and embedding via iframe",gizmoId:null,href:"https://chatgpt.com/c/c-s-07",createTime:"2025-12-15T12:00:00Z",updateTime:"2025-12-15T19:00:00Z",pinnedTime:null},{id:"c-s-08",title:"Git: stash vs commit for interrupted scripts",gizmoId:null,href:"https://chatgpt.com/c/c-s-08",createTime:"2025-12-11T12:00:00Z",updateTime:"2025-12-11T20:00:00Z",pinnedTime:null},{id:"c-s-09",title:"Release automation: tag + upload assets",gizmoId:null,href:"https://chatgpt.com/c/c-s-09",createTime:"2025-12-07T12:00:00Z",updateTime:"2025-12-07T21:00:00Z",pinnedTime:null},{id:"c-s-10",title:"Node audit: handling moderate vulnerabilities",gizmoId:null,href:"https://chatgpt.com/c/c-s-10",createTime:"2025-12-03T12:00:00Z",updateTime:"2025-12-03T22:00:00Z",pinnedTime:null},{id:"c-s-11",title:"Next.js proxy: Apache headers and websocket upgrade",gizmoId:null,href:"https://chatgpt.com/c/c-s-11",createTime:"2025-11-29T12:00:00Z",updateTime:"2025-11-29T23:00:00Z",pinnedTime:null},{id:"c-s-12",title:"Mocking: seam swap for runtime and storage",gizmoId:null,href:"https://chatgpt.com/c/c-s-12",createTime:"2025-11-25T12:00:00Z",updateTime:"2025-11-26T00:00:00Z",pinnedTime:null},{id:"c-s-13",title:"API design: progress events contract",gizmoId:null,href:"https://chatgpt.com/c/c-s-13",createTime:"2025-11-21T12:00:00Z",updateTime:"2025-11-22T01:00:00Z",pinnedTime:null},{id:"c-s-14",title:"UI: logs tab export and trimming strategy",gizmoId:null,href:"https://chatgpt.com/c/c-s-14",createTime:"2025-11-17T12:00:00Z",updateTime:"2025-11-18T02:00:00Z",pinnedTime:null},{id:"c-s-15",title:"Organize: moving chats to projects workflow",gizmoId:null,href:"https://chatgpt.com/c/c-s-15",createTime:"2025-11-13T12:00:00Z",updateTime:"2025-11-14T03:00:00Z",pinnedTime:null},{id:"c-s-16",title:"Performance: caching and update throttling",gizmoId:null,href:"https://chatgpt.com/c/c-s-16",createTime:"2025-11-09T12:00:00Z",updateTime:"2025-11-10T04:00:00Z",pinnedTime:null},{id:"c-s-17",title:"License: choosing MIT vs Apache for a tool",gizmoId:null,href:"https://chatgpt.com/c/c-s-17",createTime:"2025-11-05T12:00:00Z",updateTime:"2025-11-06T05:00:00Z",pinnedTime:null},{id:"c-s-18",title:"CSS: why panel looks ugly in demo build",gizmoId:null,href:"https://chatgpt.com/c/c-s-18",createTime:"2025-11-01T12:00:00Z",updateTime:"2025-11-02T06:00:00Z",pinnedTime:null},{id:"c-s-19",title:"Troubleshooting: missing DOM id errors in panel",gizmoId:null,href:"https://chatgpt.com/c/c-s-19",createTime:"2025-10-28T12:00:00Z",updateTime:"2025-10-29T07:00:00Z",pinnedTime:null}]};function W(){return Date.now()}async function nc(e){switch(e.type){case k.LIST_GIZMO_PROJECTS:{const t=W();J({type:k.LIST_GIZMO_PROJECTS_PROGRESS,foundProjects:0,foundConversations:0}),await ie(150);const i=ce.projects.length,n=ce.projects.reduce((c,a)=>{var o;return c+(((o=a.conversations)==null?void 0:o.length)||0)},0);return J({type:k.LIST_GIZMO_PROJECTS_DONE,totalProjects:i,totalConversations:n,elapsedMs:W()-t}),{ok:!0,projects:ce.projects}}case k.LIST_ALL_CHATS:{const t=W();return J({type:k.LIST_ALL_CHATS_PROGRESS,found:0}),await ie(120),J({type:k.LIST_ALL_CHATS_DONE,total:ce.singles.length,elapsedMs:W()-t}),{ok:!0,conversations:ce.singles}}case k.EXECUTE_DELETE:{const t=e.ids,i=`run-${W()}`;let n=0;for(const c of t)n++,await ie(80),J({type:k.EXECUTE_DELETE_PROGRESS,runId:i,i:n,total:t.length,id:c,ok:!0,status:200,attempt:1,elapsedMs:0,lastOpMs:80});return J({type:k.EXECUTE_DELETE_DONE,runId:i,total:t.length,okCount:t.length,failCount:0,elapsedMs:0}),{ok:!0}}case k.MOVE_CHATS_TO_PROJECT:{const t=e.ids,i=`run-${W()}`;let n=0;for(const c of t)n++,await ie(90),J({type:k.MOVE_CHATS_TO_PROJECT_PROGRESS,runId:i,i:n,total:t.length,id:c,ok:!0,status:200,elapsedMs:0,lastOpMs:90});return J({type:k.MOVE_CHATS_TO_PROJECT_DONE,runId:i,total:t.length,okCount:t.length,failCount:0,elapsedMs:0}),{ok:!0}}case k.CREATE_PROJECT:return{ok:!0,gizmoId:`g-${W()}`,title:e.name||"New Project",href:"#"};case k.DELETE_PROJECTS:{const t=e.gizmoIds,i=`run-${W()}`;let n=0;for(const c of t)n++,await ie(100),J({type:k.DELETE_PROJECTS_PROGRESS,runId:i,i:n,total:t.length,gizmoId:c,ok:!0,status:200,elapsedMs:0,lastOpMs:100});return J({type:k.DELETE_PROJECTS_DONE,runId:i,total:t.length,okCount:t.length,failCount:0,elapsedMs:0}),{ok:!0}}default:return{ok:!1,error:`Demo handler not implemented for: ${e==null?void 0:e.type}`}}}function ie(e){return new Promise(t=>setTimeout(t,e))}const Ne=new Set;function J(e){for(const t of Ne)t(e)}function cc(e){Ne.add(e)}async function V(e){return await Promise.resolve(nc(e))}function ic(){const e=new Set;function t(n){return e.add(n),()=>e.delete(n)}function i(){cc(c=>{for(const a of e)a(c)})}return{on:t,start:i}}function sc(e,t){let i="single";function n(r){const u=j=>r===j;e.tabSingle.classList.toggle("is-active",u("single")),e.tabSingle.setAttribute("aria-selected",String(u("single"))),e.viewSingle.hidden=!u("single"),e.tabProjects.classList.toggle("is-active",u("projects")),e.tabProjects.setAttribute("aria-selected",String(u("projects"))),e.viewProjects.hidden=!u("projects"),e.tabSearch.classList.toggle("is-active",u("search")),e.tabSearch.setAttribute("aria-selected",String(u("search"))),e.viewSearch.hidden=!u("search"),e.tabOrganize.classList.toggle("is-active",u("organize")),e.tabOrganize.setAttribute("aria-selected",String(u("organize"))),e.viewOrganize.hidden=!u("organize"),e.tabLogs.classList.toggle("is-active",u("logs")),e.tabLogs.setAttribute("aria-selected",String(u("logs"))),e.viewLogs.hidden=!u("logs"),e.tabStats.classList.toggle("is-active",u("stats")),e.tabStats.setAttribute("aria-selected",String(u("stats"))),e.viewStats.hidden=!u("stats")}function c(r){r!==i&&(t[i].unmount(),i=r,n(i),t[i].mount())}function a(){e.tabSingle.addEventListener("click",()=>c("single")),e.tabProjects.addEventListener("click",()=>c("projects")),e.tabOrganize.addEventListener("click",()=>c("organize")),e.tabSearch.addEventListener("click",()=>c("search")),e.tabLogs.addEventListener("click",()=>c("logs")),e.tabStats.addEventListener("click",()=>c("stats"))}function o(){n(i),t[i].mount()}return{bind:a,boot:o,switchTo:c}}function oc(e){var i;let t=0;for(const n of e)t+=((i=n.conversations)==null?void 0:i.length)||0;return t}function we(e){const t=oc(e.projects),i=e.singleChats.length,n=e.projects.length;return{singleChats:e.singleChats,projects:e.projects,counts:{singleChats:i,projects:n,projectChats:t,totalChats:i+t},meta:e.meta}}function ac(){const e={singleChats:[],projects:[],meta:{}},t=new Set;function i(){const s=we(e);for(const p of t)try{p(s)}catch{}}function n(s){e.meta.scopeUpdatedSince=s,i()}function c(){return String(e.meta.scopeUpdatedSince||"")}function a(){return we(e)}function o(s){t.add(s);try{s(a())}catch{}return()=>t.delete(s)}function r(){e.singleChats=[],e.projects=[],e.meta={},i()}function u(s,p){e.singleChats=s.slice(),e.meta.singleUpdatedTs=Date.now(),typeof(p==null?void 0:p.limit)=="number"&&(e.meta.singleLimit=p.limit),i()}function j(s,p){e.projects=s.slice(),e.meta.projectsUpdatedTs=Date.now(),typeof(p==null?void 0:p.limitProjects)=="number"&&(e.meta.projectsLimit=p.limitProjects),typeof(p==null?void 0:p.chatsPerProject)=="number"&&(e.meta.projectsChatsLimit=p.chatsPerProject),i()}function l(s){var S;const p=e.singleChats.length;e.singleChats=e.singleChats.filter(T=>T.id!==s);let g=!1;const b=[];for(const T of e.projects){const E=((S=T.conversations)==null?void 0:S.length)||0,m=(T.conversations||[]).filter(C=>C.id!==s);m.length!==E&&(g=!0),b.push(E===m.length?T:{...T,conversations:m})}(e.singleChats.length!==p||g)&&(e.projects=b,i())}function h(s){const p=e.projects.length;e.projects=e.projects.filter(g=>g.gizmoId!==s),e.projects.length!==p&&i()}return{getSnapshot:a,subscribe:o,getScopeUpdatedSince:c,clearAll:r,setSingleChats:u,setProjects:j,removeChat:l,removeProject:h,setScopeUpdatedSince:n}}const X=new Map,je=new Set;function Ue(e){for(const t of je)t(e,"local")}async function ee(e){if(typeof e=="string")return{[e]:X.get(e)};if(Array.isArray(e)){const i={};for(const n of e)i[n]=X.get(n);return i}const t={};for(const[i,n]of Object.entries(e))t[i]=X.has(i)?X.get(i):n;return t}async function ae(e){const t={};for(const[i,n]of Object.entries(e)){const c=X.get(i);X.set(i,n),t[i]={oldValue:c,newValue:n}}Ue(t)}async function Pe(e){const t=Array.isArray(e)?e:[e],i={};for(const n of t){const c=X.get(n);X.delete(n),i[n]={oldValue:c,newValue:void 0}}Ue(i)}function rc(e){je.add(e)}function lc(e){je.delete(e)}const ge="cgo.actionLog",dc=5e3;function uc(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}function gc(e){return Array.isArray(e)?e:[e]}async function oe(){const e=await ee(ge),t=e==null?void 0:e[ge];return Array.isArray(t)?t:[]}async function He(e){await ae({[ge]:e})}function pe(e,t,i){return Math.max(t,Math.min(i,Math.floor(e)))}async function K(e,t){const i=pe(dc,100,5e4),c=gc(e).map(u=>({...u,id:uc(),ts:Date.now()}));if(!c.length)return{total:(await oe()).length};const o=(await oe()).concat(c),r=o.length>i?o.slice(o.length-i):o;return await He(r),{total:r.length}}async function pc(e){const t=pe((e==null?void 0:e.limit)??200,1,5e4),i=pe((e==null?void 0:e.offset)??0,0,1e6);let c=await oe();e!=null&&e.kind&&(c=c.filter(r=>r.kind===e.kind)),e!=null&&e.scope&&(c=c.filter(r=>r.scope===e.scope)),typeof(e==null?void 0:e.sinceTs)=="number"&&(c=c.filter(r=>r.ts>=e.sinceTs)),typeof(e==null?void 0:e.untilTs)=="number"&&(c=c.filter(r=>r.ts<=e.untilTs));const a=c.length;c=c.slice().reverse();const o=c.slice(i,i+t);return{total:a,items:o}}async function mc(e){let i=await oe();if(typeof e.beforeTs=="number"&&(i=i.filter(n=>n.ts>=e.beforeTs)),typeof e.keepLast=="number"){const n=pe(e.keepLast,0,5e4);n===0?i=[]:i.length>n&&(i=i.slice(i.length-n))}return await He(i),{total:i.length}}async function hc(){await Pe(ge)}async function fc(e){const t=await oe();return JSON.stringify(t,null,2)}function Y(e,t,i,n){const c=Number(String(e??"").trim());return Number.isFinite(c)?Math.max(t,Math.min(i,Math.floor(c))):n}function R(e){return Number.isFinite(e)?e<1e3?`${e}ms`:`${Math.round(e/100)/10}s`:"?"}let Ge=!1;function D(){return Ge}function M(e,t){Ge=t,e.scopeLoadingEl.classList.toggle("is-busy",t),e.btnScopeChange.disabled=t,e.btnScopeRefresh.disabled=t,e.scopeDateEl.disabled=t,e.btnScopeCancel.disabled=t,e.btnScopeApply.disabled=t,e.btnListSingle.disabled=t,e.singleLimitEl.disabled=t,e.cbSingleToggleAll.disabled=t,e.btnSingleDelete.disabled=t,e.btnListProjects.disabled=t,e.projectsLimitEl.disabled=t,e.projectsChatsLimitEl.disabled=t,e.btnProjectsDelete.disabled=t,e.btnSearchListSingle.disabled=t,e.btnSearchListProjects.disabled=t,e.btnSearchResetFilters.disabled=t,e.btnSearchClear.disabled=t,e.searchQueryEl.disabled=t,Array.from(document.querySelectorAll("input[type='checkbox']")).forEach(i=>{i.disabled=t})}function Tc(){let e=[];const t=new Set;function i(r){e=r;const u=new Set(e.map(j=>j.id));for(const j of Array.from(t))u.has(j)||t.delete(j)}function n(r,u){u?t.add(r):t.delete(r)}function c(r){if(r)for(const u of e)t.add(u.id);else for(const u of e)t.delete(u.id)}function a(){return e.filter(r=>t.has(r.id)).map(r=>r.id)}function o(r){e=e.filter(u=>u.id!==r),t.delete(r)}return{get chats(){return e},selected:t,setChats:i,toggle:n,toggleAll:c,getSelectedIds:a,removeChat:o}}function Ec(e){function t(l){e.singleStatusEl.textContent=l}function i(l){e.singleExecOutEl.textContent=l}function n(l){const h=e.singleExecOutEl.textContent||"";e.singleExecOutEl.textContent=h?`${h}
${l}`:l,e.singleExecOutEl.scrollTop=e.singleExecOutEl.scrollHeight}function c(l){e.singleExecProgressWrapEl.hidden=!l,l||(e.singleExecProgressEl.value=0,e.singleExecProgressEl.max=100,e.singleExecProgressTextEl.textContent="")}function a(l){e.singleConfirmBoxEl.hidden=!l,l||(e.singleCbConfirmEl.checked=!1,e.singleConfirmTitleEl.textContent="",e.singleConfirmPreviewEl.innerHTML="")}function o(l,h){e.singleCountEl.textContent=String(l.length),e.singleSelectedCountEl.textContent=String(h.size)}function r(l,h){if(!l.length){e.cbSingleToggleAll.checked=!1,e.cbSingleToggleAll.indeterminate=!1;return}const s=l.filter(p=>h.has(p.id)).length;s===0?(e.cbSingleToggleAll.checked=!1,e.cbSingleToggleAll.indeterminate=!1):s===l.length?(e.cbSingleToggleAll.checked=!0,e.cbSingleToggleAll.indeterminate=!1):(e.cbSingleToggleAll.checked=!1,e.cbSingleToggleAll.indeterminate=!0)}function u(l){const{chats:h,selected:s,isBusy:p,onToggleChat:g}=l;e.singleListEl.innerHTML="";for(const b of h){const S=document.createElement("li");S.className="item",S.dataset.id=b.id;const T=document.createElement("div");T.className="left";const E=document.createElement("input");E.type="checkbox",E.className="deleteCb",E.checked=s.has(b.id),E.addEventListener("change",()=>{p||(g(b.id,E.checked),S.classList.toggle("selected",E.checked))}),T.appendChild(E);const m=document.createElement("div");m.className="mid";const C=document.createElement("div");C.className="title",C.textContent=b.title||"Untitled";const d=document.createElement("a");d.className="link",d.href=b.href,d.textContent=b.href,d.target="_blank",d.rel="noreferrer",m.appendChild(C),m.appendChild(d),S.appendChild(T),S.appendChild(m),S.classList.toggle("selected",s.has(b.id)),e.singleListEl.appendChild(S)}o(h,s),r(h,s)}function j(l,h){const s=l.filter(S=>h.includes(S.id)),p=s.length,g=s.slice(0,5);e.singleConfirmTitleEl.textContent=`You are about to delete: ${p} chat${p===1?"":"s"}`,e.singleConfirmPreviewEl.innerHTML="";for(const S of g){const T=document.createElement("li");T.textContent=S.title||"Untitled",e.singleConfirmPreviewEl.appendChild(T)}const b=p-g.length;if(b>0){const S=document.createElement("li");S.textContent=`and ${b} more…`,e.singleConfirmPreviewEl.appendChild(S)}e.singleCbConfirmEl.checked=!1,e.singleBtnConfirmExecute.textContent=`Yes, delete ${p}`}return{setStatus:t,writeExecOut:i,appendExecOut:n,showExecProgress:c,showConfirm:a,updateCounts:o,updateToggleAllState:r,renderList:u,renderConfirmPreview:j}}const me="cgo_stats_v1";function Q(e){const t=Number(e);return Number.isFinite(t)&&t>0?Math.floor(t):0}async function xe(){try{const e=await ee(me),t=(e==null?void 0:e[me])||{};return{deletedChats:Q(t.deletedChats),deletedProjects:Q(t.deletedProjects)}}catch{return{deletedChats:0,deletedProjects:0}}}async function Fe(e){await ae({[me]:{deletedChats:Q(e.deletedChats),deletedProjects:Q(e.deletedProjects)}})}async function Je(e=1){const t=await xe(),i={...t,deletedChats:t.deletedChats+Math.max(1,Q(e))};return await Fe(i),i}async function Cc(e=1){const t=await xe(),i={...t,deletedProjects:t.deletedProjects+Math.max(1,Q(e))};return await Fe(i),i}function Sc(e,t,i){const n=Tc(),c=Ec(e);let a=null,o=0,r=0,u=0,j=0;const l=50;function h(){var I;const d=typeof i.getScopeUpdatedSince=="function"?i.getScopeUpdatedSince():"";return d||((I=e.scopeDateEl)==null?void 0:I.value)||""}function s(d){a=null,o=0,r=0,u=d,j=0,c.showExecProgress(!0),e.singleExecProgressEl.max=d,e.singleExecProgressEl.value=0,e.singleExecProgressTextEl.textContent=`Starting… 0/${d}`,c.setStatus("Deleting chats…")}function p(d,I,v,w,x){e.singleExecProgressEl.max=I,e.singleExecProgressEl.value=Math.min(d,I),e.singleExecProgressTextEl.textContent=`Deleting ${d}/${I} · ok ${v} · failed ${w} · last ${R(x)}`}function g(d){c.setStatus(""),e.singleExecProgressTextEl.textContent=d}async function b(){c.showConfirm(!1),c.writeExecOut(""),c.setStatus("Loading single chats…"),M(e,!0);const d=Y(e.singleLimitEl.value,1,5e4,50),I=h();console.log("[CGO][scope] panel->background LIST_ALL_CHATS",{scopeYmd:I,limit:d,pageSize:50});const v=await V({type:k.LIST_ALL_CHATS}).catch(()=>null);if(M(e,!1),!v){c.setStatus("Loading single chats failed (no response).");return}if(!v.ok){c.setStatus(`Loading single chats failed: ${v.error}`);return}const w=v.conversations||[];n.setChats(w.filter(x=>!x.gizmoId)),i.setSingleChats(n.chats,{limit:d}),c.renderList({chats:n.chats,selected:n.selected,isBusy:D(),onToggleChat:(x,L)=>{n.toggle(x,L),c.updateCounts(n.chats,n.selected),c.updateToggleAllState(n.chats,n.selected)}}),c.setStatus("")}function S(){const d=n.getSelectedIds();if(!d.length){c.writeExecOut("Nothing selected.");return}c.renderConfirmPreview(n.chats,d),c.showConfirm(!0)}async function T(){const d=n.getSelectedIds();if(!d.length){c.writeExecOut("Nothing selected.");return}c.writeExecOut(""),c.appendExecOut(`EXECUTE: deleting ${d.length} chat(s)…`),s(d.length),M(e,!0),V({type:k.EXECUTE_DELETE,ids:d}).catch(()=>null)}function E(){if(D()||!n.chats.length)return;const I=n.chats.filter(v=>n.selected.has(v.id)).length===n.chats.length;n.toggleAll(!I),c.renderList({chats:n.chats,selected:n.selected,isBusy:D(),onToggleChat:(v,w)=>{n.toggle(v,w),c.updateCounts(n.chats,n.selected),c.updateToggleAllState(n.chats,n.selected)}})}const m=t.on(d=>{var I;if((d==null?void 0:d.type)===k.EXECUTE_DELETE_PROGRESS){const v=d;if(a||(a=v.runId),a!==v.runId)return;const w=Number(v.i||0),x=Number(v.total||u),L=String(v.id||""),f=!!v.ok,P=v.status,Z=v.error,_=Number(v.attempt||1),y=Number(v.elapsedMs||0),z=Number(v.lastOpMs||0);f?o++:r++,p(w,x,o,r,z);const B=((I=n.chats.find(A=>A.id===L))==null?void 0:I.title)||L.slice(0,8),O=f?`✓ ${B} (${L.slice(0,8)}) — ${P??"OK"} — ${R(z)} — elapsed ${R(y)}`:`✗ ${B} (${L.slice(0,8)}) — ${P??"ERR"} — attempt ${_} — ${Z||"failed"} — elapsed ${R(y)}`;c.appendExecOut(O),!f&&j<l&&(j++,K({kind:"error",scope:"single",message:`Delete chat failed: ${B} (${L.slice(0,8)})`,ok:!1,status:P,error:Z||"failed",chatId:L,chatTitle:B,meta:{attempt:_,elapsedMs:y,lastOpMs:z}}).catch(()=>{})),f&&(n.removeChat(L),i.removeChat(L),Je(1).catch(()=>{}),c.renderList({chats:n.chats,selected:n.selected,isBusy:D(),onToggleChat:(A,U)=>{n.toggle(A,U),c.updateCounts(n.chats,n.selected),c.updateToggleAllState(n.chats,n.selected)}}));return}if((d==null?void 0:d.type)===k.EXECUTE_DELETE_DONE){const v=d;if(a||(a=v.runId),a!==v.runId)return;const w=Number(v.total||u),x=Number(v.okCount||o),L=Number(v.failCount||r),f=Number(v.elapsedMs||0);K({kind:"run",scope:"single",message:`Delete run finished: ok ${x}/${w}, failed ${L}, elapsed ${R(f)}`,ok:L===0,meta:{total:w,okCount:x,failCount:L,elapsedMs:f}}).catch(()=>{}),j=0,g(`Done · ok ${x}/${w} · failed ${L} · elapsed ${R(f)}`),M(e,!1),a=null;return}});function C(){e.cbSingleToggleAll.addEventListener("change",()=>E()),e.btnSingleDelete.addEventListener("click",()=>{D()||S()}),e.singleBtnCancelExecute.addEventListener("click",()=>c.showConfirm(!1)),e.singleBtnConfirmExecute.addEventListener("click",()=>{if(!e.singleCbConfirmEl.checked){c.writeExecOut("Blocked: tick the confirmation checkbox.");return}c.showConfirm(!1),T().catch(d=>{c.writeExecOut(`Execute crashed: ${(d==null?void 0:d.message)||d}`),M(e,!1)})})}return{id:"single",refresh(){D()||b().catch(d=>c.setStatus(`Error: ${(d==null?void 0:d.message)||d}`))},mount(){},unmount(){},bind:C,dispose(){m()}}}function bc(){let e=[];const t=new Set,i=new Set;function n(l){e=l;const h=new Set(e.map(p=>p.gizmoId));for(const p of Array.from(t))h.has(p)||t.delete(p);const s=new Set(e.flatMap(p=>(p.conversations||[]).map(g=>g.id)));for(const p of Array.from(i))s.has(p)||i.delete(p)}function c(l){return(l.conversations||[]).map(h=>h.id)}function a(l,h){if(h){t.add(l.gizmoId);for(const s of c(l))i.add(s)}else{t.delete(l.gizmoId);for(const s of c(l))i.delete(s)}}function o(l,h){h?i.add(l):i.delete(l)}function r(l){i.delete(l);for(const h of e)h.conversations=(h.conversations||[]).filter(s=>s.id!==l)}function u(l){t.delete(l),e=e.filter(h=>h.gizmoId!==l)}function j(){return e.reduce((l,h)=>l+(h.conversations||[]).length,0)}return{get projects(){return e},selectedProjectIds:t,selectedProjectChatIds:i,setProjects:n,toggleProjectSelection:a,toggleChatSelection:o,removeChatEverywhere:r,removeProject:u,getTotalChats:j}}function yc(e){function t(l){e.projectsStatusEl.textContent=l}function i(l){e.projectsExecOutEl.textContent=l}function n(l){const h=e.projectsExecOutEl.textContent||"";e.projectsExecOutEl.textContent=h?`${h}
${l}`:l,e.projectsExecOutEl.scrollTop=e.projectsExecOutEl.scrollHeight}function c(l){e.projectsChatsExecProgressWrapEl.hidden=!l,l||(e.projectsChatsExecProgressEl.value=0,e.projectsChatsExecProgressEl.max=100,e.projectsChatsExecProgressTextEl.textContent="")}function a(l){e.projectsProjectsExecProgressWrapEl.hidden=!l,l||(e.projectsProjectsExecProgressEl.value=0,e.projectsProjectsExecProgressEl.max=100,e.projectsProjectsExecProgressTextEl.textContent="")}function o(l){e.projectsConfirmBoxEl.hidden=!l,l||(e.projectsCbConfirmEl.checked=!1,e.projectsConfirmTitleEl.textContent="",e.projectsConfirmPreviewEl.innerHTML="")}function r(l){e.projectsCountEl.textContent=String(l.projects.length),e.projectsChatsCountEl.textContent=String(l.totalChats),e.projectsSelectedChatsCountEl.textContent=String(l.selectedChatsCount),e.projectsSelectedProjectsCountEl.textContent=String(l.selectedProjectsCount)}function u(l){var m;const{projects:h,selectedProjectIds:s,selectedProjectChatIds:p,isBusy:g,onToggleProject:b,onToggleChat:S,afterProjectToggle:T,afterChatToggle:E}=l;e.projectsListEl.innerHTML="";for(const C of h){const d=document.createElement("li");d.className="projectCard",d.dataset.gizmoId=C.gizmoId;const I=document.createElement("div");I.className="projectHead";const v=document.createElement("div"),w=document.createElement("div");w.className="title",w.textContent=`${C.title} (${((m=C.conversations)==null?void 0:m.length)||0})`;const x=document.createElement("a");x.className="link",x.href=C.href,x.target="_blank",x.rel="noreferrer",x.textContent=C.href,v.appendChild(w),v.appendChild(x);const L=document.createElement("label");L.className="projectPick";const f=document.createElement("input");f.type="checkbox",f.checked=s.has(C.gizmoId),f.addEventListener("change",()=>{g||(b(C,f.checked),T())});const P=document.createElement("span");P.textContent="Select project (delete project + its chats)",L.appendChild(f),L.appendChild(P),I.appendChild(v),I.appendChild(L);const Z=document.createElement("details"),_=document.createElement("summary");_.textContent="Show conversations",Z.appendChild(_);const y=document.createElement("ul");y.className="list",y.style.marginTop="8px";for(const z of C.conversations||[]){const B=document.createElement("li");B.className="item",B.style.gridTemplateColumns="28px 1fr";const O=document.createElement("div");O.className="left";const A=document.createElement("input");A.type="checkbox",A.className="deleteCb";const U=s.has(C.gizmoId);A.checked=U||p.has(z.id),A.addEventListener("change",()=>{if(!g){if(s.has(C.gizmoId)){A.checked=!0;return}S(C,z.id,A.checked),E()}}),O.appendChild(A);const H=document.createElement("div"),N=document.createElement("div");N.className="title",N.textContent=z.title||"Untitled";const $=document.createElement("a");$.className="link",$.href=z.href,$.target="_blank",$.rel="noreferrer",$.textContent=z.href,H.appendChild(N),H.appendChild($),B.appendChild(O),B.appendChild(H),y.appendChild(B)}Z.appendChild(y),d.appendChild(I),d.appendChild(Z),e.projectsListEl.appendChild(d)}}function j(l){const{projects:h,selectedProjectIds:s,selectedChatIds:p}=l;e.projectsConfirmPreviewEl.innerHTML="";const g=[];s.length&&g.push(`${s.length} project(s)`),p.length&&g.push(`${p.length} chat(s)`),e.projectsConfirmTitleEl.textContent=`You are about to delete: ${g.join(" + ")}`;const b=s.slice(0,5);for(const T of b){const E=h.find(C=>C.gizmoId===T);if(!E)continue;const m=document.createElement("li");m.textContent=`Project: ${E.title}`,e.projectsConfirmPreviewEl.appendChild(m)}if(s.length>b.length){const T=document.createElement("li");T.textContent=`…and ${s.length-b.length} more projects`,e.projectsConfirmPreviewEl.appendChild(T)}const S=p.slice(0,5);for(const T of S){const E=h.flatMap(C=>C.conversations||[]).find(C=>C.id===T),m=document.createElement("li");m.textContent=`Chat: ${(E==null?void 0:E.title)||T.slice(0,8)}`,e.projectsConfirmPreviewEl.appendChild(m)}if(p.length>S.length){const T=document.createElement("li");T.textContent=`…and ${p.length-S.length} more chats`,e.projectsConfirmPreviewEl.appendChild(T)}e.projectsCbConfirmEl.checked=!1,e.projectsBtnConfirmExecute.textContent="Yes, delete"}return{setStatus:t,writeExecOut:i,appendExecOut:n,showChatsExecProgress:c,showProjectsExecProgress:a,showConfirm:o,updateCounts:r,renderList:u,renderConfirmPreview:j}}function re(e,t){const i=e.querySelector(t);if(!i)throw new Error(`[createProjectBox] Missing ${t}`);return i}function We(e){const{context:t,title:i=t==="organize"?"Create new project":"Create a new project",compact:n=t==="organize",namePlaceholder:c="e.g. general",descPlaceholder:a=t==="organize"?"Optional description…":"Short description shown in ChatGPT projects…",submitLabel:o=t==="organize"?"Create":"Create project"}=e,r=document.createElement("details");r.className=`createBox${n?" createBox--compact":""}`,r.open=!1,r.innerHTML=`
    <summary>${be(i)}</summary>

    <div class="createGrid">
      <label class="fieldBlock">
        <span>Project name</span>
        <input data-role="name" type="text" autocomplete="off" maxlength="80" placeholder="${Ze(c)}" />
      </label>

      <label class="fieldBlock">
        <span>Description (optional)</span>
        <textarea data-role="desc" rows="${n?"2":"3"}" placeholder="${Ze(a)}"></textarea>
      </label>

      <div class="row createActions">
        <button data-role="submit" type="button" class="subtle">${be(o)}</button>
        <span data-role="status" class="status"></span>
      </div>
    </div>
  `;const u=re(r,'[data-role="name"]'),j=re(r,'[data-role="desc"]'),l=re(r,'[data-role="submit"]'),h=re(r,'[data-role="status"]');function s(){return{name:u.value.trim(),description:j.value.trim()}}function p(E){u.disabled=E,j.disabled=E,l.disabled=E}function g(E){h.textContent=E}function b(){h.textContent=""}function S(){u.value="",j.value="",b()}function T(){b();const{name:E,description:m}=s();if(!E){g("Name is required."),u.focus();return}const C={name:E,description:m,context:t};r.dispatchEvent(new CustomEvent("cgo:createProject",{bubbles:!0,detail:C}))}return l.addEventListener("click",T),u.addEventListener("keydown",E=>{E.key==="Enter"&&(E.preventDefault(),T())}),{el:r,setBusy:p,setStatus:g,clearStatus:b,reset:S,getValue:s}}function be(e){return e.replace(/[&<>"']/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}})}function Ze(e){return be(e)}function Ve(){window.dispatchEvent(new Event("cgo:refreshAll"))}function Ic(e,t,i){const n=bc(),c=yc(e);let a=null,o=0,r=0,u=0,j=null,l=0,h=0,s=0,p=0;const g=50;function b(){var P;const f=typeof i.getScopeUpdatedSince=="function"?i.getScopeUpdatedSince():"";return f||((P=e.scopeDateEl)==null?void 0:P.value)||""}function S(){c.updateCounts({projects:n.projects,totalChats:n.getTotalChats(),selectedChatsCount:n.selectedProjectChatIds.size,selectedProjectsCount:n.selectedProjectIds.size})}function T(){c.renderList({projects:n.projects,selectedProjectIds:n.selectedProjectIds,selectedProjectChatIds:n.selectedProjectChatIds,isBusy:D(),onToggleProject:(f,P)=>n.toggleProjectSelection(f,P),onToggleChat:(f,P,Z)=>n.toggleChatSelection(P,Z),afterProjectToggle:()=>{S(),T()},afterChatToggle:()=>{S()}}),S()}async function E(){c.showConfirm(!1),c.writeExecOut(""),c.setStatus("Projects loading… 0 project(s), 0 chat(s)"),M(e,!0);const f=Y(e.projectsLimitEl.value,1,5e3,50),P=Y(e.projectsChatsLimitEl.value,1,5e3,200),Z=b(),_=5,y=Y(e.projectsChatsLimitEl.value,1,5e4,5e3);console.log("[CGO][scope] panel->background LIST_GIZMO_PROJECTS",{scopeYmd:Z,limitProjects:f,conversationsPerGizmo:_,perProjectLimit:y,uiMaxChatsPerProject:P});const z=await V({type:k.LIST_GIZMO_PROJECTS}).catch(()=>null);if(M(e,!1),!z){c.setStatus("Projects loading failed (no response).");return}if(!z.ok){c.setStatus(`Projects loading failed: ${z.error}`);return}const B=z.projects||[];n.setProjects(B.map(O=>({...O,conversations:(O.conversations||[]).slice(0,P)}))),i.setProjects(n.projects,{limitProjects:f,chatsPerProject:P}),T(),c.setStatus("")}function m(){const f=Array.from(n.selectedProjectChatIds),P=Array.from(n.selectedProjectIds);if(!f.length&&!P.length){c.writeExecOut("Nothing selected.");return}c.renderConfirmPreview({projects:n.projects,selectedProjectIds:P,selectedChatIds:f}),c.showConfirm(!0)}function C(f){a=null,o=0,r=0,u=f,p=0,c.showChatsExecProgress(!0),e.projectsChatsExecProgressEl.max=f,e.projectsChatsExecProgressEl.value=0,e.projectsChatsExecProgressTextEl.textContent=`Deleting chats… 0/${f}`,c.setStatus("Deleting chats…")}function d(f){j=null,l=0,h=0,s=f,p=0,c.showProjectsExecProgress(!0),e.projectsProjectsExecProgressEl.max=f,e.projectsProjectsExecProgressEl.value=0,e.projectsProjectsExecProgressTextEl.textContent=`Deleting projects… 0/${f}`}async function I(f){f.length&&(C(f.length),M(e,!0),V({type:k.EXECUTE_DELETE,ids:f}).catch(()=>null))}async function v(f){f.length&&(d(f.length),V({type:k.DELETE_PROJECTS,gizmoIds:f}).catch(()=>null))}async function w(){const f=Array.from(n.selectedProjectChatIds),P=Array.from(n.selectedProjectIds);if(!f.length&&!P.length){c.writeExecOut("Nothing selected.");return}window.__cgo_projectsDeletePlan={selectedProjects:P},c.writeExecOut(""),c.appendExecOut(`EXECUTE: deleting ${f.length} conversation(s)…`),P.length&&c.appendExecOut(`Then attempting to delete ${P.length} project(s) (only if empty).`),await I(f)}const x=t.on(f=>{var P,Z,_;if((f==null?void 0:f.type)===k.LIST_GIZMO_PROJECTS_PROGRESS){const y=f,z=Number(y.foundProjects||0),B=Number(y.foundConversations||0);c.setStatus(`Projects loading… ${z} project(s), ${B} chat(s)`);return}if((f==null?void 0:f.type)===k.LIST_GIZMO_PROJECTS_DONE){const y=f;Number(y.totalProjects||0),Number(y.totalConversations||0),Number(y.elapsedMs||0),c.setStatus("");return}if((f==null?void 0:f.type)===k.EXECUTE_DELETE_PROGRESS){const y=f;if(a||(a=y.runId),a!==y.runId)return;const z=Number(y.i||0),B=Number(y.total||u),O=String(y.id||""),A=!!y.ok,U=y.status,H=y.error,N=Number(y.attempt||1),$=Number(y.elapsedMs||0),G=Number(y.lastOpMs||0);A?o++:r++,e.projectsChatsExecProgressEl.max=B,e.projectsChatsExecProgressEl.value=Math.min(z,B),e.projectsChatsExecProgressTextEl.textContent=`Deleting chats ${z}/${B} · ok ${o} · failed ${r} · last ${R(G)}`;const F=((P=n.projects.flatMap(ne=>ne.conversations||[]).find(ne=>ne.id===O))==null?void 0:P.title)||O.slice(0,8),te=A?`✓ ${F} (${O.slice(0,8)}) — ${U??"OK"} — ${R(G)} — elapsed ${R($)}`:`✗ ${F} (${O.slice(0,8)}) — ${U??"ERR"} — attempt ${N} — ${H||"failed"} — elapsed ${R($)}`;c.appendExecOut(te),A&&(n.removeChatEverywhere(O),i.removeChat(O),Je(1).catch(()=>{}),T()),!A&&p<g&&(p++,K({kind:"error",scope:"projects",message:`Delete chat failed: ${F} (${O.slice(0,8)})`,ok:!1,status:U,error:H||"failed",chatId:O,chatTitle:F,meta:{attempt:N,elapsedMs:$,lastOpMs:G}}).catch(()=>{}));return}if((f==null?void 0:f.type)===k.EXECUTE_DELETE_DONE){const y=f;if(a||(a=y.runId),a!==y.runId)return;const z=Number(y.total||u),B=Number(y.okCount||o),O=Number(y.failCount||r),A=Number(y.elapsedMs||0);K({kind:"run",scope:"projects",message:`Projects chat-delete run finished: ok ${B}/${z}, failed ${O}, elapsed ${R(A)}`,ok:O===0,meta:{total:z,okCount:B,failCount:O,elapsedMs:A}}).catch(()=>{}),p=0,c.setStatus("Chats delete done"),e.projectsChatsExecProgressTextEl.textContent=`Done · ok ${B}/${z} · failed ${O} · elapsed ${R(A)}`,M(e,!1);const U=window.__cgo_projectsDeletePlan;if(window.__cgo_projectsDeletePlan=void 0,(Z=U==null?void 0:U.selectedProjects)!=null&&Z.length){const H=[];for(const N of U.selectedProjects){const $=n.projects.find(F=>F.gizmoId===N);if(!$)continue;const G=($.conversations||[]).length;G===0?H.push(N):c.appendExecOut(`SKIP PROJECT: ${$.title} — ${G} chat(s) still present.`)}H.length&&(c.appendExecOut(""),c.appendExecOut(`Deleting ${H.length} project(s)…`),window.__cgo_projectNameById=Object.fromEntries(H.map(N=>{const $=n.projects.find(G=>G.gizmoId===N);return[N,($==null?void 0:$.title)||N]})),v(H))}a=null;return}if((f==null?void 0:f.type)===k.DELETE_PROJECTS_PROGRESS){const y=f;if(j||(j=y.runId),j!==y.runId)return;const z=Number(y.i||0),B=Number(y.total||s),O=String(y.gizmoId||""),A=!!y.ok,U=y.status,H=y.error,N=Number(y.elapsedMs||0),$=Number(y.lastOpMs||0);A?l++:h++,e.projectsProjectsExecProgressEl.max=B,e.projectsProjectsExecProgressEl.value=Math.min(z,B),e.projectsProjectsExecProgressTextEl.textContent=`Deleting projects ${z}/${B} · ok ${l} · failed ${h} · last ${R($)}`;const G=window.__cgo_projectNameById,F=(G==null?void 0:G[O])||((_=n.projects.find(te=>te.gizmoId===O))==null?void 0:_.title)||O;A?(c.appendExecOut(`✓ PROJECT DELETED: ${F} (${O}) — ${U??"OK"} — ${R($)} — elapsed ${R(N)}`),n.removeProject(O),i.removeProject(O),Cc(1).catch(()=>{}),T()):(c.appendExecOut(`✗ PROJECT FAILED: ${F} (${O}) — ${U??""} — ${H||"failed"} — elapsed ${R(N)}`),p<g&&(p++,K({kind:"error",scope:"projects",message:`Delete project failed: ${F}`,ok:!1,status:U,error:H||"failed",projectId:O,projectTitle:F,meta:{elapsedMs:N,lastOpMs:$}}).catch(()=>{})));return}if((f==null?void 0:f.type)===k.DELETE_PROJECTS_DONE){const y=f;if(j||(j=y.runId),j!==y.runId)return;const z=Number(y.total||s),B=Number(y.okCount||l),O=Number(y.failCount||h),A=Number(y.elapsedMs||0);e.projectsProjectsExecProgressTextEl.textContent=`Done · ok ${B}/${s||z} · failed ${O} · elapsed ${R(A)}`,j=null,window.__cgo_projectNameById=void 0;return}});function L(){e.btnProjectsDelete.addEventListener("click",()=>{D()||m()}),e.projectsBtnCancelExecute.addEventListener("click",()=>c.showConfirm(!1)),e.projectsBtnConfirmExecute.addEventListener("click",()=>{if(!e.projectsCbConfirmEl.checked){c.writeExecOut("Blocked: tick the confirmation checkbox.");return}c.showConfirm(!1),w().catch(P=>{c.writeExecOut(`Execute crashed: ${(P==null?void 0:P.message)||P}`),M(e,!1)})});const f=We({context:"projects"});e.mountCreateProjectProjectsEl.replaceChildren(f.el),f.el.addEventListener("cgo:createProject",P=>{const Z=P;(async()=>{if(D())return;const{name:_,description:y}=Z.detail;f.setBusy(!0),f.setStatus("Creating…");try{const z=await V({type:k.CREATE_PROJECT,name:_,description:y,prompt_starters:[]});if(!z){f.setStatus("Create failed (no response).");return}if(!z.ok){f.setStatus(`Create failed: ${z.error||"unknown error"}`);return}f.setStatus("Created."),f.reset(),Ve()}catch(z){f.setStatus(`Create failed: ${(z==null?void 0:z.message)||z}`)}finally{f.setBusy(!1)}})()})}return{id:"projects",refresh(){D()||E().catch(f=>c.setStatus(`Error: ${(f==null?void 0:f.message)||f}`))},mount(){},unmount(){},bind:L,dispose(){x()}}}function vc(){let e=[],t=[],i="all",n="",c="";const a=new Set;let o=null;function r(T){e=T.singleChats||[],t=T.projects||[];const E=new Set;for(const m of e)E.add(m.id);for(const m of t)for(const C of m.conversations||[])E.add(C.id);for(const m of Array.from(a))E.has(m)||a.delete(m);o&&(t.some(C=>C.gizmoId===o)||(o=null))}function u(T){i=T}function j(T){n=T||""}function l(T){c=T||""}function h(T,E){E?a.add(T):a.delete(T)}function s(T){o=T}function p(){o=null}function g(){return o&&t.find(T=>T.gizmoId===o)||null}function b(){const T=[];if(i==="all"||i==="single")for(const m of e)T.push({...m,origin:"single"});if(i==="all"||i==="projects")for(const m of t)for(const C of m.conversations||[])T.push({...C,origin:"project",projectId:m.gizmoId,projectTitle:m.title});const E=n.trim().toLowerCase();return E?T.filter(m=>{const C=(m.title||"").toLowerCase(),d=(m.href||"").toLowerCase(),I=(m.projectTitle||"").toLowerCase();return C.includes(E)||d.includes(E)||I.includes(E)}):T}function S(){const T=c.trim().toLowerCase();return T?t.filter(E=>(E.title||"").toLowerCase().includes(T)):t}return{setFromCache:r,get sourceMode(){return i},setSourceMode:u,setFilter:j,setProjectFilter:l,selectedChatIds:a,toggleChat:h,get targetProjectId(){return o},setTargetProject:s,clearTargetProject:p,getTargetProject:g,buildSourceChats:b,buildProjects:S}}function jc(e){function t(s){e.btnOrganizeMove.disabled=!s,e.organizeBtnConfirmExecute.disabled=!s,e.organizeBtnCancelExecute.disabled=!s,e.organizeSourceEl.disabled=!s,e.organizeFilterEl.disabled=!s,e.organizeProjectFilterEl.disabled=!s,e.cbOrganizeToggleAll.disabled=!s,e.btnOrganizeClearTarget.disabled=!s}function i(s){e.organizeSourceStatusEl.textContent=s}function n(s){e.organizeProjectsStatusEl.textContent=s}function c(s){e.organizeSourceCountEl.textContent=String(s.sourceCount),e.organizeSelectedCountEl.textContent=String(s.selectedCount),e.organizeProjectsCountEl.textContent=String(s.projectsCount),e.organizeTargetLabelEl.textContent=s.targetLabel||"—"}function a(s){e.organizeExecOutEl.textContent=s}function o(s){const p=e.organizeExecOutEl.textContent||"";e.organizeExecOutEl.textContent=p?`${p}
${s}`:s,e.organizeExecOutEl.scrollTop=e.organizeExecOutEl.scrollHeight}function r(s){e.organizeExecProgressWrapEl.hidden=!s,s||(e.organizeExecProgressEl.value=0,e.organizeExecProgressEl.max=100,e.organizeExecProgressTextEl.textContent="")}function u(s){e.organizeConfirmBoxEl.hidden=!s,s||(e.organizeCbConfirmEl.checked=!1,e.organizeConfirmTitleEl.textContent="",e.organizeConfirmPreviewEl.innerHTML="")}function j(s){e.organizeSourceListEl.innerHTML="";for(const p of s.chats){const g=document.createElement("li");g.className="item",g.style.gridTemplateColumns="28px 1fr";const b=document.createElement("div");b.className="left";const S=document.createElement("input");S.type="checkbox",S.checked=s.selectedIds.has(p.id),S.addEventListener("change",()=>{s.isBusy||s.onToggle(p.id,S.checked)}),b.appendChild(S);const T=document.createElement("div"),E=document.createElement("div");E.className="title",E.textContent=p.title||"Untitled";const m=document.createElement("div");m.className="muted",m.style.fontSize="12px",m.textContent=p.origin==="single"?"Single chat":`Project chat · ${p.projectTitle||p.projectId||"—"}`;const C=document.createElement("a");C.className="link",C.href=p.href,C.target="_blank",C.rel="noreferrer",C.textContent=p.href,T.appendChild(E),T.appendChild(m),T.appendChild(C),g.appendChild(b),g.appendChild(T),e.organizeSourceListEl.appendChild(g)}}function l(s){e.organizeProjectListEl.innerHTML="";for(const p of s.projects){const g=document.createElement("li");g.className="item",g.style.gridTemplateColumns="28px 1fr";const b=document.createElement("div");b.className="left";const S=document.createElement("input");S.type="radio",S.name="organizeTargetProject",S.checked=s.targetProjectId===p.gizmoId,S.addEventListener("change",()=>{s.isBusy||S.checked&&s.onPick(p.gizmoId)}),b.appendChild(S);const T=document.createElement("div"),E=document.createElement("div");E.className="title",E.textContent=p.title||"Untitled project";const m=document.createElement("div");m.className="muted",m.style.fontSize="12px",m.textContent=`${(p.conversations||[]).length} chat(s) loaded`;const C=document.createElement("a");C.className="link",C.href=p.href,C.target="_blank",C.rel="noreferrer",C.textContent=p.href,T.appendChild(E),T.appendChild(m),T.appendChild(C),g.appendChild(b),g.appendChild(T),e.organizeProjectListEl.appendChild(g)}}function h(s){e.organizeConfirmPreviewEl.innerHTML="",e.organizeConfirmTitleEl.textContent=`Move ${s.selectedChats.length} chat(s) → “${s.target.title||"Untitled project"}”`;const p=s.selectedChats.slice(0,5);for(const g of p){const b=document.createElement("li");b.textContent=g.title||g.id.slice(0,8),e.organizeConfirmPreviewEl.appendChild(b)}if(s.selectedChats.length>p.length){const g=document.createElement("li");g.textContent=`…and ${s.selectedChats.length-p.length} more`,e.organizeConfirmPreviewEl.appendChild(g)}e.organizeCbConfirmEl.checked=!1,e.organizeBtnConfirmExecute.textContent="Yes, move"}return{setActionsEnabled:t,setSourceStatus:i,setProjectsStatus:n,setCounts:c,writeExecOut:a,appendExecOut:o,showExecProgress:r,showConfirm:u,renderSourceList:j,renderProjectList:l,renderConfirmPreview:h}}function Pc(e,t,i){const n=vc(),c=jc(e);let a=null,o=null,r=0,u=0,j=0,l=0;const h=50;function s(d){o=null,r=0,u=0,j=d,l=0,c.setActionsEnabled(!1),c.showExecProgress(!0),e.organizeExecProgressEl.max=d,e.organizeExecProgressEl.value=0,e.organizeExecProgressTextEl.textContent=`Moving chats… 0/${d}`,c.writeExecOut(""),c.appendExecOut("EXECUTE MOVE (about to run)")}async function p(d,I){d.length&&(s(d.length),M(e,!0),V({type:k.MOVE_CHATS_TO_PROJECT,ids:d}).catch(()=>null))}const g=t.on(d=>{if((d==null?void 0:d.type)===k.MOVE_CHATS_TO_PROJECT_PROGRESS){const I=d;if(o||(o=I.runId),o!==I.runId)return;const v=Number(I.i||0),w=Number(I.total||j),x=String(I.id||""),L=!!I.ok,f=I.status,P=I.error,Z=Number(I.elapsedMs||0),_=Number(I.lastOpMs||0);L?r++:u++,e.organizeExecProgressEl.max=w,e.organizeExecProgressEl.value=Math.min(v,w),e.organizeExecProgressTextEl.textContent=`Moving ${v}/${w} · ok ${r} · failed ${u} · last ${R(_)}`;const y=L?`✓ ${x.slice(0,8)} — ${f??"OK"} — ${R(_)} — elapsed ${R(Z)}`:`✗ ${x.slice(0,8)} — ${f??"ERR"} — ${P||"failed"} — elapsed ${R(Z)}`;c.appendExecOut(y),!L&&l<h&&(l++,K({kind:"error",scope:"organize",message:`Move chat failed (${x.slice(0,8)})`,ok:!1,status:f,error:P||"failed",chatId:x,meta:{elapsedMs:Z,lastOpMs:_}}).catch(()=>{}));return}if((d==null?void 0:d.type)===k.MOVE_CHATS_TO_PROJECT_DONE){const I=d;if(o||(o=I.runId),o!==I.runId)return;const v=Number(I.total||j),w=Number(I.okCount||r),x=Number(I.failCount||u),L=Number(I.elapsedMs||0);c.setActionsEnabled(!0),c.appendExecOut(""),c.appendExecOut(`DONE · ok ${w}/${v} · failed ${x} · elapsed ${R(L)}`),K({kind:"run",scope:"organize",message:`Move run finished: ok ${w}/${v}, failed ${x}, elapsed ${R(L)}`,ok:x===0,meta:{total:v,okCount:w,failCount:x,elapsedMs:L}}).catch(()=>{}),c.showExecProgress(!1),M(e,!1),o=null,c.appendExecOut("Refresh: reloading Singles + Projects to reflect new membership…"),window.dispatchEvent(new CustomEvent("cgo:refreshAll")),c.appendExecOut("Tip: If ChatGPT’s sidebar doesn’t update instantly, refresh the ChatGPT page.");return}});function b(){const d=i.getSnapshot();n.setFromCache({singleChats:d.singleChats||[],projects:d.projects||[]})}function S(){c.setActionsEnabled(!D()),b();const d=n.buildSourceChats(),I=n.buildProjects(),v=n.getTargetProject();c.renderSourceList({chats:d,selectedIds:n.selectedChatIds,isBusy:D(),onToggle:(w,x)=>{n.toggleChat(w,x),S()}}),c.renderProjectList({projects:I,targetProjectId:n.targetProjectId,isBusy:D(),onPick:w=>{n.setTargetProject(w),S()}}),c.setCounts({sourceCount:d.length,selectedCount:n.selectedChatIds.size,projectsCount:I.length,targetLabel:(v==null?void 0:v.title)||"—"}),c.setSourceStatus(d.length?"":"No source chats loaded (refresh Single/Projects first)."),c.setProjectsStatus(I.length?"":"No projects loaded (refresh Projects first).")}function T(d){const I=n.buildSourceChats();for(const v of I)n.toggleChat(v.id,d)}function E(d){const I=n.selectedChatIds;return d.filter(v=>I.has(v.id))}function m(){c.writeExecOut(""),c.appendExecOut("Preparing move…"),c.showConfirm(!1);const d=n.getTargetProject();if(!d){c.writeExecOut("Select exactly one destination project.");return}const I=n.buildSourceChats(),v=E(I);if(!v.length){c.writeExecOut("Select at least one chat to move.");return}c.renderConfirmPreview({selectedChats:v,target:d}),c.showConfirm(!0)}function C(){e.organizeSourceEl.addEventListener("change",()=>{n.setSourceMode(e.organizeSourceEl.value),S()}),e.organizeFilterEl.addEventListener("input",()=>{n.setFilter(e.organizeFilterEl.value),S()}),e.organizeProjectFilterEl.addEventListener("input",()=>{n.setProjectFilter(e.organizeProjectFilterEl.value),S()}),e.cbOrganizeToggleAll.addEventListener("change",()=>{D()||(T(e.cbOrganizeToggleAll.checked),S())}),e.btnOrganizeClearTarget.addEventListener("click",()=>{D()||(n.clearTargetProject(),S())}),e.btnOrganizeMove.addEventListener("click",()=>{D()||m()}),e.organizeBtnCancelExecute.addEventListener("click",()=>c.showConfirm(!1)),e.organizeBtnConfirmExecute.addEventListener("click",()=>{if(!e.organizeCbConfirmEl.checked){c.writeExecOut("Blocked: tick the confirmation checkbox.");return}const I=n.getTargetProject();if(!I){c.writeExecOut("Blocked: select a destination project.");return}const w=n.buildSourceChats().filter(x=>n.selectedChatIds.has(x.id));if(!w.length){c.writeExecOut("Blocked: select at least one chat.");return}c.showConfirm(!1),p(w.map(x=>x.id),I.gizmoId).catch(x=>{c.writeExecOut(`Execute crashed: ${(x==null?void 0:x.message)||x}`),M(e,!1)})});const d=We({context:"organize",compact:!0});e.mountCreateProjectOrganizeEl.replaceChildren(d.el),d.el.addEventListener("cgo:createProject",I=>{const v=I;(async()=>{if(D())return;const{name:w,description:x}=v.detail;d.setBusy(!0),d.setStatus("Creating…");try{const L=await V({type:k.CREATE_PROJECT,name:w,description:x,prompt_starters:[]});if(!L){d.setStatus("Create failed (no response).");return}if(!L.ok){d.setStatus(`Create failed: ${L.error||"unknown error"}`);return}d.setStatus("Created."),d.reset(),Ve()}catch(L){d.setStatus(`Create failed: ${(L==null?void 0:L.message)||L}`)}finally{d.setBusy(!1)}})()})}return{id:"organize",refresh(){S()},mount(){S(),a=i.subscribe(()=>S())},unmount(){},bind:C,dispose(){g(),a==null||a(),a=null}}}function ze(e){return(e||"").toLowerCase().trim()}function le(e){if(!e)return 0;const t=Date.parse(e);return Number.isFinite(t)?t:0}function xc(e){const[t,i,n]=e.split("-").map(c=>Number(c));return!t||!i||!n?0:new Date(t,i-1,n,0,0,0,0).getTime()}function zc(e){const[t,i,n]=e.split("-").map(c=>Number(c));return!t||!i||!n?0:new Date(t,i-1,n,23,59,59,999).getTime()}function Xe(e){const t=[e.title,e.snippet,e.id,e.gizmoId];return ze(t.filter(Boolean).join(` 
`))}function Lc(e,t){const i=[e.title,e.gizmoId,Xe(t)];return ze(i.filter(Boolean).join(` 
`))}function Oe(e,t){const i=e.isArchived===!0;return t==="include"?!0:t==="exclude"?!i:i}function de(e,t,i){if(t==="any")return!0;if(!e)return!1;const n=t==="24h"?24*60*60*1e3:t==="7d"?7*24*60*60*1e3:t==="30d"?30*24*60*60*1e3:365*24*60*60*1e3;return e>=i-n}function ue(e,t,i){if(!t&&!i)return!0;if(!e)return!1;if(t){const n=xc(t);if(n&&e<n)return!1}if(i){const n=zc(i);if(n&&e>n)return!1}return!0}function wc(e){const t=Math.max(20,Math.min(300,5e3));let i=null,n="",c={scope:"all",archived:"include",updatedWithin:"any",updatedAfter:"",updatedBefore:"",createdWithin:"any",createdAfter:"",createdBefore:""};function a(h){i=h}function o(h){n=h}function r(h){c={...c,...h}}function u(){return{...c}}function j(){return i?i.singleChats.length>0||i.projects.length>0:!1}function l(){if(!i)return{query:n,totalMatches:0,items:[]};const h=ze(n),s=Date.now(),p=[];let g=0;const b=E=>{g++,p.length<t&&p.push(E)},S=c.scope==="all"||c.scope==="single",T=c.scope==="all"||c.scope==="project";if(S)for(const E of i.singleChats){if(!Oe(E,c.archived))continue;const m=le(E.updateTime);if(!de(m,c.updatedWithin,s)||!ue(m,c.updatedAfter||void 0,c.updatedBefore||void 0))continue;const C=le(E.createTime);de(C,c.createdWithin,s)&&ue(C,c.createdAfter||void 0,c.createdBefore||void 0)&&(!h||Xe(E).includes(h))&&b({kind:"single",chat:E})}if(T)for(const E of i.projects)for(const m of E.conversations||[]){if(!Oe(m,c.archived))continue;const C=le(m.updateTime);if(!de(C,c.updatedWithin,s)||!ue(C,c.updatedAfter||void 0,c.updatedBefore||void 0))continue;const d=le(m.createTime);if(!de(d,c.createdWithin,s)||!ue(d,c.createdAfter||void 0,c.createdBefore||void 0))continue;const I=Lc(E,m);(!h||I.includes(h))&&b({kind:"project",project:E,chat:m})}return{query:n,totalMatches:g,items:p}}return{setSnapshot:a,setQuery:o,setFilters:r,getFilters:u,get query(){return n},hasData:j,search:l,maxResults:t}}function q(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ke(e){if(!e)return"";const t=String(e).match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:""}function Zc(e){const t=[];e.isArchived===!0&&t.push('<span class="badge badge--arch" title="Archived">A</span>');const i=ke(e.updateTime);i&&t.push(`<span class="badge badge--date" title="Updated">u:${q(i)}</span>`);const n=ke(e.createTime);return n&&t.push(`<span class="badge badge--date" title="Created">c:${q(n)}</span>`),t.length?`<span class="searchBadges">${t.join("")}</span>`:""}function Oc(e){function t(a){e.searchStatusEl.textContent=a}function i(a){const{loaded:o,limits:r}=a;e.searchLoadedSinglesEl.textContent=String(o.singleChats),e.searchLoadedProjectsEl.textContent=String(o.projects),e.searchLoadedProjectChatsEl.textContent=String(o.projectChats);const u=[];typeof r.singleLimit=="number"&&u.push(`single limit ${r.singleLimit}`),typeof r.projectsLimit=="number"&&u.push(`projects limit ${r.projectsLimit}`),typeof r.projectsChatsLimit=="number"&&u.push(`chats/project limit ${r.projectsChatsLimit}`),e.searchInfoLimitsEl.textContent=u.length?`Limits: ${u.join(" · ")}`:""}function n(a){const o=[];for(const r of a){const u=q(r.chat.title||"(untitled)"),j=q(r.chat.href),l=r.chat.snippet?`<div class="searchSnippet">${q(r.chat.snippet)}</div>`:"",h=Zc(r.chat);if(r.kind==="single")o.push(`<li class="item searchItem"><div class="searchLine"><a class="searchTitle" href="${j}" target="_blank" rel="noopener noreferrer">${u}</a>`+h+"</div>"+l+"</li>");else{const s=q(r.project.title||r.project.gizmoId);o.push(`<li class="item searchItem"><div class="searchLine"><a class="searchTitle" href="${j}" target="_blank" rel="noopener noreferrer">${u}</a><span class="searchProject">(${s})</span>`+h+"</div>"+l+"</li>")}}e.searchResultsEl.innerHTML=o.join("")}function c(a){if(i(a),!a.loaded.totalChats){t("No data loaded yet. Use the Info section to list Single/Projects, then search here."),e.searchResultsEl.innerHTML="";return}if(!a.query.trim()){t("Showing all loaded chats (limited). Type to filter."),n(a.results);return}t(`Results: ${a.results.length}`),n(a.results)}return{setStatus:t,render:c,renderResults:n}}function kc(e,t,i){const n=wc(),c=Oc(e);function a(){const h=i.getSnapshot();n.setSnapshot(h);const s=n.search();e.searchResultsCountEl.textContent=String(s.totalMatches),c.render({loaded:h.counts,limits:{singleLimit:h.meta.singleLimit,projectsLimit:h.meta.projectsLimit,projectsChatsLimit:h.meta.projectsChatsLimit},query:s.query,results:s.items})}const o=i.subscribe(()=>{a()});function r(){const h=e.searchScopeEl.value,s=h==="projects"?"project":h;n.setFilters({scope:s,archived:e.searchArchivedEl.value,updatedWithin:e.searchUpdatedWithinEl.value,updatedAfter:e.searchUpdatedAfterEl.value||"",updatedBefore:e.searchUpdatedBeforeEl.value||"",createdWithin:e.searchCreatedWithinEl.value,createdAfter:e.searchCreatedAfterEl.value||"",createdBefore:e.searchCreatedBeforeEl.value||""})}function u(){r(),n.setQuery(e.searchQueryEl.value||""),a()}function j(){e.searchScopeEl.value="all",e.searchArchivedEl.value="include",e.searchUpdatedWithinEl.value="any",e.searchUpdatedAfterEl.value="",e.searchUpdatedBeforeEl.value="",e.searchCreatedWithinEl.value="any",e.searchCreatedAfterEl.value="",e.searchCreatedBeforeEl.value=""}function l(){e.searchQueryEl.addEventListener("input",()=>u()),e.btnSearchClear.addEventListener("click",()=>{e.searchQueryEl.value="",e.searchQueryEl.focus(),u()}),e.searchScopeEl.addEventListener("change",()=>u()),e.searchArchivedEl.addEventListener("change",()=>u()),e.searchUpdatedWithinEl.addEventListener("change",()=>u()),e.searchUpdatedAfterEl.addEventListener("change",()=>u()),e.searchUpdatedBeforeEl.addEventListener("change",()=>u()),e.searchCreatedWithinEl.addEventListener("change",()=>u()),e.searchCreatedAfterEl.addEventListener("change",()=>u()),e.searchCreatedBeforeEl.addEventListener("change",()=>u()),e.btnSearchResetFilters.addEventListener("click",()=>{j(),u()})}return{id:"search",mount(){const h=i.getSnapshot();if(!((h.counts.singleChats||0)>0||(h.counts.projects||0)>0||(h.counts.projectChats||0)>0)){c.setStatus("No data loaded. Use Scope → Refresh."),e.searchResultsCountEl.textContent="0";return}u()},unmount(){},bind:l,dispose(){o()}}}function Bc(){let e=[],t=0;function i(n){e=n.items,t=n.total}return{get items(){return e},get total(){return t},set:i}}function Dc(e){try{return new Date(e).toLocaleString()}catch{return String(e)}}function Be(e,t){const i=[];i.push(`Total entries: ${t.total}`),i.push("");for(const n of t.items){const c=typeof n.ok=="boolean"?n.ok?"ok":"fail":"",a=[];typeof n.status=="number"&&a.push(`status=${n.status}`),c&&a.push(c);const o=[n.scope,n.kind].filter(Boolean).join("/");i.push(`[${Dc(n.ts)}] ${o}${a.length?` (${a.join(", ")})`:""}`),i.push(`  ${n.message}`),n.error&&i.push(`  error: ${n.error}`),i.push("")}e.textContent=i.join(`
`),e.scrollTop=0}function Ac(e){function t(o){e.logsStatusEl.textContent=o}function i(o){e.debugStatusEl.textContent=o}function n(o){e.logsCbDebugEl.checked=o}function c(o){Be(e.logsOutEl,{total:o.total,items:o.items.map(r=>({ts:r.ts,message:r.message,scope:r.scope,kind:r.kind,ok:r.ok,status:r.status,error:r.error,meta:r.meta}))})}function a(o){Be(e.debugOutEl,{total:o.total,items:o.items.map(r=>({ts:r.ts,message:r.message,scope:r.scope,kind:r.kind,ok:r.ok,status:r.status,error:r.error,meta:r.meta}))})}return{setAuditStatus:t,setDebugStatus:i,setDebugChecked:n,renderAudit:c,renderDebug:a}}const he="cgo.debugTrace",ye="cgo.debugTrace.enabled";function De(e,t,i){return Math.max(t,Math.min(i,Math.floor(e)))}async function Ke(){const e=await ee(he),t=e==null?void 0:e[he];return Array.isArray(t)?t:[]}async function _c(){const e=await ee(ye);return!!(e!=null&&e[ye])}async function $c(e){await ae({[ye]:!!e}),e||await Pe(he)}async function Rc(){await Pe(he)}async function Mc(e){const t=De((e==null?void 0:e.limit)??200,1,5e4),i=De((e==null?void 0:e.offset)??0,0,1e6),n=await Ke(),c=n.length,o=n.slice().reverse().slice(i,i+t);return{total:c,items:o}}async function Nc(e){const t=await Ke();return JSON.stringify(t,null,2)}const Ie="cgo_dev_config",ve={traceScope:!1,stopAfterOutOfScopeProjects:3};async function Ye(){const t=(await ee(Ie))[Ie];return{traceScope:(t==null?void 0:t.traceScope)??ve.traceScope,stopAfterOutOfScopeProjects:typeof(t==null?void 0:t.stopAfterOutOfScopeProjects)=="number"&&t.stopAfterOutOfScopeProjects>=0?Math.floor(t.stopAfterOutOfScopeProjects):ve.stopAfterOutOfScopeProjects}}async function Te(e){await ae({[Ie]:e})}async function Ae(e){if(!e.cfgTraceScopeEl||!e.cfgStopAfterOutOfScopeEl)return;const t=await Ye();e.cfgTraceScopeEl.checked=t.traceScope,e.cfgStopAfterOutOfScopeEl.value=String(t.stopAfterOutOfScopeProjects)}function Ee(e,t){e.cfgStatusEl&&(e.cfgStatusEl.textContent=t,window.setTimeout(()=>{e.cfgStatusEl&&e.cfgStatusEl.textContent===t&&(e.cfgStatusEl.textContent="")},1200))}async function _e(e){const t=await Ye();if(!e.cfgTraceScopeEl||!e.cfgStopAfterOutOfScopeEl)return t;const i=Math.max(0,Math.floor(Number(e.cfgStopAfterOutOfScopeEl.value||"0")));return{traceScope:!!e.cfgTraceScopeEl.checked,stopAfterOutOfScopeProjects:Number.isFinite(i)?i:t.stopAfterOutOfScopeProjects}}function Uc(e,t){const i=Bc(),n=Ac(e);async function c(){n.setAuditStatus("Loading…"),M(e,!0);try{const g=Y(e.logsLimitEl.value,10,5e3,200),b=await pc({limit:g,reverse:!0});i.set(b),n.renderAudit({items:i.items,total:i.total}),n.setAuditStatus(`Showing ${i.items.length} (newest first)`)}catch(g){n.setAuditStatus(`Failed: ${(g==null?void 0:g.message)||g}`)}finally{M(e,!1)}}async function a(){n.setDebugStatus("Loading…"),M(e,!0);try{const g=Y(e.debugLimitEl.value,10,5e3,200),b=await Mc({limit:g,reverse:!0});n.renderDebug(b),n.setDebugStatus(`Showing ${b.items.length} (newest first)`)}catch(g){n.setDebugStatus(`Failed: ${(g==null?void 0:g.message)||g}`)}finally{M(e,!1)}}async function o(){const g=await _c();n.setDebugChecked(g)}async function r(g){if(await $c(g),n.setDebugChecked(g),!g){n.setDebugStatus("Debug OFF. Traces wiped."),e.debugOutEl.textContent="";return}n.setDebugStatus("Debug ON."),await a()}async function u(){const g=Y(e.logsTrimKeepEl.value,0,5e4,2e3);n.setAuditStatus("Trimming…"),M(e,!0);try{const b=await mc({keepLast:g});await c(),n.setAuditStatus(`Trimmed. Remaining: ${b.total}`)}catch(b){n.setAuditStatus(`Trim failed: ${(b==null?void 0:b.message)||b}`)}finally{M(e,!1)}}async function j(){n.setAuditStatus("Clearing…"),M(e,!0);try{await hc(),await c(),n.setAuditStatus("Cleared.")}catch(g){n.setAuditStatus(`Clear failed: ${(g==null?void 0:g.message)||g}`)}finally{M(e,!1)}}async function l(){n.setAuditStatus("Exporting…");try{const g=await fc({pretty:!0}),b=new Blob([g],{type:"application/json"}),S=URL.createObjectURL(b),T=document.createElement("a");T.href=S,T.download=`chatgpt-organizer-audit-${Date.now()}.json`,T.click(),setTimeout(()=>URL.revokeObjectURL(S),1e3),n.setAuditStatus("Exported.")}catch(g){n.setAuditStatus(`Export failed: ${(g==null?void 0:g.message)||g}`)}}async function h(){n.setDebugStatus("Clearing…"),M(e,!0);try{await Rc(),await a(),n.setDebugStatus("Cleared.")}catch(g){n.setDebugStatus(`Clear failed: ${(g==null?void 0:g.message)||g}`)}finally{M(e,!1)}}async function s(){n.setDebugStatus("Exporting…");try{const g=await Nc({pretty:!0}),b=new Blob([g],{type:"application/json"}),S=URL.createObjectURL(b),T=document.createElement("a");T.href=S,T.download=`chatgpt-organizer-debug-${Date.now()}.json`,T.click(),setTimeout(()=>URL.revokeObjectURL(S),1e3),n.setDebugStatus("Exported.")}catch(g){n.setDebugStatus(`Export failed: ${(g==null?void 0:g.message)||g}`)}}function p(){e.btnLogsRefresh.addEventListener("click",()=>{D()||c().catch(()=>{})}),e.btnLogsTrim.addEventListener("click",()=>{D()||u().catch(()=>{})}),e.btnLogsClear.addEventListener("click",()=>{D()||j().catch(()=>{})}),e.btnLogsExport.addEventListener("click",()=>{D()||l().catch(()=>{})}),e.logsCbDebugEl.addEventListener("change",()=>{D()||r(e.logsCbDebugEl.checked).catch(()=>{})}),e.btnDebugRefresh.addEventListener("click",()=>{D()||a().catch(()=>{})}),e.btnDebugClear.addEventListener("click",()=>{D()||h().catch(()=>{})}),e.btnDebugExport.addEventListener("click",()=>{D()||s().catch(()=>{})}),e.cfgTraceScopeEl&&e.cfgStopAfterOutOfScopeEl&&e.btnCfgResetDefaults&&(e.cfgTraceScopeEl.addEventListener("change",async()=>{const g=await _e(e);await Te(g),Ee(e,"Saved")}),e.cfgStopAfterOutOfScopeEl.addEventListener("change",async()=>{const g=await _e(e);await Te(g),e.cfgStopAfterOutOfScopeEl.value=String(g.stopAfterOutOfScopeProjects),Ee(e,"Saved")}),e.btnCfgResetDefaults.addEventListener("click",async()=>{await Te(ve),await Ae(e),Ee(e,"Reset")}))}return{id:"logs",bind:p,mount(){o().catch(()=>{}),c().catch(()=>{}),a().catch(()=>{}),Ae(e).catch(()=>{})},unmount(){},dispose(){}}}function fe(e){if(!e)return 0;const t=Date.parse(e);return Number.isFinite(t)?t:0}function qe(e){if(!e)return"";const t=String(e).match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:""}function Hc(e){const t=[];for(const i of e.singleChats)t.push(i);for(const i of e.projects)for(const n of i.conversations||[])t.push(n);return t}function Gc(e){let t=0;for(const i of e)i.isArchived===!0&&t++;return t}function Fc(e){const t=[];return typeof e.singleLimit=="number"&&t.push(`single limit ${e.singleLimit}`),typeof e.projectsLimit=="number"&&t.push(`projects limit ${e.projectsLimit}`),typeof e.projectsChatsLimit=="number"&&t.push(`chats/project limit ${e.projectsChatsLimit}`),t.length?`Limits: ${t.join(" · ")}`:"Limits: —"}function Jc(e){const t=Number(e.singleUpdatedTs||0),i=Number(e.projectsUpdatedTs||0);return Math.max(t,i)}function Wc(e){const t={sameDay:0,d1_2:0,d3_7:0,d8_30:0,d31p:0,unknown:0},i=24*60*60*1e3;for(const n of e){const c=fe(n.createTime),a=fe(n.updateTime);if(!c||!a||a<c){t.unknown++;continue}const o=Math.floor((a-c)/i);o<=0?t.sameDay++:o<=2?t.d1_2++:o<=7?t.d3_7++:o<=30?t.d8_30++:t.d31p++}return t}function Vc(e,t=12){const i=new Map;for(const c of e){const a=qe(c.createTime);a&&i.set(a,(i.get(a)||0)+1)}const n=Array.from(i.entries()).map(([c,a])=>({day:c,count:a}));return n.sort((c,a)=>a.count-c.count||(c.day<a.day?1:-1)),n.slice(0,t)}function Xc(e){const t=e.length;let i=0;const n={empty:0,small:0,medium:0,large:0,huge:0},c=e.map(a=>({title:a.title||a.gizmoId,gizmoId:a.gizmoId,chats:(a.conversations||[]).length})).sort((a,o)=>o.chats-a.chats).slice(0,10);for(const a of e){const o=(a.conversations||[]).length;o===0?(i++,n.empty++):o<=5?n.small++:o<=20?n.medium++:o<=100?n.large++:n.huge++}return{projectCount:t,emptyProjects:i,sizeBuckets:n,topProjects:c}}function Kc(e){const t=new Map;for(const n of e){const c=qe(n.createTime);c&&t.set(c,(t.get(c)||0)+1)}const i=Array.from(t.entries()).map(([n,c])=>({day:n,count:c}));return i.sort((n,c)=>n.day<c.day?-1:n.day>c.day?1:0),i}function Yc(){let e={deletedChats:0,deletedProjects:0};function t(n){e={deletedChats:Math.max(0,Number(n.deletedChats||0)),deletedProjects:Math.max(0,Number(n.deletedProjects||0))}}function i(n){const c=Hc(n),a={singleChats:n.counts.singleChats,projects:n.counts.projects,projectChats:n.counts.projectChats,totalChats:n.counts.totalChats,archivedChats:Gc(c),avgChatsPerProject:n.counts.projects>0?n.counts.projectChats/Math.max(1,n.counts.projects):0,lastCacheUpdateTs:Jc(n.meta),limitsHint:Fc(n.meta)};let o=0,r=0;for(const l of c)fe(l.createTime)&&o++,fe(l.updateTime)&&r++;const u={createdKnown:o,updatedKnown:r,createdPerDayTop:Vc(c,12),createdPerDay:Kc(c),lifetime:Wc(c)},j=Xc(n.projects);return{totals:a,activity:u,projects:j,deletes:e}}return{setDeletes:t,compute:i}}function qc(e){if(!e)return"—";const t=new Date(e),i=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${i}-${n}-${c} ${a}:${o}`}function Qc(e,t=0){return Number.isFinite(e)?t?e.toFixed(t):String(Math.round(e)):"0"}function se(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ce(e,t,i){const n=Math.max(1,...t.map(o=>o.value)),c=(i==null?void 0:i.valueLabel)??(o=>String(o)),a=[];a.push('<div class="statsBars">');for(const o of t){const r=Math.max(0,Math.min(100,o.value/n*100)),u=o.hint?se(o.hint):`${se(o.label)}: ${o.value}`;a.push(`<div class="statsBarItem" title="${u}"><div class="statsBarLabel">${se(o.label)}</div><div class="statsBarTrack"><div class="statsBarFill" style="width:${r.toFixed(1)}%"></div></div><div class="statsBarValue">${se(c(o.value))}</div></div>`)}a.push("</div>"),e.innerHTML=a.join("")}function ei(e,t,i){const n=new Map;for(const P of t){const Z=String(P.day||"").slice(0,10);/^\d{4}-\d{2}-\d{2}$/.test(Z)&&n.set(Z,Number(P.count||0))}if(n.size===0){e.innerHTML='<div class="statsHeatmapWrap"><div class="statsHeatmapHeader"><div class="statsHeatmapTitle">Activity</div><div class="statsHeatmapHint">No created timestamps in the retrieved data.</div></div></div>';return}function c(P){const[Z,_,y]=P.split("-").map(z=>Number(z));return new Date(Z,(_||1)-1,y||1)}function a(P){return`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}-${String(P.getDate()).padStart(2,"0")}`}const o=Array.from(n.keys()).sort(),r=o[0],u=o[o.length-1],j=c(r),l=c(u),h=(j.getDay()+6)%7,s=new Date(j);s.setDate(j.getDate()-h);const p=(l.getDay()+6)%7,g=new Date(l);g.setDate(l.getDate()+(6-p));const b=24*60*60*1e3,S=Math.round((g.getTime()-s.getTime())/b)+1,T=Math.ceil(S/7),E=Math.max(8,Math.min(i==null?void 0:i.maxWeeks,260)),m=Math.min(T,E),C=T>m;let d=1;for(let P=0;P<m;P++)for(let Z=0;Z<7;Z++){const _=new Date(s);_.setDate(s.getDate()+P*7+Z);const y=a(_),z=n.get(y)||0;z>d&&(d=z)}function I(P){if(P<=0)return 0;const Z=P/d;return Z<=.25?1:Z<=.5?2:Z<=.75?3:4}const v=[];let w=0;for(let P=0;P<m;P++)for(let Z=0;Z<7;Z++){const _=new Date(s);_.setDate(s.getDate()+P*7+Z);const y=a(_),z=n.get(y)||0;w+=z;const B=`statsHeatCell statsHeat${I(z)}`,O=`${y} · ${z} created`;v.push(`<div class="${B}" title="${se(O)}"></div>`)}const x=new Date(s);x.setDate(s.getDate()+m*7-1);const L=a(s),f=a(x);e.innerHTML=`<div class="statsHeatmapWrap"><div class="statsHeatmapHeader"><div class="statsHeatmapTitle">From ${L} to ${f} · ${m} week(s)</div><div class="statsHeatmapHint">Total created: ${w} · Max/day: ${d}`+(C?` · Showing first ${m}/${T} weeks (increase maxWeeks or scroll)`:"")+`</div></div><div class="statsHeatmapGrid">${v.join("")}</div></div>`}function ti(e){function t(n){e.statsStatusEl.textContent=n}function i(n){const c=n.totals;e.statsSingleChatsEl.textContent=String(c.singleChats),e.statsProjectsEl.textContent=String(c.projects),e.statsProjectChatsEl.textContent=String(c.projectChats),e.statsTotalChatsEl.textContent=String(c.totalChats),e.statsArchivedChatsEl.textContent=String(c.archivedChats),e.statsAvgChatsPerProjectEl.textContent=Qc(c.avgChatsPerProject,1),e.statsLastCacheUpdateEl.textContent=qc(c.lastCacheUpdateTs),e.statsLimitsHintEl.textContent=c.limitsHint,e.statsDeletedChatsEl.textContent=String(n.deletes.deletedChats),e.statsDeletedProjectsEl.textContent=String(n.deletes.deletedProjects);const a=n.activity;ei(e.statsCreatedHeatmapEl,a.createdPerDay,{maxWeeks:104});const o=a.lifetime;Ce(e.statsLifetimeHistEl,[{label:"0d",value:o.sameDay,hint:"Updated the same day it was created"},{label:"1–2d",value:o.d1_2},{label:"3–7d",value:o.d3_7},{label:"8–30d",value:o.d8_30},{label:"31d+",value:o.d31p},{label:"unknown",value:o.unknown,hint:"Missing createTime/updateTime (or invalid order)"}]);const r=n.projects;Ce(e.statsProjectSizeHistEl,[{label:"0",value:r.sizeBuckets.empty,hint:"Empty projects"},{label:"1–5",value:r.sizeBuckets.small},{label:"6–20",value:r.sizeBuckets.medium},{label:"21–100",value:r.sizeBuckets.large},{label:"101+",value:r.sizeBuckets.huge}]),r.topProjects.length?Ce(e.statsTopProjectsEl,r.topProjects.map(u=>({label:u.title,value:u.chats,hint:`${u.title} · ${u.chats} chats`})),{valueLabel:u=>String(u)}):e.statsTopProjectsEl.innerHTML='<div class="muted">No projects loaded.</div>'}return{setStatus:t,render:i}}function ni(e,t,i){const n=Yc(),c=ti(e);let a=null,o=null;async function r(){const h=await xe();n.setDeletes({deletedChats:h.deletedChats,deletedProjects:h.deletedProjects})}async function u(h){const s=i.getSnapshot(),p=n.compute(s);c.render(p),c.setStatus(h)}function j(){const h=(s,p)=>{p==="local"&&s[me]&&r().then(()=>u("Updated (storage)")).catch(()=>c.setStatus("Stats storage update failed"))};return rc(h),()=>lc(h)}function l(){e.btnStatsRecalc.addEventListener("click",()=>{u("Recalculated").catch(()=>c.setStatus("Recalc failed"))})}return{id:"stats",async mount(){c.setStatus("Loading…"),await r().catch(()=>{}),o||(o=j()),a||(a=i.subscribe(()=>{u("Updated from cache").catch(()=>c.setStatus("Update failed"))})),await u("Ready")},unmount(){},bind:l,dispose(){a&&a(),a=null,o&&o(),o=null}}}const Se="cgo.scopeUpdatedSince";function $e(e){return String(e).padStart(2,"0")}function ci(e){const t=e.getFullYear(),i=$e(e.getMonth()+1),n=$e(e.getDate());return`${t}-${i}-${n}`}function ii(e,t){const i=new Date(e),n=i.getDate();return i.setMonth(i.getMonth()-t),i.getDate()!==n&&i.setDate(0),i}function Re(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function si(e){return new Promise(t=>setTimeout(t,e))}async function Me(e=10*60*1e3){const t=Date.now();for(;D();){if(Date.now()-t>e)return!1;await si(120)}return!0}(async()=>{const e=tc(),t=ic();t.start();const i=ac(),n=Sc(e,t,i),c=Ic(e,t,i),a=kc(e,t,i),o=Pc(e,t,i),r=Uc(e),u=ni(e,t,i);n.bind(),c.bind(),o.bind(),a.bind(),r.bind(),u.bind();const j=sc(e,{single:n,projects:c,organize:o,search:a,logs:r,stats:u});j.bind(),j.boot(),e.btnListSingle.hidden=!0,e.btnListProjects.hidden=!0,e.btnSearchListSingle.hidden=!0,e.btnSearchListProjects.hidden=!0;let l="";function h(){var d,I,v;const m=i.getSnapshot();return(((d=m.counts)==null?void 0:d.singleChats)??0)+(((I=m.counts)==null?void 0:I.projects)??0)+(((v=m.counts)==null?void 0:v.projectChats)??0)===0}function s(m){const C=i;typeof C.setScopeUpdatedSince=="function"&&C.setScopeUpdatedSince(m)}function p(m){h()?(e.scopeLabelEl.textContent="No data loaded — set scope & refresh",e.scopeLabelEl.classList.add("is-warn")):(e.scopeLabelEl.textContent=m?`Updated since ${m}`:"Updated since —",e.scopeLabelEl.classList.remove("is-warn")),e.scopeDialogEl.open||(e.scopeDateEl.value=m||"")}async function g(){const m=await ee([Se]).catch(()=>({})),C=m==null?void 0:m[Se];return typeof C=="string"&&Re(C)?C:ci(ii(new Date,3))}async function b(m){await ae({[Se]:m}).catch(()=>null)}async function S(){D()||(n.refresh(),!await Me())||(c.refresh(),await Me())}function T(){if(!D()){e.scopeDateEl.value=l||"";try{e.scopeDialogEl.showModal()}catch{}}}function E(){try{e.scopeDialogEl.close()}catch{}}l=await g(),s(l),p(l),window.addEventListener("cgo:refreshAll",()=>{S().catch(()=>{})}),e.btnScopeChange.addEventListener("click",()=>{T()}),e.btnScopeRefresh.addEventListener("click",()=>{S().catch(()=>{})}),e.btnScopeCancel.addEventListener("click",()=>{e.scopeDateEl.value=l||"",E()}),e.btnScopeApply.addEventListener("click",()=>{const m=e.scopeDateEl.value||"";Re(m)&&(l=m,s(l),p(l),b(l).catch(()=>{}),E(),S().catch(()=>{}))}),e.scopeDialogEl.addEventListener("keydown",m=>{var C;m.key==="Enter"&&((C=m.target)==null?void 0:C.tagName)==="INPUT"&&(m.preventDefault(),e.btnScopeApply.click())}),i.subscribe(()=>{const m=i.getSnapshot();e.scopeLoadedSinglesEl.textContent=String(m.counts.singleChats),e.scopeLoadedProjectsEl.textContent=String(m.counts.projects),e.scopeLoadedProjectChatsEl.textContent=String(m.counts.projectChats),p(l)})})();
