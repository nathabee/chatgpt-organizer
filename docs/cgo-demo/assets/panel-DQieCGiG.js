function hi(){function e(Me,mi){if(!Me)throw new Error(`[dom] Missing #${mi}`);return Me}const t=e(document.getElementById("cgoRoot"),"cgoRoot"),c=e(document.getElementById("scopeLabel"),"scopeLabel"),n=e(document.getElementById("btnScopeChange"),"btnScopeChange"),i=e(document.getElementById("btnScopeRefresh"),"btnScopeRefresh"),a=e(document.getElementById("scopeDialog"),"scopeDialog"),o=e(document.getElementById("scopeDate"),"scopeDate"),r=e(document.getElementById("btnScopeCancel"),"btnScopeCancel"),l=e(document.getElementById("btnScopeApply"),"btnScopeApply"),x=e(document.getElementById("scopeLoadedSingles"),"scopeLoadedSingles"),C=e(document.getElementById("scopeLoadedProjects"),"scopeLoadedProjects"),m=e(document.getElementById("scopeLoadedProjectChats"),"scopeLoadedProjectChats"),d=e(document.querySelector(".scopeLoading"),"scopeLoading"),g=document.getElementById("tabSingle"),s=document.getElementById("tabProjects"),h=document.getElementById("viewSingle"),I=document.getElementById("viewProjects"),S=document.getElementById("tabOrganize"),v=document.getElementById("tabSearch"),f=document.getElementById("tabLogs"),y=document.getElementById("tabStats"),E=document.getElementById("viewOrganize"),u=document.getElementById("viewSearch"),b=document.getElementById("viewLogs"),j=document.getElementById("viewStats"),w=e(document.getElementById("searchQuery"),"searchQuery"),p=e(document.getElementById("btnSearchClear"),"btnSearchClear"),P=e(document.getElementById("btnSearchResetFilters"),"btnSearchResetFilters"),T=e(document.getElementById("searchScope"),"searchScope"),L=e(document.getElementById("searchArchived"),"searchArchived"),k=e(document.getElementById("searchUpdatedWithin"),"searchUpdatedWithin"),z=e(document.getElementById("searchCreatedWithin"),"searchCreatedWithin"),Z=e(document.getElementById("searchUpdatedAfter"),"searchUpdatedAfter"),$=e(document.getElementById("searchUpdatedBefore"),"searchUpdatedBefore"),A=e(document.getElementById("searchCreatedAfter"),"searchCreatedAfter"),R=e(document.getElementById("searchCreatedBefore"),"searchCreatedBefore"),M=e(document.getElementById("searchInfoBox"),"searchInfoBox"),F=e(document.getElementById("btnSearchListSingle"),"btnSearchListSingle"),H=e(document.getElementById("btnSearchListProjects"),"btnSearchListProjects"),Y=e(document.getElementById("searchLoadedSingles"),"searchLoadedSingles"),V=e(document.getElementById("searchLoadedProjects"),"searchLoadedProjects"),J=e(document.getElementById("searchLoadedProjectChats"),"searchLoadedProjectChats"),X=e(document.getElementById("searchInfoLimits"),"searchInfoLimits"),rt=e(document.getElementById("searchStatus"),"searchStatus"),lt=e(document.getElementById("searchResultsCount"),"searchResultsCount"),dt=e(document.getElementById("searchResults"),"searchResults"),ut=document.getElementById("singleLimit"),gt=document.getElementById("btnListSingle"),pt=document.getElementById("singleStatus"),mt=document.getElementById("cbSingleToggleAll"),ht=document.getElementById("btnSingleDelete"),ft=document.getElementById("singleExecOut"),Tt=document.getElementById("singleExecProgressWrap"),Et=document.getElementById("singleExecProgress"),Ct=document.getElementById("singleExecProgressText"),St=document.getElementById("singleConfirmBox"),bt=document.getElementById("singleConfirmTitle"),vt=document.getElementById("singleConfirmPreview"),jt=document.getElementById("singleCbConfirm"),yt=document.getElementById("singleBtnConfirmExecute"),It=document.getElementById("singleBtnCancelExecute"),Pt=document.getElementById("singleCount"),xt=document.getElementById("singleSelectedCount"),zt=document.getElementById("singleList"),Lt=document.getElementById("projectsLimit"),wt=document.getElementById("projectsChatsLimit"),kt=document.getElementById("btnListProjects"),Zt=document.getElementById("projectsStatus"),Ot=document.getElementById("btnProjectsDelete"),Bt=document.getElementById("projectsExecOut"),Dt=document.getElementById("projectsChatsExecProgressWrap"),At=document.getElementById("projectsChatsExecProgress"),$t=document.getElementById("projectsChatsExecProgressText"),Rt=document.getElementById("projectsProjectsExecProgressWrap"),_t=document.getElementById("projectsProjectsExecProgress"),Mt=document.getElementById("projectsProjectsExecProgressText"),Nt=document.getElementById("projectsConfirmBox"),Ut=document.getElementById("projectsConfirmTitle"),Ht=document.getElementById("projectsConfirmPreview"),Ft=document.getElementById("projectsCbConfirm"),Gt=document.getElementById("projectsBtnConfirmExecute"),Jt=document.getElementById("projectsBtnCancelExecute"),Wt=document.getElementById("projectsCount"),Vt=document.getElementById("projectsChatsCount"),Xt=document.getElementById("projectsSelectedChatsCount"),Kt=document.getElementById("projectsSelectedProjectsCount"),Yt=document.getElementById("projectsList"),Qt=e(document.getElementById("mountCreateProjectProjects"),"mountCreateProjectProjects"),qt=e(document.getElementById("mountCreateProjectOrganize"),"mountCreateProjectOrganize"),en=document.getElementById("logsLimit"),tn=document.getElementById("btnLogsRefresh"),nn=document.getElementById("logsStatus"),cn=document.getElementById("logsTrimKeep"),sn=document.getElementById("btnLogsTrim"),on=document.getElementById("btnLogsExport"),an=document.getElementById("btnLogsClear"),rn=document.getElementById("logsOut"),ln=document.getElementById("cfgTraceScope"),dn=document.getElementById("cfgStopAfterOutOfScope"),un=document.getElementById("btnCfgResetDefaults"),gn=document.getElementById("cfgStatus"),pn=document.getElementById("cfgActionLogMax"),mn=document.getElementById("cfgDebugTraceMax"),hn=document.getElementById("cfgFailureLogsPerRun"),fn=document.getElementById("logsCbDebug"),Tn=document.getElementById("debugLimit"),En=document.getElementById("btnDebugRefresh"),Cn=document.getElementById("btnDebugExport"),Sn=document.getElementById("btnDebugClear"),bn=document.getElementById("debugStatus"),vn=document.getElementById("debugOut"),jn=e(document.getElementById("btnStatsRecalc"),"btnStatsRecalc"),yn=e(document.getElementById("statsStatus"),"statsStatus"),In=e(document.getElementById("statsLastCacheUpdate"),"statsLastCacheUpdate"),Pn=e(document.getElementById("statsSnapshotBox"),"statsSnapshotBox"),xn=e(document.getElementById("statsSingleChats"),"statsSingleChats"),zn=e(document.getElementById("statsProjects"),"statsProjects"),Ln=e(document.getElementById("statsProjectChats"),"statsProjectChats"),wn=e(document.getElementById("statsTotalChats"),"statsTotalChats"),kn=e(document.getElementById("statsArchivedChats"),"statsArchivedChats"),Zn=e(document.getElementById("statsAvgChatsPerProject"),"statsAvgChatsPerProject"),On=e(document.getElementById("statsLimitsHint"),"statsLimitsHint"),Bn=e(document.getElementById("statsActivityBox"),"statsActivityBox"),Dn=e(document.getElementById("statsActivityExplain"),"statsActivityExplain"),An=e(document.getElementById("statsCreatedHeatmap"),"statsCreatedHeatmap"),$n=e(document.getElementById("statsLifetimeHist"),"statsLifetimeHist"),Rn=e(document.getElementById("statsProjectsBox"),"statsProjectsBox"),_n=e(document.getElementById("statsProjectSizeHist"),"statsProjectSizeHist"),Mn=e(document.getElementById("statsTopProjects"),"statsTopProjects"),Nn=e(document.getElementById("statsDeletesBox"),"statsDeletesBox"),Un=e(document.getElementById("statsDeletedChats"),"statsDeletedChats"),Hn=e(document.getElementById("statsDeletedProjects"),"statsDeletedProjects"),Fn=e(document.getElementById("organizeSource"),"organizeSource"),Gn=e(document.getElementById("organizeFilter"),"organizeFilter"),Jn=e(document.getElementById("cbOrganizeToggleAll"),"cbOrganizeToggleAll"),Wn=e(document.getElementById("organizeSourceStatus"),"organizeSourceStatus"),Vn=e(document.getElementById("organizeSourceCount"),"organizeSourceCount"),Xn=e(document.getElementById("organizeSelectedCount"),"organizeSelectedCount"),Kn=e(document.getElementById("organizeSourceList"),"organizeSourceList"),Yn=e(document.getElementById("organizeProjectFilter"),"organizeProjectFilter"),Qn=e(document.getElementById("btnOrganizeClearTarget"),"btnOrganizeClearTarget"),qn=e(document.getElementById("organizeProjectsStatus"),"organizeProjectsStatus"),ei=e(document.getElementById("organizeProjectsCount"),"organizeProjectsCount"),ti=e(document.getElementById("organizeTargetLabel"),"organizeTargetLabel"),ni=e(document.getElementById("organizeProjectList"),"organizeProjectList"),ii=e(document.getElementById("btnOrganizeMove"),"btnOrganizeMove"),ci=e(document.getElementById("organizeExecOut"),"organizeExecOut"),si=e(document.getElementById("organizeExecProgressWrap"),"organizeExecProgressWrap"),oi=e(document.getElementById("organizeExecProgress"),"organizeExecProgress"),ai=e(document.getElementById("organizeExecProgressText"),"organizeExecProgressText"),ri=e(document.getElementById("organizeConfirmBox"),"organizeConfirmBox"),li=e(document.getElementById("organizeConfirmTitle"),"organizeConfirmTitle"),di=e(document.getElementById("organizeConfirmPreview"),"organizeConfirmPreview"),ui=e(document.getElementById("organizeCbConfirm"),"organizeCbConfirm"),gi=e(document.getElementById("organizeBtnConfirmExecute"),"organizeBtnConfirmExecute"),pi=e(document.getElementById("organizeBtnCancelExecute"),"organizeBtnCancelExecute");return{rootEl:t,tabSingle:g,tabProjects:s,viewSingle:h,viewProjects:I,tabOrganize:S,tabSearch:v,tabLogs:f,tabStats:y,viewOrganize:E,viewSearch:u,viewLogs:b,viewStats:j,scopeLabelEl:c,btnScopeChange:n,btnScopeRefresh:i,scopeDialogEl:a,scopeDateEl:o,btnScopeCancel:r,btnScopeApply:l,scopeLoadedSinglesEl:x,scopeLoadedProjectsEl:C,scopeLoadedProjectChatsEl:m,scopeLoadingEl:d,searchInfoBoxEl:M,btnSearchListSingle:F,btnSearchListProjects:H,searchLoadedSinglesEl:Y,searchLoadedProjectsEl:V,searchLoadedProjectChatsEl:J,searchInfoLimitsEl:X,btnSearchResetFilters:P,searchStatusEl:rt,searchQueryEl:w,btnSearchClear:p,searchScopeEl:T,searchArchivedEl:L,searchUpdatedWithinEl:k,searchUpdatedAfterEl:Z,searchUpdatedBeforeEl:$,searchCreatedWithinEl:z,searchCreatedAfterEl:A,searchCreatedBeforeEl:R,searchResultsCountEl:lt,searchResultsEl:dt,singleLimitEl:ut,btnListSingle:gt,singleStatusEl:pt,cbSingleToggleAll:mt,btnSingleDelete:ht,singleExecOutEl:ft,singleExecProgressWrapEl:Tt,singleExecProgressEl:Et,singleExecProgressTextEl:Ct,singleConfirmBoxEl:St,singleConfirmTitleEl:bt,singleConfirmPreviewEl:vt,singleCbConfirmEl:jt,singleBtnConfirmExecute:yt,singleBtnCancelExecute:It,singleCountEl:Pt,singleSelectedCountEl:xt,singleListEl:zt,projectsLimitEl:Lt,projectsChatsLimitEl:wt,btnListProjects:kt,projectsStatusEl:Zt,btnProjectsDelete:Ot,projectsExecOutEl:Bt,projectsChatsExecProgressWrapEl:Dt,projectsChatsExecProgressEl:At,projectsChatsExecProgressTextEl:$t,projectsProjectsExecProgressWrapEl:Rt,projectsProjectsExecProgressEl:_t,projectsProjectsExecProgressTextEl:Mt,projectsConfirmBoxEl:Nt,projectsConfirmTitleEl:Ut,projectsConfirmPreviewEl:Ht,projectsCbConfirmEl:Ft,projectsBtnConfirmExecute:Gt,projectsBtnCancelExecute:Jt,projectsCountEl:Wt,projectsChatsCountEl:Vt,projectsSelectedChatsCountEl:Xt,projectsSelectedProjectsCountEl:Kt,projectsListEl:Yt,mountCreateProjectProjectsEl:Qt,mountCreateProjectOrganizeEl:qt,cfgTraceScopeEl:ln,cfgStopAfterOutOfScopeEl:dn,btnCfgResetDefaults:un,cfgStatusEl:gn,cfgActionLogMaxEl:pn,cfgDebugTraceMaxEl:mn,cfgFailureLogsPerRunEl:hn,logsLimitEl:en,btnLogsRefresh:tn,logsStatusEl:nn,logsTrimKeepEl:cn,btnLogsTrim:sn,btnLogsExport:on,btnLogsClear:an,logsOutEl:rn,logsCbDebugEl:fn,debugLimitEl:Tn,btnDebugRefresh:En,btnDebugExport:Cn,btnDebugClear:Sn,debugStatusEl:bn,debugOutEl:vn,btnStatsRecalc:jn,statsStatusEl:yn,statsLastCacheUpdateEl:In,statsSnapshotBoxEl:Pn,statsSingleChatsEl:xn,statsProjectsEl:zn,statsProjectChatsEl:Ln,statsTotalChatsEl:wn,statsArchivedChatsEl:kn,statsAvgChatsPerProjectEl:Zn,statsLimitsHintEl:On,statsActivityBoxEl:Bn,statsActivityExplainEl:Dn,statsCreatedHeatmapEl:An,statsLifetimeHistEl:$n,statsProjectsBoxEl:Rn,statsProjectSizeHistEl:_n,statsTopProjectsEl:Mn,statsDeletesBoxEl:Nn,statsDeletedChatsEl:Un,statsDeletedProjectsEl:Hn,organizeSourceEl:Fn,organizeFilterEl:Gn,cbOrganizeToggleAll:Jn,organizeSourceStatusEl:Wn,organizeSourceCountEl:Vn,organizeSelectedCountEl:Xn,organizeSourceListEl:Kn,organizeProjectFilterEl:Yn,btnOrganizeClearTarget:Qn,organizeProjectsStatusEl:qn,organizeProjectsCountEl:ei,organizeTargetLabelEl:ti,organizeProjectListEl:ni,btnOrganizeMove:ii,organizeExecOutEl:ci,organizeExecProgressWrapEl:si,organizeExecProgressEl:oi,organizeExecProgressTextEl:ai,organizeConfirmBoxEl:ri,organizeConfirmTitleEl:li,organizeConfirmPreviewEl:di,organizeCbConfirmEl:ui,organizeBtnConfirmExecute:gi,organizeBtnCancelExecute:pi}}const B={PING:"CGO_PING",PANEL_REFRESH_ALL:"CGO_PANEL_REFRESH_ALL",LIST_ALL_CHATS:"CGO_LIST_ALL_CHATS",LIST_ALL_CHATS_PROGRESS:"CGO_LIST_ALL_CHATS_PROGRESS",LIST_ALL_CHATS_DONE:"CGO_LIST_ALL_CHATS_DONE",LIST_GIZMO_PROJECTS:"CGO_LIST_GIZMO_PROJECTS",LIST_GIZMO_PROJECTS_PROGRESS:"CGO_LIST_GIZMO_PROJECTS_PROGRESS",LIST_GIZMO_PROJECTS_DONE:"CGO_LIST_GIZMO_PROJECTS_DONE",EXECUTE_DELETE:"CGO_EXECUTE_DELETE",EXECUTE_DELETE_PROGRESS:"CGO_EXECUTE_DELETE_PROGRESS",EXECUTE_DELETE_DONE:"CGO_EXECUTE_DELETE_DONE",DELETE_PROJECTS:"CGO_DELETE_PROJECTS",DELETE_PROJECTS_PROGRESS:"CGO_DELETE_PROJECTS_PROGRESS",DELETE_PROJECTS_DONE:"CGO_DELETE_PROJECTS_DONE",MOVE_CHATS_TO_PROJECT:"CGO_MOVE_CHATS_TO_PROJECT",MOVE_CHATS_TO_PROJECT_PROGRESS:"CGO_MOVE_CHATS_TO_PROJECT_PROGRESS",MOVE_CHATS_TO_PROJECT_DONE:"CGO_MOVE_CHATS_TO_PROJECT_DONE",CREATE_PROJECT:"CGO_CREATE_PROJECT",CREATE_PROJECT_PROGRESS:"CGO_CREATE_PROJECT_PROGRESS",CREATE_PROJECT_DONE:"CGO_CREATE_PROJECT_DONE"},ye={projects:[{gizmoId:"g-wp",title:"WordPress Plugin Lab",href:"#",conversations:[{id:"c-wp-01",title:"Gutenberg block structure: block.json and edit/save",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-01",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-04T13:00:00Z",pinnedTime:null},{id:"c-wp-02",title:"Theme.json tokens: using WP preset colors properly",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-02",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-05T14:00:00Z",pinnedTime:null},{id:"c-wp-03",title:"Shortcodes vs blocks: when to use what",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-03",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-06T15:00:00Z",pinnedTime:null},{id:"c-wp-04",title:"WP REST API auth: nonce + cookies vs app passwords",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-04",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-07T16:00:00Z",pinnedTime:null},{id:"c-wp-05",title:"Plugin build pipeline: webpack vs Vite for blocks",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-05",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-08T17:00:00Z",pinnedTime:null},{id:"c-wp-06",title:"Internationalization: __(), _x(), and build steps",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-06",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-09T18:00:00Z",pinnedTime:null},{id:"c-wp-07",title:"Security checklist: sanitize, escape, capability checks",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-07",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-10T19:00:00Z",pinnedTime:null},{id:"c-wp-08",title:"FSE templates: managing patterns and template parts",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-08",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-11T20:00:00Z",pinnedTime:null},{id:"c-wp-09",title:"WP-CLI automation: exports, imports, and resets",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-09",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-12T21:00:00Z",pinnedTime:null},{id:"c-wp-10",title:"Performance: object cache, transients, and query reduction",gizmoId:"g-wp",href:"https://chatgpt.com/c/c-wp-10",createTime:"2025-11-03T12:00:00Z",updateTime:"2025-11-13T22:00:00Z",pinnedTime:null}]},{gizmoId:"g-gh",title:"GitHub Workflow & Releases",href:"#",conversations:[{id:"c-gh-01",title:"Release assets: tagging strategy and upload via gh cli",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-01",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-02T13:00:00Z",pinnedTime:null},{id:"c-gh-02",title:"Changelog discipline: keep a version.md readable",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-02",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-03T14:00:00Z",pinnedTime:null},{id:"c-gh-03",title:"Repo hygiene: .gitignore, large files, and build artifacts",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-03",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-04T15:00:00Z",pinnedTime:null},{id:"c-gh-04",title:"Git add: '.' vs '-A' and deletion behavior",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-04",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-05T16:00:00Z",pinnedTime:null},{id:"c-gh-05",title:"PR workflow: branch naming and small reviewable commits",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-05",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-06T17:00:00Z",pinnedTime:null},{id:"c-gh-06",title:"CI basics: lint, typecheck, build, and release gates",gizmoId:"g-gh",href:"https://chatgpt.com/c/c-gh-06",createTime:"2025-12-01T12:00:00Z",updateTime:"2025-12-07T18:00:00Z",pinnedTime:null}]},{gizmoId:"g-chrome-ext",title:"Chrome Extension Engineering",href:"#",conversations:[{id:"c-chx-01",title:"Manifest V3 overview: service worker + permissions",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-01",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-15T13:00:00Z",pinnedTime:null},{id:"c-chx-02",title:"Messaging patterns: panel ↔ background ↔ content",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-02",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-16T14:00:00Z",pinnedTime:null},{id:"c-chx-03",title:"Storage: chrome.storage.local vs session",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-03",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-17T15:00:00Z",pinnedTime:null},{id:"c-chx-04",title:"Rate limiting: throttling delete operations safely",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-04",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-18T16:00:00Z",pinnedTime:null},{id:"c-chx-05",title:"UI: side panel architecture and tab routing",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-05",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-19T17:00:00Z",pinnedTime:null},{id:"c-chx-06",title:"Testing: creating a demo mode with mocked seams",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-06",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-20T18:00:00Z",pinnedTime:null},{id:"c-chx-07",title:"Error handling: retry policies and progress events",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-07",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-21T19:00:00Z",pinnedTime:null},{id:"c-chx-08",title:"Packaging: dist layout and release zip scripts",gizmoId:"g-chrome-ext",href:"https://chatgpt.com/c/c-chx-08",createTime:"2025-07-14T12:00:00Z",updateTime:"2025-07-22T20:00:00Z",pinnedTime:null}]},{gizmoId:"g-firefox-ext",title:"Firefox Extension Port (WebExtensions)",href:"#",conversations:[{id:"c-ffx-01",title:"Chrome vs Firefox APIs: browser.* polyfills and gaps",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-01",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-22T13:00:00Z",pinnedTime:null},{id:"c-ffx-02",title:"MV3 support status: what to avoid for portability",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-02",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-23T14:00:00Z",pinnedTime:null},{id:"c-ffx-03",title:"Side panel alternatives: UI constraints in Firefox",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-03",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-24T15:00:00Z",pinnedTime:null},{id:"c-ffx-04",title:"Packaging & signing: AMO upload checklist",gizmoId:"g-firefox-ext",href:"https://chatgpt.com/c/c-ffx-04",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-25T16:00:00Z",pinnedTime:null}]},{gizmoId:"g-vite",title:"Vite Build System",href:"#",conversations:[{id:"c-vite-01",title:"Vite plugins: resolveId hooks and swapping seams",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-01",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-02T13:00:00Z",pinnedTime:null},{id:"c-vite-02",title:"Static asset emission: generateBundle and fileName paths",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-02",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-03T14:00:00Z",pinnedTime:null},{id:"c-vite-03",title:"Dev vs build parity: ensuring preview matches prod",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-03",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-04T15:00:00Z",pinnedTime:null},{id:"c-vite-04",title:"Aliasing strategies: regex alias vs plugin-based swapping",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-04",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-05T16:00:00Z",pinnedTime:null},{id:"c-vite-05",title:"TypeScript imports: allowImportingTsExtensions pitfalls",gizmoId:"g-vite",href:"https://chatgpt.com/c/c-vite-05",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-06T17:00:00Z",pinnedTime:null}]},{gizmoId:"g-node",title:"Node.js Backend Patterns",href:"#",conversations:[{id:"c-node-01",title:"HTTP server basics: Express vs Fastify tradeoffs",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-01",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-23T13:00:00Z",pinnedTime:null},{id:"c-node-02",title:"Logging: structured logs and request correlation IDs",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-02",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-24T14:00:00Z",pinnedTime:null},{id:"c-node-03",title:"Auth: session cookies vs JWT in practice",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-03",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-25T15:00:00Z",pinnedTime:null},{id:"c-node-04",title:"Error boundaries: central error middleware strategy",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-04",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-26T16:00:00Z",pinnedTime:null},{id:"c-node-05",title:"Rate limiting: burst control and backoff policies",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-05",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-27T17:00:00Z",pinnedTime:null},{id:"c-node-06",title:"Deployment: process managers and health endpoints",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-06",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-28T18:00:00Z",pinnedTime:null},{id:"c-node-07",title:"Security headers: CSP, HSTS, and X-Frame-Options",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-07",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-29T19:00:00Z",pinnedTime:null},{id:"c-node-08",title:"Postgres patterns: migrations, pool sizing, retries",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-08",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-30T20:00:00Z",pinnedTime:null},{id:"c-node-09",title:"Queues: background jobs and idempotency keys",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-09",createTime:"2025-12-22T12:00:00Z",updateTime:"2025-12-31T21:00:00Z",pinnedTime:null},{id:"c-node-10",title:"Monorepo setup: shared types and build pipelines",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-10",createTime:"2025-12-22T12:00:00Z",updateTime:"2026-01-01T22:00:00Z",pinnedTime:null},{id:"c-node-11",title:"Observability: metrics, tracing, dashboards",gizmoId:"g-node",href:"https://chatgpt.com/c/c-node-11",createTime:"2025-12-22T12:00:00Z",updateTime:"2026-01-02T23:00:00Z",pinnedTime:null}]},{gizmoId:"g-ts",title:"TypeScript Deep Dive",href:"#",conversations:[{id:"c-ts-01",title:"Discriminated unions for message buses",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-01",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-14T13:00:00Z",pinnedTime:null},{id:"c-ts-02",title:"Narrowing: type guards and exhaustive checks",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-02",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-15T14:00:00Z",pinnedTime:null},{id:"c-ts-03",title:"Strict mode: fixing implicit any and unknown",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-03",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-16T15:00:00Z",pinnedTime:null},{id:"c-ts-04",title:"API typing: request/response alignment and reuse",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-04",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-17T16:00:00Z",pinnedTime:null},{id:"c-ts-05",title:"Build targets: ESM, CJS, and browser bundles",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-05",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-18T17:00:00Z",pinnedTime:null},{id:"c-ts-06",title:"Module resolution: paths, aliases, and tooling",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-06",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-19T18:00:00Z",pinnedTime:null},{id:"c-ts-07",title:"Runtime validation: zod vs manual checks",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-07",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-20T19:00:00Z",pinnedTime:null},{id:"c-ts-08",title:"Error types: designing safe error objects",gizmoId:"g-ts",href:"https://chatgpt.com/c/c-ts-08",createTime:"2025-10-13T12:00:00Z",updateTime:"2025-10-21T20:00:00Z",pinnedTime:null}]},{gizmoId:"g-ai",title:"AI Engineering Notes",href:"#",conversations:[{id:"c-ai-01",title:"Prompt design: constraints, examples, and failure modes",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-01",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-17T13:00:00Z",pinnedTime:null},{id:"c-ai-02",title:"RAG pipeline: chunking and retrieval tuning",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-02",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-18T14:00:00Z",pinnedTime:null},{id:"c-ai-03",title:"Evaluation: golden sets and regression tests",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-03",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-19T15:00:00Z",pinnedTime:null},{id:"c-ai-04",title:"Safety: what to log vs what not to log",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-04",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-20T16:00:00Z",pinnedTime:null},{id:"c-ai-05",title:"Latency: caching, streaming, and batching strategies",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-05",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-21T17:00:00Z",pinnedTime:null},{id:"c-ai-06",title:"Cost control: token budgets and request shaping",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-06",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-22T18:00:00Z",pinnedTime:null},{id:"c-ai-07",title:"Agent orchestration: tools, retries, and guardrails",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-07",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-23T19:00:00Z",pinnedTime:null},{id:"c-ai-08",title:"Model selection: quality vs speed tradeoffs",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-08",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-24T20:00:00Z",pinnedTime:null},{id:"c-ai-09",title:"Data privacy: redaction strategies and minimization",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-09",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-25T21:00:00Z",pinnedTime:null},{id:"c-ai-10",title:"Vector DB options: what matters in production",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-10",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-26T22:00:00Z",pinnedTime:null},{id:"c-ai-11",title:"Embedding drift: how to re-index safely",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-11",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-27T23:00:00Z",pinnedTime:null},{id:"c-ai-12",title:"Fine-tuning vs prompting: decision checklist",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-12",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-29T00:00:00Z",pinnedTime:null},{id:"c-ai-13",title:"Multi-language: tokenization surprises and UX",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-13",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-30T01:00:00Z",pinnedTime:null},{id:"c-ai-14",title:"Human-in-the-loop: review workflows that scale",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-14",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-07-01T02:00:00Z",pinnedTime:null},{id:"c-ai-15",title:"Incident playbook: model outages and fallback plans",gizmoId:"g-ai",href:"https://chatgpt.com/c/c-ai-15",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-07-02T03:00:00Z",pinnedTime:null}]},{gizmoId:"g-algo",title:"Algorithms & Data Structures",href:"#",conversations:[{id:"c-algo-01",title:"Big-O in real life: when it actually matters",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-01",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-09T13:00:00Z",pinnedTime:null},{id:"c-algo-02",title:"Graphs: BFS/DFS patterns and common mistakes",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-02",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-10T14:00:00Z",pinnedTime:null},{id:"c-algo-03",title:"Sorting: stable vs unstable and why you care",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-03",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-11T15:00:00Z",pinnedTime:null},{id:"c-algo-04",title:"Hashing: collisions, load factors, and performance",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-04",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-12T16:00:00Z",pinnedTime:null},{id:"c-algo-05",title:"Dynamic programming: memoization strategy guide",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-05",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-13T17:00:00Z",pinnedTime:null},{id:"c-algo-06",title:"Heaps: priority queues for scheduling tasks",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-06",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-14T18:00:00Z",pinnedTime:null},{id:"c-algo-07",title:"Bit tricks: fast masks and feature flags",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-07",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-15T19:00:00Z",pinnedTime:null},{id:"c-algo-08",title:"Strings: prefix functions, tries, and search",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-08",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-16T20:00:00Z",pinnedTime:null},{id:"c-algo-09",title:"Caching: LRU designs and edge cases",gizmoId:"g-algo",href:"https://chatgpt.com/c/c-algo-09",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-17T21:00:00Z",pinnedTime:null}]},{gizmoId:"g-sec",title:"Security & Hardening",href:"#",conversations:[{id:"c-sec-01",title:"CSP practical guide: reducing XSS risk",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-01",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-24T13:00:00Z",pinnedTime:null},{id:"c-sec-02",title:"CSRF: why it still bites modern apps",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-02",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-25T14:00:00Z",pinnedTime:null},{id:"c-sec-03",title:"Secrets management: env files vs vault",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-03",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-26T15:00:00Z",pinnedTime:null},{id:"c-sec-04",title:"Supply chain: npm audit realities and mitigation",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-04",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-27T16:00:00Z",pinnedTime:null},{id:"c-sec-05",title:"AuthZ: roles, scopes, and permission boundaries",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-05",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-28T17:00:00Z",pinnedTime:null},{id:"c-sec-06",title:"OWASP Top 10: the parts that actually show up",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-06",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-29T18:00:00Z",pinnedTime:null},{id:"c-sec-07",title:"Rate limiting & abuse: bots and scraping controls",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-07",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-06-30T19:00:00Z",pinnedTime:null},{id:"c-sec-08",title:"Server headers: hardening for modern browsers",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-08",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-01T20:00:00Z",pinnedTime:null},{id:"c-sec-09",title:"Cookie flags: SameSite, Secure, HttpOnly usage",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-09",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-02T21:00:00Z",pinnedTime:null},{id:"c-sec-10",title:"Dependency pinning: lockfiles and reproducibility",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-10",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-03T22:00:00Z",pinnedTime:null},{id:"c-sec-11",title:"TLS basics: certificates, renewals, and traps",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-11",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-04T23:00:00Z",pinnedTime:null},{id:"c-sec-12",title:"App isolation: containers and least privilege",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-12",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-06T00:00:00Z",pinnedTime:null},{id:"c-sec-13",title:"Logging sensitive data: redaction rules",gizmoId:"g-sec",href:"https://chatgpt.com/c/c-sec-13",createTime:"2025-06-23T12:00:00Z",updateTime:"2025-07-07T01:00:00Z",pinnedTime:null}]},{gizmoId:"g-license",title:"Licenses & Compliance",href:"#",conversations:[{id:"c-lic-01",title:"MIT vs Apache-2.0: practical differences",gizmoId:"g-license",href:"https://chatgpt.com/c/c-lic-01",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-17T13:00:00Z",pinnedTime:null},{id:"c-lic-02",title:"GPL concerns: linking, distribution, and obligations",gizmoId:"g-license",href:"https://chatgpt.com/c/c-lic-02",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-18T14:00:00Z",pinnedTime:null},{id:"c-lic-03",title:"Third-party notices: what to ship with releases",gizmoId:"g-license",href:"https://chatgpt.com/c/c-lic-03",createTime:"2025-06-16T12:00:00Z",updateTime:"2025-06-19T15:00:00Z",pinnedTime:null}]},{gizmoId:"g-cpp",title:"C++ Foundations",href:"#",conversations:[{id:"c-cpp-01",title:"Modern C++: RAII, smart pointers, and ownership",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-01",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-09T13:00:00Z",pinnedTime:null},{id:"c-cpp-02",title:"Build systems: CMake patterns that don’t hurt",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-02",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-10T14:00:00Z",pinnedTime:null},{id:"c-cpp-03",title:"Undefined behavior: why it is worse than bugs",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-03",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-11T15:00:00Z",pinnedTime:null},{id:"c-cpp-04",title:"Move semantics: when it actually helps",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-04",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-12T16:00:00Z",pinnedTime:null},{id:"c-cpp-05",title:"Templates: compile-time errors and diagnostics",gizmoId:"g-cpp",href:"https://chatgpt.com/c/c-cpp-05",createTime:"2025-09-08T12:00:00Z",updateTime:"2025-09-13T17:00:00Z",pinnedTime:null}]},{gizmoId:"g-python",title:"Python Tooling",href:"#",conversations:[{id:"c-py-01",title:"Virtualenv vs Poetry vs uv: picking one",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-01",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-19T13:00:00Z",pinnedTime:null},{id:"c-py-02",title:"Type hints: mypy/pyright strategy",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-02",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-20T14:00:00Z",pinnedTime:null},{id:"c-py-03",title:"FastAPI patterns: dependencies and testing",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-03",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-21T15:00:00Z",pinnedTime:null},{id:"c-py-04",title:"Packaging: wheels, sdists, and versioning",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-04",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-22T16:00:00Z",pinnedTime:null},{id:"c-py-05",title:"Scripting: CLI ergonomics and config layout",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-05",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-23T17:00:00Z",pinnedTime:null},{id:"c-py-06",title:"Data processing: pandas performance basics",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-06",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-24T18:00:00Z",pinnedTime:null},{id:"c-py-07",title:"Async: when to use asyncio and when not",gizmoId:"g-python",href:"https://chatgpt.com/c/c-py-07",createTime:"2025-08-18T12:00:00Z",updateTime:"2025-08-25T19:00:00Z",pinnedTime:null}]},{gizmoId:"g-docker",title:"Docker & Compose",href:"#",conversations:[{id:"c-dk-01",title:"Compose profiles: clean dev vs prod separation",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-01",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-11T13:00:00Z",pinnedTime:null},{id:"c-dk-02",title:"Healthchecks: making dependencies reliable",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-02",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-12T14:00:00Z",pinnedTime:null},{id:"c-dk-03",title:"Volumes: avoiding permission hell with UID/GID",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-03",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-13T15:00:00Z",pinnedTime:null},{id:"c-dk-04",title:"Build stages: small images and fast rebuilds",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-04",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-14T16:00:00Z",pinnedTime:null},{id:"c-dk-05",title:"Reverse proxy patterns: Apache vs Nginx",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-05",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-15T17:00:00Z",pinnedTime:null},{id:"c-dk-06",title:"Static hosting container: serving dist/ safely",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-06",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-16T18:00:00Z",pinnedTime:null},{id:"c-dk-07",title:"Secrets: env files vs Docker secrets",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-07",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-17T19:00:00Z",pinnedTime:null},{id:"c-dk-08",title:"Network: internal URLs and cross-service calls",gizmoId:"g-docker",href:"https://chatgpt.com/c/c-dk-08",createTime:"2025-11-10T12:00:00Z",updateTime:"2025-11-18T20:00:00Z",pinnedTime:null}]},{gizmoId:"g-next",title:"Next.js Notes",href:"#",conversations:[{id:"c-next-01",title:"App Router: layouts, pages, and route handlers",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-01",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-02T13:00:00Z",pinnedTime:null},{id:"c-next-02",title:"Deployment: build output and runtime configs",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-02",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-03T14:00:00Z",pinnedTime:null},{id:"c-next-03",title:"Static assets: serving under a subpath cleanly",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-03",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-04T15:00:00Z",pinnedTime:null},{id:"c-next-04",title:"Auth flow: proxy headers and cookie security",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-04",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-05T16:00:00Z",pinnedTime:null},{id:"c-next-05",title:"Performance: bundle analysis and caching",gizmoId:"g-next",href:"https://chatgpt.com/c/c-next-05",createTime:"2025-09-01T12:00:00Z",updateTime:"2025-09-06T17:00:00Z",pinnedTime:null}]},{gizmoId:"g-rest",title:"REST API Design",href:"#",conversations:[{id:"c-rest-01",title:"Pagination: cursor vs offset",gizmoId:"g-rest",href:"https://chatgpt.com/c/c-rest-01",createTime:"2025-11-17T12:00:00Z",updateTime:"2025-11-18T13:00:00Z",pinnedTime:null},{id:"c-rest-02",title:"Error formats: consistent error contracts",gizmoId:"g-rest",href:"https://chatgpt.com/c/c-rest-02",createTime:"2025-11-17T12:00:00Z",updateTime:"2025-11-19T14:00:00Z",pinnedTime:null}]},{gizmoId:"g-uiux",title:"UI/UX for Developer Tools",href:"#",conversations:[{id:"c-ui-01",title:"Progress UI: what users need to trust it",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-01",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-12T13:00:00Z",pinnedTime:null},{id:"c-ui-02",title:"Confirmation dialogs: reducing destructive mistakes",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-02",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-13T14:00:00Z",pinnedTime:null},{id:"c-ui-03",title:"Information density: logs that stay readable",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-03",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-14T15:00:00Z",pinnedTime:null},{id:"c-ui-04",title:"Keyboard navigation: focus order and ARIA basics",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-04",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-15T16:00:00Z",pinnedTime:null},{id:"c-ui-05",title:"UX copy: writing status messages that aren’t lies",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-05",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-16T17:00:00Z",pinnedTime:null},{id:"c-ui-06",title:"Empty states: making the UI feel alive",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-06",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-17T18:00:00Z",pinnedTime:null},{id:"c-ui-07",title:"Filter/search: fast client-side techniques",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-07",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-18T19:00:00Z",pinnedTime:null},{id:"c-ui-08",title:"Design tokens: theme-aware colors and spacing",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-08",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-19T20:00:00Z",pinnedTime:null},{id:"c-ui-09",title:"Accessibility: contrast and reduced motion",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-09",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-20T21:00:00Z",pinnedTime:null},{id:"c-ui-10",title:"Responsive layout: two-column split strategies",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-10",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-21T22:00:00Z",pinnedTime:null},{id:"c-ui-11",title:"Error feedback: inline vs toast vs log-only",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-11",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-22T23:00:00Z",pinnedTime:null},{id:"c-ui-12",title:"Consistency: reusable components in the panel",gizmoId:"g-uiux",href:"https://chatgpt.com/c/c-ui-12",createTime:"2025-08-11T12:00:00Z",updateTime:"2025-08-24T00:00:00Z",pinnedTime:null}]},{gizmoId:"g-testing",title:"Testing & QA",href:"#",conversations:[{id:"c-tst-01",title:"Smoke tests: verifying build artifacts exist",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-01",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-22T13:00:00Z",pinnedTime:null},{id:"c-tst-02",title:"Type-check gates: catching message schema drift",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-02",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-23T14:00:00Z",pinnedTime:null},{id:"c-tst-03",title:"Mocking seams: runtime + storage wrappers",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-03",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-24T15:00:00Z",pinnedTime:null},{id:"c-tst-04",title:"Regression tests: keep demo data stable for screenshots",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-04",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-25T16:00:00Z",pinnedTime:null},{id:"c-tst-05",title:"E2E: controlling flakiness with deterministic fixtures",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-05",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-26T17:00:00Z",pinnedTime:null},{id:"c-tst-06",title:"Error injection: simulate failures and retries",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-06",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-27T18:00:00Z",pinnedTime:null},{id:"c-tst-07",title:"Performance: measuring UI responsiveness",gizmoId:"g-testing",href:"https://chatgpt.com/c/c-tst-07",createTime:"2025-07-21T12:00:00Z",updateTime:"2025-07-28T19:00:00Z",pinnedTime:null}]},{gizmoId:"g-arch",title:"Architecture & Refactors",href:"#",conversations:[{id:"c-arch-01",title:"Separating platform seams: runtime, storage, fetch",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-01",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-09T13:00:00Z",pinnedTime:null},{id:"c-arch-02",title:"Cache strategy: snapshots and subscriptions",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-02",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-10T14:00:00Z",pinnedTime:null},{id:"c-arch-03",title:"Events vs responses: progress events contract",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-03",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-11T15:00:00Z",pinnedTime:null},{id:"c-arch-04",title:"Logging tiers: audit log vs debug trace",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-04",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-12T16:00:00Z",pinnedTime:null},{id:"c-arch-05",title:"Config handling: dev config vs API config",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-05",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-13T17:00:00Z",pinnedTime:null},{id:"c-arch-06",title:"Keeping code clean: no backward compatibility hacks",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-06",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-14T18:00:00Z",pinnedTime:null},{id:"c-arch-07",title:"Message typing: union composition in shared/messages",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-07",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-15T19:00:00Z",pinnedTime:null},{id:"c-arch-08",title:"Organize tab: confirm UI layout improvements",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-08",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-16T20:00:00Z",pinnedTime:null},{id:"c-arch-09",title:"Scope system: YMD filtering and out-of-scope guard",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-09",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-17T21:00:00Z",pinnedTime:null},{id:"c-arch-10",title:"Release tooling: zip builds and GitHub automation",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-10",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-18T22:00:00Z",pinnedTime:null},{id:"c-arch-11",title:"Demo packaging: dist independence and embedding",gizmoId:"g-arch",href:"https://chatgpt.com/c/c-arch-11",createTime:"2025-12-08T12:00:00Z",updateTime:"2025-12-19T23:00:00Z",pinnedTime:null}]},{gizmoId:"g-misc",title:"Misc Notes & Scratchpad",href:"#",conversations:[{id:"c-misc-01",title:"Naming: choosing clear message constants",gizmoId:"g-misc",href:"https://chatgpt.com/c/c-misc-01",createTime:"2025-07-07T12:00:00Z",updateTime:"2025-07-08T13:00:00Z",pinnedTime:null},{id:"c-misc-02",title:"UI polish: microcopy and empty state wording",gizmoId:"g-misc",href:"https://chatgpt.com/c/c-misc-02",createTime:"2025-07-07T12:00:00Z",updateTime:"2025-07-09T14:00:00Z",pinnedTime:null}]}],singles:[{id:"c-s-01",title:"Quickstart: build and load unpacked extension",gizmoId:null,href:"https://chatgpt.com/c/c-s-01",createTime:"2026-01-08T12:00:00Z",updateTime:"2026-01-08T13:00:00Z",pinnedTime:null},{id:"c-s-02",title:"Debugging: why a tab click does nothing",gizmoId:null,href:"https://chatgpt.com/c/c-s-02",createTime:"2026-01-04T12:00:00Z",updateTime:"2026-01-04T14:00:00Z",pinnedTime:null},{id:"c-s-03",title:"Vite: dev vs preview and why it matters",gizmoId:null,href:"https://chatgpt.com/c/c-s-03",createTime:"2025-12-31T12:00:00Z",updateTime:"2025-12-31T15:00:00Z",pinnedTime:null},{id:"c-s-04",title:"TypeScript error: union event types mismatch",gizmoId:null,href:"https://chatgpt.com/c/c-s-04",createTime:"2025-12-27T12:00:00Z",updateTime:"2025-12-27T16:00:00Z",pinnedTime:null},{id:"c-s-05",title:"Chrome storage: local vs sync differences",gizmoId:null,href:"https://chatgpt.com/c/c-s-05",createTime:"2025-12-23T12:00:00Z",updateTime:"2025-12-23T17:00:00Z",pinnedTime:null},{id:"c-s-06",title:"Design: two-column layout for safer confirmations",gizmoId:null,href:"https://chatgpt.com/c/c-s-06",createTime:"2025-12-19T12:00:00Z",updateTime:"2025-12-19T18:00:00Z",pinnedTime:null},{id:"c-s-07",title:"Security: CSP and embedding via iframe",gizmoId:null,href:"https://chatgpt.com/c/c-s-07",createTime:"2025-12-15T12:00:00Z",updateTime:"2025-12-15T19:00:00Z",pinnedTime:null},{id:"c-s-08",title:"Git: stash vs commit for interrupted scripts",gizmoId:null,href:"https://chatgpt.com/c/c-s-08",createTime:"2025-12-11T12:00:00Z",updateTime:"2025-12-11T20:00:00Z",pinnedTime:null},{id:"c-s-09",title:"Release automation: tag + upload assets",gizmoId:null,href:"https://chatgpt.com/c/c-s-09",createTime:"2025-12-07T12:00:00Z",updateTime:"2025-12-07T21:00:00Z",pinnedTime:null},{id:"c-s-10",title:"Node audit: handling moderate vulnerabilities",gizmoId:null,href:"https://chatgpt.com/c/c-s-10",createTime:"2025-12-03T12:00:00Z",updateTime:"2025-12-03T22:00:00Z",pinnedTime:null},{id:"c-s-11",title:"Next.js proxy: Apache headers and websocket upgrade",gizmoId:null,href:"https://chatgpt.com/c/c-s-11",createTime:"2025-11-29T12:00:00Z",updateTime:"2025-11-29T23:00:00Z",pinnedTime:null},{id:"c-s-12",title:"Mocking: seam swap for runtime and storage",gizmoId:null,href:"https://chatgpt.com/c/c-s-12",createTime:"2025-11-25T12:00:00Z",updateTime:"2025-11-26T00:00:00Z",pinnedTime:null},{id:"c-s-13",title:"API design: progress events contract",gizmoId:null,href:"https://chatgpt.com/c/c-s-13",createTime:"2025-11-21T12:00:00Z",updateTime:"2025-11-22T01:00:00Z",pinnedTime:null},{id:"c-s-14",title:"UI: logs tab export and trimming strategy",gizmoId:null,href:"https://chatgpt.com/c/c-s-14",createTime:"2025-11-17T12:00:00Z",updateTime:"2025-11-18T02:00:00Z",pinnedTime:null},{id:"c-s-15",title:"Organize: moving chats to projects workflow",gizmoId:null,href:"https://chatgpt.com/c/c-s-15",createTime:"2025-11-13T12:00:00Z",updateTime:"2025-11-14T03:00:00Z",pinnedTime:null},{id:"c-s-16",title:"Performance: caching and update throttling",gizmoId:null,href:"https://chatgpt.com/c/c-s-16",createTime:"2025-11-09T12:00:00Z",updateTime:"2025-11-10T04:00:00Z",pinnedTime:null},{id:"c-s-17",title:"License: choosing MIT vs Apache for a tool",gizmoId:null,href:"https://chatgpt.com/c/c-s-17",createTime:"2025-11-05T12:00:00Z",updateTime:"2025-11-06T05:00:00Z",pinnedTime:null},{id:"c-s-18",title:"CSS: why panel looks ugly in demo build",gizmoId:null,href:"https://chatgpt.com/c/c-s-18",createTime:"2025-11-01T12:00:00Z",updateTime:"2025-11-02T06:00:00Z",pinnedTime:null},{id:"c-s-19",title:"Troubleshooting: missing DOM id errors in panel",gizmoId:null,href:"https://chatgpt.com/c/c-s-19",createTime:"2025-10-28T12:00:00Z",updateTime:"2025-10-29T07:00:00Z",pinnedTime:null}]};function Ne(e){return e?Date.parse(`${e}T00:00:00.000Z`):-1/0}function te(e){const t=(e==null?void 0:e.updateTime)||(e==null?void 0:e.createTime),c=typeof t=="string"?Date.parse(t):NaN;return Number.isFinite(c)?c:0}function ee(){return Date.now()}async function fi(e){switch(e.type){case B.LIST_GIZMO_PROJECTS:{const t=ee();W({type:B.LIST_GIZMO_PROJECTS_PROGRESS,foundProjects:0,foundConversations:0}),await ne(150);const c=e.scopeYmd,n=Number(e.limit??e.limitProjects??50),i=Number(e.perProjectLimit??50),a=Ne(c),o=ye.projects.map(x=>{const C=(x.conversations??[]).filter(m=>te(m)>=a).sort((m,d)=>te(d)-te(m)).slice(0,i);return{...x,conversations:C}}).slice(0,n),r=o.length,l=o.reduce((x,C)=>{var m;return x+(((m=C.conversations)==null?void 0:m.length)||0)},0);return W({type:B.LIST_GIZMO_PROJECTS_DONE,totalProjects:r,totalConversations:l,elapsedMs:ee()-t}),{ok:!0,projects:o}}case B.LIST_ALL_CHATS:{const t=ee();W({type:B.LIST_ALL_CHATS_PROGRESS,found:0}),await ne(120);const c=e.scopeYmd,n=Number(e.pageSize??50),i=Number(e.limit??n),a=Ne(c),o=ye.singles.filter(r=>te(r)>=a).sort((r,l)=>te(l)-te(r)).slice(0,i);return W({type:B.LIST_ALL_CHATS_DONE,total:o.length,elapsedMs:ee()-t}),{ok:!0,conversations:o}}case B.EXECUTE_DELETE:{const t=e.ids,c=`run-${ee()}`;let n=0;for(const i of t)n++,await ne(80),W({type:B.EXECUTE_DELETE_PROGRESS,runId:c,i:n,total:t.length,id:i,ok:!0,status:200,attempt:1,elapsedMs:0,lastOpMs:80});return W({type:B.EXECUTE_DELETE_DONE,runId:c,total:t.length,okCount:t.length,failCount:0,elapsedMs:0}),{ok:!0}}case B.MOVE_CHATS_TO_PROJECT:{const t=e.ids,c=`run-${ee()}`;let n=0;for(const i of t)n++,await ne(90),W({type:B.MOVE_CHATS_TO_PROJECT_PROGRESS,runId:c,i:n,total:t.length,id:i,ok:!0,status:200,elapsedMs:0,lastOpMs:90});return W({type:B.MOVE_CHATS_TO_PROJECT_DONE,runId:c,total:t.length,okCount:t.length,failCount:0,elapsedMs:0}),{ok:!0}}case B.CREATE_PROJECT:{W({type:B.CREATE_PROJECT_PROGRESS,status:"creating"}),await ne(120);const t=`g-${Math.random().toString(16).slice(2,10)}`,n=String(e.name??"").trim()||"Untitled project",i=`https://chatgpt.com/g/${t}`,a=`pc-${Math.random().toString(16).slice(2,10)}`,o={gizmoId:t,title:n,href:i,conversations:[{id:a,title:`Welcome to ${n}`,href:`https://chatgpt.com/c/${a}`,gizmoId:t,updateTime:new Date().toISOString(),createTime:new Date().toISOString()}]};return ye.projects.unshift(o),W({type:B.CREATE_PROJECT_DONE,ok:!0,gizmoId:t,title:n,href:i}),{ok:!0,gizmoId:t,title:n,href:i}}case B.DELETE_PROJECTS:{const t=e.gizmoIds,c=`run-${ee()}`;let n=0;for(const i of t)n++,await ne(100),W({type:B.DELETE_PROJECTS_PROGRESS,runId:c,i:n,total:t.length,gizmoId:i,ok:!0,status:200,elapsedMs:0,lastOpMs:100});return W({type:B.DELETE_PROJECTS_DONE,runId:c,total:t.length,okCount:t.length,failCount:0,elapsedMs:0}),{ok:!0}}default:return{ok:!1,error:`Demo handler not implemented for: ${e==null?void 0:e.type}`}}}function ne(e){return new Promise(t=>setTimeout(t,e))}const De=new Set;function Ye(e){for(const t of De)t(e,"local")}function re(e){const t=localStorage.getItem(e);if(t!==null)try{return JSON.parse(t)}catch{return t}}function Ti(e,t){localStorage.setItem(e,JSON.stringify(t))}async function se(e){if(typeof e=="string")return{[e]:re(e)};if(Array.isArray(e)){const c={};for(const n of e)c[n]=re(n);return c}const t={};for(const[c,n]of Object.entries(e))t[c]=localStorage.getItem(c)!==null?re(c):n;return t}async function oe(e){const t={};for(const[c,n]of Object.entries(e)){const i=re(c);Ti(c,n),t[c]={oldValue:i,newValue:n}}Ye(t)}async function Ae(e){const t=Array.isArray(e)?e:[e],c={};for(const n of t){const i=re(n);localStorage.removeItem(n),c[n]={oldValue:i,newValue:void 0}}Ye(c)}function Ei(e){De.add(e),window.addEventListener("storage",t=>{t.key&&e({[t.key]:{oldValue:t.oldValue,newValue:t.newValue}},"local")})}function Ci(e){De.delete(e)}function G(e,t,c,n){const i=Number(String(e??"").trim());return Number.isFinite(i)?Math.max(t,Math.min(c,Math.floor(i))):n}function _(e){return Number.isFinite(e)?e<1e3?`${e}ms`:`${Math.round(e/100)/10}s`:"?"}const Le="cgo.devConfig",K={traceScope:!1,stopAfterOutOfScopeProjects:3,actionLogMax:5e3,debugTraceMax:2e3,failureLogsPerRun:50};let we=!1,Te={...K};function Qe(e){const t=e||{};return{traceScope:!!t.traceScope,stopAfterOutOfScopeProjects:G(t.stopAfterOutOfScopeProjects??K.stopAfterOutOfScopeProjects,0,5e3,K.stopAfterOutOfScopeProjects),actionLogMax:G(t.actionLogMax??K.actionLogMax,100,5e4,K.actionLogMax),debugTraceMax:G(t.debugTraceMax??K.debugTraceMax,100,5e4,K.debugTraceMax),failureLogsPerRun:G(t.failureLogsPerRun??K.failureLogsPerRun,0,5e4,K.failureLogsPerRun)}}async function ue(){if(we)return;const e=await se([Le]).catch(()=>({}));Te=Qe(e==null?void 0:e[Le]),we=!0}function ge(){return Te}async function ke(e){Te=Qe(e),we=!0,await oe({[Le]:Te}).catch(()=>null)}async function Si(){await ke({...K})}const le="cgo.debugTrace",Ze="cgo.debugTrace.enabled",bi=2e3;function vi(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}function Oe(e,t,c){return Math.max(t,Math.min(c,Math.floor(e)))}async function $e(){const e=await se(le),t=e==null?void 0:e[le];return Array.isArray(t)?t:[]}async function ji(e){await oe({[le]:e})}async function qe(){const e=await se(Ze);return!!(e!=null&&e[Ze])}async function yi(e){await oe({[Ze]:!!e}),e||await Ae(le)}async function Ii(){await Ae(le)}async function O(e,t){if(!await qe())return{total:0};let n=t==null?void 0:t.max;typeof n!="number"&&(await ue(),n=ge().debugTraceMax),n=Oe(n??bi,100,5e4);const i=(Array.isArray(e)?e:[e]).map(l=>({...l,id:vi(),ts:Date.now()})),o=(await $e()).concat(i),r=o.length>n?o.slice(o.length-n):o;return await ji(r),{total:r.length}}async function Pi(e){const t=Oe((e==null?void 0:e.limit)??200,1,5e4),c=Oe((e==null?void 0:e.offset)??0,0,1e6),n=await $e(),i=n.length,o=n.slice().reverse().slice(c,c+t);return{total:i,items:o}}async function xi(e){const t=await $e();return JSON.stringify(t,null,2)}const et=new Set;function W(e){for(const t of Array.from(et))t(e)}function zi(e){et.add(e)}async function Q(e){const t=(e==null?void 0:e.type)??"unknown";O({scope:"demo",kind:"debug",message:"runtimeSend:IN",meta:{type:t,msg:e,stack:String(new Error().stack||"").split(`
`).slice(0,8).join(`
`)}});const c=await Promise.resolve(fi(e));return O({scope:"demo",kind:"debug",message:"runtimeSend:OUT",meta:{type:t,res:c}}),c}function Li(){const e=new Set;function t(n){return e.add(n),()=>e.delete(n)}function c(){zi(i=>{for(const a of e)a(i)})}return{on:t,start:c}}function wi(e,t){let c="single";function n(r){const l=x=>r===x;e.tabSingle.classList.toggle("is-active",l("single")),e.tabSingle.setAttribute("aria-selected",String(l("single"))),e.viewSingle.hidden=!l("single"),e.tabProjects.classList.toggle("is-active",l("projects")),e.tabProjects.setAttribute("aria-selected",String(l("projects"))),e.viewProjects.hidden=!l("projects"),e.tabSearch.classList.toggle("is-active",l("search")),e.tabSearch.setAttribute("aria-selected",String(l("search"))),e.viewSearch.hidden=!l("search"),e.tabOrganize.classList.toggle("is-active",l("organize")),e.tabOrganize.setAttribute("aria-selected",String(l("organize"))),e.viewOrganize.hidden=!l("organize"),e.tabLogs.classList.toggle("is-active",l("logs")),e.tabLogs.setAttribute("aria-selected",String(l("logs"))),e.viewLogs.hidden=!l("logs"),e.tabStats.classList.toggle("is-active",l("stats")),e.tabStats.setAttribute("aria-selected",String(l("stats"))),e.viewStats.hidden=!l("stats")}function i(r){r!==c&&(t[c].unmount(),c=r,n(c),t[c].mount())}function a(){e.tabSingle.addEventListener("click",()=>i("single")),e.tabProjects.addEventListener("click",()=>i("projects")),e.tabOrganize.addEventListener("click",()=>i("organize")),e.tabSearch.addEventListener("click",()=>i("search")),e.tabLogs.addEventListener("click",()=>i("logs")),e.tabStats.addEventListener("click",()=>i("stats"))}function o(){n(c),t[c].mount()}return{bind:a,boot:o,switchTo:i}}function ki(e){var c;let t=0;for(const n of e)t+=((c=n.conversations)==null?void 0:c.length)||0;return t}function Ue(e){const t=ki(e.projects),c=e.singleChats.length,n=e.projects.length;return{singleChats:e.singleChats,projects:e.projects,counts:{singleChats:c,projects:n,projectChats:t,totalChats:c+t},meta:e.meta}}function Zi(){const e={singleChats:[],projects:[],meta:{}},t=new Set;function c(){const s=Ue(e);for(const h of t)try{h(s)}catch{}}function n(s){e.meta.scopeUpdatedSince=s,c()}function i(){return String(e.meta.scopeUpdatedSince||"")}function a(){return Ue(e)}function o(s){t.add(s);try{s(a())}catch{}return()=>t.delete(s)}function r(){e.singleChats=[],e.projects=[],e.meta={},c()}function l(s,h){e.singleChats=s.slice(),e.meta.singleUpdatedTs=Date.now(),typeof(h==null?void 0:h.limit)=="number"&&(e.meta.singleLimit=h.limit),c()}function x(s,h){e.projects=s.slice(),e.meta.projectsUpdatedTs=Date.now(),typeof(h==null?void 0:h.limitProjects)=="number"&&(e.meta.projectsLimit=h.limitProjects),typeof(h==null?void 0:h.chatsPerProject)=="number"&&(e.meta.projectsChatsLimit=h.chatsPerProject),c()}function C(s){var v;const h=e.singleChats.length;e.singleChats=e.singleChats.filter(f=>f.id!==s);let I=!1;const S=[];for(const f of e.projects){const y=((v=f.conversations)==null?void 0:v.length)||0,E=(f.conversations||[]).filter(u=>u.id!==s);E.length!==y&&(I=!0),S.push(y===E.length?f:{...f,conversations:E})}(e.singleChats.length!==h||I)&&(e.projects=S,c())}function m(s){const h=e.projects.length;e.projects=e.projects.filter(I=>I.gizmoId!==s),e.projects.length!==h&&c()}function d(s,h){const S=e.projects.some(v=>v.gizmoId===s.gizmoId)?e.projects:[s,...e.projects];x(S,h??{limitProjects:e.meta.projectsLimit,chatsPerProject:e.meta.projectsChatsLimit})}function g(s){const{ids:h,targetProjectId:I,metaById:S}=s,v=new Set(h),f=e.singleChats.filter(u=>!v.has(u.id)),y=e.projects.map(u=>({...u,conversations:(u.conversations||[]).filter(b=>!v.has(b.id))})),E=y.find(u=>u.gizmoId===I);if(E){const u=new Set((E.conversations||[]).map(w=>w.id)),b=E.conversations||[];for(const w of h){if(u.has(w))continue;const p=S==null?void 0:S.get(w);b.push({id:w,gizmoId:I,title:(p==null?void 0:p.title)||"Untitled",href:(p==null?void 0:p.href)||"#"})}E.conversations=b;const j=e.meta.projectsChatsLimit;typeof j=="number"&&j>0&&(E.conversations=E.conversations.slice(0,j))}x(y,{limitProjects:e.meta.projectsLimit,chatsPerProject:e.meta.projectsChatsLimit}),l(f,{limit:e.meta.singleLimit})}return{getSnapshot:a,subscribe:o,getScopeUpdatedSince:i,clearAll:r,setSingleChats:l,setProjects:x,removeChat:C,removeProject:m,setScopeUpdatedSince:n,insertProject:d,moveChatsToProject:g}}const Ee="cgo.actionLog",Oi=5e3;function Bi(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}function Di(e){return Array.isArray(e)?e:[e]}async function de(){const e=await se(Ee),t=e==null?void 0:e[Ee];return Array.isArray(t)?t:[]}async function tt(e){await oe({[Ee]:e})}function Ce(e,t,c){return Math.max(t,Math.min(c,Math.floor(e)))}async function U(e,t){let c=t==null?void 0:t.max;typeof c!="number"&&(await ue(),c=ge().actionLogMax),c=Ce(c??Oi,100,5e4);const i=Di(e).map(l=>({...l,id:Bi(),ts:Date.now()}));if(!i.length)return{total:(await de()).length};const o=(await de()).concat(i),r=o.length>c?o.slice(o.length-c):o;return await tt(r),{total:r.length}}async function Ai(e){const t=Ce((e==null?void 0:e.limit)??200,1,5e4),c=Ce((e==null?void 0:e.offset)??0,0,1e6);let i=await de();e!=null&&e.kind&&(i=i.filter(r=>r.kind===e.kind)),e!=null&&e.scope&&(i=i.filter(r=>r.scope===e.scope)),typeof(e==null?void 0:e.sinceTs)=="number"&&(i=i.filter(r=>r.ts>=e.sinceTs)),typeof(e==null?void 0:e.untilTs)=="number"&&(i=i.filter(r=>r.ts<=e.untilTs));const a=i.length;i=i.slice().reverse();const o=i.slice(c,c+t);return{total:a,items:o}}async function $i(e){let c=await de();if(typeof e.beforeTs=="number"&&(c=c.filter(n=>n.ts>=e.beforeTs)),typeof e.keepLast=="number"){const n=Ce(e.keepLast,0,5e4);n===0?c=[]:c.length>n&&(c=c.slice(c.length-n))}return await tt(c),{total:c.length}}async function Ri(){await Ae(Ee)}async function _i(e){const t=await de();return JSON.stringify(t,null,2)}let q=0;function D(){return q>0}async function Se(e,t){nt(e);try{return await t()}finally{Mi(e)}}function N(e,t){if(t){nt(e);return}q=0,be(e,!1)}function nt(e){q++,q===1&&be(e,!0)}function Mi(e){if(q<=0){q=0,be(e,!1);return}q--,q===0&&be(e,!1)}function be(e,t){e.scopeLoadingEl.classList.toggle("is-busy",t),e.btnScopeChange.disabled=t,e.btnScopeRefresh.disabled=t,e.scopeDateEl.disabled=t,e.btnScopeCancel.disabled=t,e.btnScopeApply.disabled=t,e.btnListSingle.disabled=t,e.singleLimitEl.disabled=t,e.cbSingleToggleAll.disabled=t,e.btnSingleDelete.disabled=t,e.btnListProjects.disabled=t,e.projectsLimitEl.disabled=t,e.projectsChatsLimitEl.disabled=t,e.btnProjectsDelete.disabled=t,e.btnSearchListSingle.disabled=t,e.btnSearchListProjects.disabled=t,e.btnSearchResetFilters.disabled=t,e.btnSearchClear.disabled=t,e.searchQueryEl.disabled=t,e.organizeSourceEl.disabled=t,e.organizeFilterEl.disabled=t,e.cbOrganizeToggleAll.disabled=t,e.organizeProjectFilterEl.disabled=t,e.btnOrganizeClearTarget.disabled=t,e.btnOrganizeMove.disabled=t,e.organizeCbConfirmEl.disabled=t,e.organizeBtnConfirmExecute.disabled=t,e.organizeBtnCancelExecute.disabled=t}function Ni(){let e=[];const t=new Set;function c(r){e=r;const l=new Set(e.map(x=>x.id));for(const x of Array.from(t))l.has(x)||t.delete(x)}function n(r,l){l?t.add(r):t.delete(r)}function i(r){if(r)for(const l of e)t.add(l.id);else for(const l of e)t.delete(l.id)}function a(){return e.filter(r=>t.has(r.id)).map(r=>r.id)}function o(r){e=e.filter(l=>l.id!==r),t.delete(r)}return{get chats(){return e},selected:t,setChats:c,toggle:n,toggleAll:i,getSelectedIds:a,removeChat:o}}function Ui(e){function t(C){e.singleStatusEl.textContent=C}function c(C){e.singleExecOutEl.textContent=C}function n(C){const m=e.singleExecOutEl.textContent||"";e.singleExecOutEl.textContent=m?`${m}
${C}`:C,e.singleExecOutEl.scrollTop=e.singleExecOutEl.scrollHeight}function i(C){e.singleExecProgressWrapEl.hidden=!C,C||(e.singleExecProgressEl.value=0,e.singleExecProgressEl.max=100,e.singleExecProgressTextEl.textContent="")}function a(C){e.singleConfirmBoxEl.hidden=!C,C||(e.singleCbConfirmEl.checked=!1,e.singleConfirmTitleEl.textContent="",e.singleConfirmPreviewEl.innerHTML="")}function o(C,m){e.singleCountEl.textContent=String(C.length),e.singleSelectedCountEl.textContent=String(m.size)}function r(C,m){if(!C.length){e.cbSingleToggleAll.checked=!1,e.cbSingleToggleAll.indeterminate=!1;return}const d=C.filter(g=>m.has(g.id)).length;d===0?(e.cbSingleToggleAll.checked=!1,e.cbSingleToggleAll.indeterminate=!1):d===C.length?(e.cbSingleToggleAll.checked=!0,e.cbSingleToggleAll.indeterminate=!1):(e.cbSingleToggleAll.checked=!1,e.cbSingleToggleAll.indeterminate=!0)}function l(C){const{chats:m,selected:d,isBusy:g,onToggleChat:s}=C;e.singleListEl.innerHTML="";for(const h of m){const I=document.createElement("li");I.className="item",I.dataset.id=h.id;const S=document.createElement("div");S.className="left";const v=document.createElement("input");v.type="checkbox",v.className="deleteCb",v.checked=d.has(h.id),v.addEventListener("change",()=>{if(g()){v.checked=d.has(h.id);return}s(h.id,v.checked),I.classList.toggle("selected",v.checked)}),S.appendChild(v);const f=document.createElement("div");f.className="mid";const y=document.createElement("div");y.className="title",y.textContent=h.title||"Untitled";const E=document.createElement("a");E.className="link",E.href=h.href,E.textContent=h.href,E.target="_blank",E.rel="noreferrer",f.appendChild(y),f.appendChild(E),I.appendChild(S),I.appendChild(f),I.classList.toggle("selected",d.has(h.id)),e.singleListEl.appendChild(I)}o(m,d),r(m,d)}function x(C,m){const d=C.filter(I=>m.includes(I.id)),g=d.length,s=d.slice(0,5);e.singleConfirmTitleEl.textContent=`You are about to delete: ${g} chat${g===1?"":"s"}`,e.singleConfirmPreviewEl.innerHTML="";for(const I of s){const S=document.createElement("li");S.textContent=I.title||"Untitled",e.singleConfirmPreviewEl.appendChild(S)}const h=g-s.length;if(h>0){const I=document.createElement("li");I.textContent=`and ${h} more…`,e.singleConfirmPreviewEl.appendChild(I)}e.singleCbConfirmEl.checked=!1,e.singleBtnConfirmExecute.textContent=`Yes, delete ${g}`}return{setStatus:t,writeExecOut:c,appendExecOut:n,showExecProgress:i,showConfirm:a,updateCounts:o,updateToggleAllState:r,renderList:l,renderConfirmPreview:x}}const ve="cgo_stats_v1";function ce(e){const t=Number(e);return Number.isFinite(t)&&t>0?Math.floor(t):0}async function Re(){try{const e=await se(ve),t=(e==null?void 0:e[ve])||{};return{deletedChats:ce(t.deletedChats),deletedProjects:ce(t.deletedProjects)}}catch{return{deletedChats:0,deletedProjects:0}}}async function it(e){await oe({[ve]:{deletedChats:ce(e.deletedChats),deletedProjects:ce(e.deletedProjects)}})}async function ct(e=1){const t=await Re(),c={...t,deletedChats:t.deletedChats+Math.max(1,ce(e))};return await it(c),c}async function Hi(e=1){const t=await Re(),c={...t,deletedProjects:t.deletedProjects+Math.max(1,ce(e))};return await it(c),c}function Fi(e,t,c){const n=Ni(),i=Ui(e);let a=null,o=0,r=0,l=0,x=!1,C=0,m=50;function d(){var b;const u=typeof c.getScopeUpdatedSince=="function"?c.getScopeUpdatedSince():"";return u||((b=e.scopeDateEl)==null?void 0:b.value)||""}function g(u){a=null,o=0,r=0,l=u,C=0,i.showExecProgress(!0),e.singleExecProgressEl.max=Math.max(1,u),e.singleExecProgressEl.value=0,e.singleExecProgressTextEl.textContent=`Starting… 0/${u}`,i.setStatus("Deleting chats…")}function s(u,b,j,w,p){e.singleExecProgressEl.max=Math.max(1,b),e.singleExecProgressEl.value=Math.min(u,b),e.singleExecProgressTextEl.textContent=`Deleting ${u}/${b} · ok ${j} · failed ${w} · last ${_(p)}`}function h(u){i.setStatus(""),e.singleExecProgressTextEl.textContent=u}async function I(){await Se(e,async()=>{i.showConfirm(!1),i.writeExecOut(""),i.setStatus("Loading single chats…");const u=G(e.singleLimitEl.value,1,5e4,50),b=d();O({scope:"single",kind:"debug",message:"listSingleChats:start",meta:{scopeYmd:b,limit:u,pageSize:50}});const j=await Q({type:B.LIST_ALL_CHATS,limit:u,pageSize:50,scopeYmd:b}).catch(p=>(O({scope:"single",kind:"error",message:"listSingleChats:runtimeSend failed",error:String((p==null?void 0:p.message)||p)}),null));if(!j){i.setStatus("Loading single chats failed (no response).");return}if(!j.ok){i.setStatus(`Loading single chats failed: ${j.error}`),O({scope:"single",kind:"error",message:"listSingleChats:failed",error:String(j.error||"unknown error")});return}const w=j.conversations||[];n.setChats(w.filter(p=>!p.gizmoId)),c.setSingleChats(n.chats,{limit:u}),i.renderList({chats:n.chats,selected:n.selected,isBusy:()=>D(),onToggleChat:(p,P)=>{n.toggle(p,P),i.updateCounts(n.chats,n.selected),i.updateToggleAllState(n.chats,n.selected)}}),i.setStatus(""),O({scope:"single",kind:"debug",message:"listSingleChats:done",meta:{chats:n.chats.length,limit:u,scopeYmd:b}})})}function S(){const u=n.getSelectedIds();if(!u.length){i.writeExecOut("Nothing selected.");return}i.renderConfirmPreview(n.chats,u),i.showConfirm(!0)}function v(){const u=n.getSelectedIds();if(!u.length){i.writeExecOut("Nothing selected.");return}i.writeExecOut(""),i.appendExecOut(`EXECUTE: deleting ${u.length} chat(s)…`),g(u.length),N(e,!0),x=!0,O({scope:"single",kind:"debug",message:"deleteRun:start",meta:{count:u.length}}),Q({type:B.EXECUTE_DELETE,ids:u,throttleMs:600}).catch(b=>{x=!1;const j=String((b==null?void 0:b.message)||b);i.appendExecOut(`✗ Start delete failed: ${j}`),O({scope:"single",kind:"error",message:"deleteRun:start failed",error:j}),U({kind:"error",scope:"single",message:"Delete run failed to start",ok:!1,error:j}),N(e,!1)})}function f(){if(D()||!n.chats.length)return;const b=n.chats.filter(j=>n.selected.has(j.id)).length===n.chats.length;n.toggleAll(!b),i.renderList({chats:n.chats,selected:n.selected,isBusy:()=>D(),onToggleChat:(j,w)=>{n.toggle(j,w),i.updateCounts(n.chats,n.selected),i.updateToggleAllState(n.chats,n.selected)}})}const y=t.on(u=>{var b;if((u==null?void 0:u.type)===B.EXECUTE_DELETE_PROGRESS){if(!x)return;const j=u;if(a||(a=j.runId),a!==j.runId)return;const w=Number(j.i||0),p=Number(j.total||l),P=String(j.id||""),T=!!j.ok,L=j.status,k=j.error,z=Number(j.attempt||1),Z=Number(j.elapsedMs||0),$=Number(j.lastOpMs||0);T?o++:r++,s(w,p,o,r,$);const A=((b=n.chats.find(M=>M.id===P))==null?void 0:b.title)||P.slice(0,8),R=T?`✓ ${A} (${P.slice(0,8)}) — ${L??"OK"} — ${_($)} — elapsed ${_(Z)}`:`✗ ${A} (${P.slice(0,8)}) — ${L??"ERR"} — attempt ${z} — ${k||"failed"} — elapsed ${_(Z)}`;i.appendExecOut(R),!T&&C<m&&(C++,U({kind:"error",scope:"single",message:`Delete chat failed: ${A} (${P.slice(0,8)})`,ok:!1,status:L,error:k||"failed",chatId:P,chatTitle:A,meta:{attempt:z,elapsedMs:Z,lastOpMs:$}})),T&&(n.removeChat(P),c.removeChat(P),ct(1),i.renderList({chats:n.chats,selected:n.selected,isBusy:()=>D(),onToggleChat:(M,F)=>{n.toggle(M,F),i.updateCounts(n.chats,n.selected),i.updateToggleAllState(n.chats,n.selected)}}));return}if((u==null?void 0:u.type)===B.EXECUTE_DELETE_DONE){if(!x)return;const j=u;if(a||(a=j.runId),a!==j.runId)return;const w=Number(j.total||l),p=Number(j.okCount||o),P=Number(j.failCount||r),T=Number(j.elapsedMs||0);U({kind:"run",scope:"single",message:`Delete run finished: ok ${p}/${w}, failed ${P}, elapsed ${_(T)}`,ok:P===0,meta:{total:w,okCount:p,failCount:P,elapsedMs:T}}),O({scope:"single",kind:"debug",message:"deleteRun:done",meta:{total:w,okCount:p,failCount:P,elapsedMs:T}}),C=0,h(`Done · ok ${p}/${w} · failed ${P} · elapsed ${_(T)}`),N(e,!1),a=null,o=0,r=0,l=0,x=!1;return}});function E(){e.cbSingleToggleAll.addEventListener("change",()=>f()),e.btnSingleDelete.addEventListener("click",()=>{D()||S()}),e.singleBtnCancelExecute.addEventListener("click",()=>i.showConfirm(!1)),e.singleBtnConfirmExecute.addEventListener("click",()=>{if(!D()){if(!e.singleCbConfirmEl.checked){i.writeExecOut("Blocked: tick the confirmation checkbox.");return}i.showConfirm(!1),v()}})}return{id:"single",refresh(){D()||I().catch(u=>i.setStatus(`Error: ${String((u==null?void 0:u.message)||u)}`))},mount(){},unmount(){},bind:E,dispose(){y()}}}function Gi(){let e=[];const t=new Set,c=new Set;function n(){t.clear(),c.clear()}function i(m){e=m;const d=new Set(e.map(s=>s.gizmoId));for(const s of Array.from(t))d.has(s)||t.delete(s);const g=new Set(e.flatMap(s=>(s.conversations||[]).map(h=>h.id)));for(const s of Array.from(c))g.has(s)||c.delete(s)}function a(m){return(m.conversations||[]).map(d=>d.id)}function o(m,d){if(d){t.add(m.gizmoId);for(const g of a(m))c.add(g)}else{t.delete(m.gizmoId);for(const g of a(m))c.delete(g)}}function r(m,d){d?c.add(m):c.delete(m)}function l(m){c.delete(m);for(const d of e)d.conversations=(d.conversations||[]).filter(g=>g.id!==m)}function x(m){t.delete(m),e=e.filter(d=>d.gizmoId!==m)}function C(){return e.reduce((m,d)=>m+(d.conversations||[]).length,0)}return{get projects(){return e},selectedProjectIds:t,selectedProjectChatIds:c,clearSelections:n,setProjects:i,toggleProjectSelection:o,toggleChatSelection:r,removeChatEverywhere:l,removeProject:x,getTotalChats:C}}function Ji(e){const t=new Set;function c(){t.clear(),e.projectsListEl.querySelectorAll("li.projectCard").forEach(g=>{const s=g.dataset.gizmoId||"",h=g.querySelector("details");s&&(h!=null&&h.open)&&t.add(s)})}function n(){e.projectsListEl.querySelectorAll("li.projectCard").forEach(g=>{const s=g.dataset.gizmoId||"",h=g.querySelector("details");s&&h&&(h.open=t.has(s))})}function i(g){e.projectsStatusEl.textContent=g}function a(g){e.projectsExecOutEl.textContent=g}function o(g){const s=e.projectsExecOutEl.textContent||"";e.projectsExecOutEl.textContent=s?`${s}
${g}`:g,e.projectsExecOutEl.scrollTop=e.projectsExecOutEl.scrollHeight}function r(g){e.projectsChatsExecProgressWrapEl.hidden=!g,g||(e.projectsChatsExecProgressEl.value=0,e.projectsChatsExecProgressEl.max=100,e.projectsChatsExecProgressTextEl.textContent="")}function l(g){e.projectsProjectsExecProgressWrapEl.hidden=!g,g||(e.projectsProjectsExecProgressEl.value=0,e.projectsProjectsExecProgressEl.max=100,e.projectsProjectsExecProgressTextEl.textContent="")}function x(g){e.projectsConfirmBoxEl.hidden=!g,g||(e.projectsCbConfirmEl.checked=!1,e.projectsConfirmTitleEl.textContent="",e.projectsConfirmPreviewEl.innerHTML="")}function C(g){e.projectsCountEl.textContent=String(g.projects.length),e.projectsChatsCountEl.textContent=String(g.totalChats),e.projectsSelectedChatsCountEl.textContent=String(g.selectedChatsCount),e.projectsSelectedProjectsCountEl.textContent=String(g.selectedProjectsCount)}function m(g){var u;const{projects:s,selectedProjectIds:h,selectedProjectChatIds:I,isBusy:S,onToggleProject:v,onToggleChat:f,afterProjectToggle:y,afterChatToggle:E}=g;c(),e.projectsListEl.innerHTML="";for(const b of s){const j=document.createElement("li");j.className="projectCard",j.dataset.gizmoId=b.gizmoId;const w=document.createElement("div");w.className="projectHead";const p=document.createElement("div"),P=document.createElement("div");P.className="title",P.textContent=`${b.title} (${((u=b.conversations)==null?void 0:u.length)||0})`;const T=document.createElement("a");T.className="link",T.href=b.href,T.target="_blank",T.rel="noreferrer",T.textContent=b.href,p.appendChild(P),p.appendChild(T);const L=document.createElement("label");L.className="projectPick";const k=document.createElement("input");k.type="checkbox",k.checked=h.has(b.gizmoId),k.addEventListener("change",()=>{S()&&O({scope:"projects",kind:"debug",message:"ui:toggleProject while busy",meta:{gizmoId:b.gizmoId,checked:k.checked}}),v(b,k.checked),y()});const z=document.createElement("span");z.textContent="Select project (delete project + its chats)",L.appendChild(k),L.appendChild(z),w.appendChild(p),w.appendChild(L);const Z=document.createElement("details"),$=document.createElement("summary");$.textContent="Show conversations",Z.appendChild($);const A=document.createElement("ul");A.className="list",A.style.marginTop="8px";for(const R of b.conversations||[]){const M=document.createElement("li");M.className="item",M.style.gridTemplateColumns="28px 1fr";const F=document.createElement("div");F.className="left";const H=document.createElement("input");H.type="checkbox",H.className="deleteCb";const Y=h.has(b.gizmoId);H.checked=Y||I.has(R.id),H.addEventListener("change",()=>{if(h.has(b.gizmoId)){H.checked=!0,S()&&O({scope:"projects",kind:"debug",message:"ui:toggleChat blocked (project forced) while busy",meta:{gizmoId:b.gizmoId,chatId:R.id}});return}S()&&O({scope:"projects",kind:"debug",message:"ui:toggleChat while busy",meta:{gizmoId:b.gizmoId,chatId:R.id,checked:H.checked}}),f(b,R.id,H.checked),E()}),F.appendChild(H);const V=document.createElement("div"),J=document.createElement("div");J.className="title",J.textContent=R.title||"Untitled";const X=document.createElement("a");X.className="link",X.href=R.href,X.target="_blank",X.rel="noreferrer",X.textContent=R.href,V.appendChild(J),V.appendChild(X),M.appendChild(F),M.appendChild(V),A.appendChild(M)}Z.appendChild(A),j.appendChild(w),j.appendChild(Z),e.projectsListEl.appendChild(j)}n()}function d(g){const{projects:s,selectedProjectIds:h,selectedChatIds:I}=g;e.projectsConfirmPreviewEl.innerHTML="";const S=[];h.length&&S.push(`${h.length} project(s)`),I.length&&S.push(`${I.length} chat(s)`),e.projectsConfirmTitleEl.textContent=`You are about to delete: ${S.join(" + ")}`;const v=h.slice(0,5);for(const y of v){const E=s.find(b=>b.gizmoId===y);if(!E)continue;const u=document.createElement("li");u.textContent=`Project: ${E.title}`,e.projectsConfirmPreviewEl.appendChild(u)}if(h.length>v.length){const y=document.createElement("li");y.textContent=`…and ${h.length-v.length} more projects`,e.projectsConfirmPreviewEl.appendChild(y)}const f=I.slice(0,5);for(const y of f){const E=s.flatMap(b=>b.conversations||[]).find(b=>b.id===y),u=document.createElement("li");u.textContent=`Chat: ${(E==null?void 0:E.title)||y.slice(0,8)}`,e.projectsConfirmPreviewEl.appendChild(u)}if(I.length>f.length){const y=document.createElement("li");y.textContent=`…and ${I.length-f.length} more chats`,e.projectsConfirmPreviewEl.appendChild(y)}e.projectsCbConfirmEl.checked=!1,e.projectsBtnConfirmExecute.textContent="Yes, delete"}return{setStatus:i,writeExecOut:a,appendExecOut:o,showChatsExecProgress:r,showProjectsExecProgress:l,showConfirm:x,updateCounts:C,renderList:m,renderConfirmPreview:d}}function pe(e,t){const c=e.querySelector(t);if(!c)throw new Error(`[createProjectBox] Missing ${t}`);return c}function st(e){const{context:t,title:c=t==="organize"?"Create new project":"Create a new project",compact:n=t==="organize",namePlaceholder:i="e.g. general",descPlaceholder:a=t==="organize"?"Optional description…":"Short description shown in ChatGPT projects…",submitLabel:o=t==="organize"?"Create":"Create project"}=e,r=document.createElement("details");r.className=`createBox${n?" createBox--compact":""}`,r.open=!1,r.innerHTML=`
    <summary>${Be(c)}</summary>

    <div class="createGrid">
      <label class="fieldBlock">
        <span>Project name</span>
        <input data-role="name" type="text" autocomplete="off" maxlength="80" placeholder="${He(i)}" />
      </label>

      <label class="fieldBlock">
        <span>Description (optional)</span>
        <textarea data-role="desc" rows="${n?"2":"3"}" placeholder="${He(a)}"></textarea>
      </label>

      <div class="row createActions">
        <button data-role="submit" type="button" class="subtle">${Be(o)}</button>
        <span data-role="status" class="status"></span>
      </div>
    </div>
  `;const l=pe(r,'[data-role="name"]'),x=pe(r,'[data-role="desc"]'),C=pe(r,'[data-role="submit"]'),m=pe(r,'[data-role="status"]');function d(){return{name:l.value.trim(),description:x.value.trim()}}function g(v){l.disabled=v,x.disabled=v,C.disabled=v}function s(v){m.textContent=v}function h(){m.textContent=""}function I(){l.value="",x.value="",h()}function S(){h();const{name:v,description:f}=d();if(!v){s("Name is required."),l.focus();return}const y={name:v,description:f,context:t};r.dispatchEvent(new CustomEvent("cgo:createProject",{bubbles:!0,detail:y}))}return C.addEventListener("click",S),l.addEventListener("keydown",v=>{v.key==="Enter"&&(v.preventDefault(),S())}),{el:r,setBusy:g,setStatus:s,clearStatus:h,reset:I,getValue:d}}function Be(e){return e.replace(/[&<>"']/g,t=>{switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}})}function He(e){return Be(e)}function Wi(e,t,c){const n=Gi(),i=Ji(e);let a=null,o=0,r=0,l=0,x=!1,C=null,m=0,d=0,g=0,s=0,h=50;function I(){var P;const p=typeof c.getScopeUpdatedSince=="function"?c.getScopeUpdatedSince():"";return p||((P=e.scopeDateEl)==null?void 0:P.value)||""}function S(){i.updateCounts({projects:n.projects,totalChats:n.getTotalChats(),selectedChatsCount:n.selectedProjectChatIds.size,selectedProjectsCount:n.selectedProjectIds.size})}function v(){i.renderList({projects:n.projects,selectedProjectIds:n.selectedProjectIds,selectedProjectChatIds:n.selectedProjectChatIds,isBusy:()=>D(),onToggleProject:(p,P)=>n.toggleProjectSelection(p,P),onToggleChat:(p,P,T)=>n.toggleChatSelection(P,T),afterProjectToggle:()=>{S(),v()},afterChatToggle:()=>{S()}}),S()}function f(){const p=Array.from(n.selectedProjectChatIds),P=Array.from(n.selectedProjectIds);if(!p.length&&!P.length){i.writeExecOut("Nothing selected."),i.showConfirm(!1);return}i.renderConfirmPreview({projects:n.projects,selectedProjectIds:P,selectedChatIds:p}),i.showConfirm(!0)}function y(){i.showChatsExecProgress(!1)}function E(){i.showProjectsExecProgress(!1)}async function u(){await Se(e,async()=>{i.showConfirm(!1),i.writeExecOut(""),i.setStatus("Projects loading… 0 project(s), 0 chat(s)");const p=G(e.projectsLimitEl.value,1,5e3,50),P=G(e.projectsChatsLimitEl.value,1,5e3,200),T=I(),L=5,k=G(e.projectsChatsLimitEl.value,1,5e4,5e3);O({scope:"projects",kind:"debug",message:"listProjects:start",meta:{limitProjects:p,uiMaxChatsPerProject:P,conversationsPerGizmo:L,perProjectLimit:k,scopeYmd:T}});const z=await Q({type:B.LIST_GIZMO_PROJECTS,limit:p,conversationsPerGizmo:L,perProjectLimit:k,scopeYmd:T}).catch($=>(O({scope:"projects",kind:"error",message:"listProjects:runtimeSend failed",error:String(($==null?void 0:$.message)||$)}),null));if(!z){i.setStatus("Projects loading failed (no response).");return}if(!z.ok){i.setStatus(`Projects loading failed: ${z.error}`),O({scope:"projects",kind:"error",message:"listProjects:failed",error:String(z.error||"unknown error")});return}const Z=z.projects||[];n.setProjects(Z.map($=>({...$,conversations:($.conversations||[]).slice(0,P)}))),c.setProjects(n.projects,{limitProjects:p,chatsPerProject:P}),v(),i.setStatus(""),O({scope:"projects",kind:"debug",message:"listProjects:done",meta:{projects:n.projects.length,chats:n.getTotalChats(),limitProjects:p,uiMaxChatsPerProject:P}})})}function b(){if(D())return;const p=Array.from(n.selectedProjectChatIds),P=Array.from(n.selectedProjectIds);if(!p.length&&!P.length){i.writeExecOut("Nothing selected.");return}if(!e.projectsCbConfirmEl.checked){i.writeExecOut("Blocked: tick the confirmation checkbox.");return}i.showConfirm(!1),i.writeExecOut(""),y(),E(),s=0,N(e,!0),O({scope:"projects",kind:"debug",message:"deleteRuns:start",meta:{selectedChats:p.length,selectedProjects:P.length}}),p.length&&(a=null,o=0,r=0,l=p.length,x=!0,i.showChatsExecProgress(!0),e.projectsChatsExecProgressEl.max=l||1,e.projectsChatsExecProgressEl.value=0,e.projectsChatsExecProgressTextEl.textContent=`Starting chat delete… 0/${l}`,Q({type:B.EXECUTE_DELETE,ids:p}).catch(T=>{const L=String((T==null?void 0:T.message)||T);O({scope:"projects",kind:"error",message:"deleteChats:start failed",error:L}),i.appendExecOut(`✗ Start chat delete failed: ${L}`),P.length||(l=0,a=null,x=!1,N(e,!1))})),P.length&&(C=null,m=0,d=0,g=P.length,i.showProjectsExecProgress(!0),e.projectsProjectsExecProgressEl.max=g||1,e.projectsProjectsExecProgressEl.value=0,e.projectsProjectsExecProgressTextEl.textContent=`Starting project delete… 0/${g}`,Q({type:B.DELETE_PROJECTS,gizmoIds:P}).catch(T=>{const L=String((T==null?void 0:T.message)||T);O({scope:"projects",kind:"error",message:"deleteProjects:start failed",error:L}),i.appendExecOut(`✗ Start project delete failed: ${L}`),p.length||(g=0,C=null,N(e,!1))})),n.clearSelections(),S(),v()}const j=t.on(p=>{var P;if((p==null?void 0:p.type)===B.EXECUTE_DELETE_PROGRESS){if(!x)return;const T=p;if(a||(a=T.runId),a!==T.runId)return;const L=Number(T.i||0),k=Number(T.total||l),z=String(T.id||""),Z=!!T.ok,$=T.status,A=T.error,R=Number(T.attempt||1),M=Number(T.elapsedMs||0),F=Number(T.lastOpMs||0);Z?o++:r++,e.projectsChatsExecProgressEl.max=k||l||1,e.projectsChatsExecProgressEl.value=Math.min(L,k||l||1),e.projectsChatsExecProgressTextEl.textContent=`Deleting chats ${L}/${k} · ok ${o} · failed ${r} · last ${_(F)}`;let H=z.slice(0,8);for(const V of n.projects){const J=(V.conversations||[]).find(X=>X.id===z);if(J!=null&&J.title){H=J.title;break}}const Y=Z?`✓ ${H} (${z.slice(0,8)}) — ${$??"OK"} — ${_(F)} — elapsed ${_(M)}`:`✗ ${H} (${z.slice(0,8)}) — ${$??"ERR"} — attempt ${R} — ${A||"failed"} — elapsed ${_(M)}`;i.appendExecOut(Y),!Z&&s<h&&(s++,U({kind:"error",scope:"projects",message:`Delete chat failed: ${H} (${z.slice(0,8)})`,ok:!1,status:$,error:A||"failed",chatId:z,chatTitle:H,meta:{attempt:R,elapsedMs:M,lastOpMs:F}})),Z&&(c.removeChat(z),n.setProjects(n.projects.map(V=>({...V,conversations:(V.conversations||[]).filter(J=>J.id!==z)}))),ct(1),S(),v());return}if((p==null?void 0:p.type)===B.EXECUTE_DELETE_DONE){if(!x)return;const T=p;if(a||(a=T.runId),a!==T.runId)return;const L=Number(T.total||l),k=Number(T.okCount||o),z=Number(T.failCount||r),Z=Number(T.elapsedMs||0);U({kind:"run",scope:"projects",message:`Chat delete run finished: ok ${k}/${L}, failed ${z}, elapsed ${_(Z)}`,ok:z===0,meta:{total:L,okCount:k,failCount:z,elapsedMs:Z}}),e.projectsChatsExecProgressTextEl.textContent=`Done · ok ${k}/${L} · failed ${z} · elapsed ${_(Z)}`,a=null,o=0,r=0,l=0,x=!1,!C&&g===0&&N(e,!1);return}if((p==null?void 0:p.type)===B.DELETE_PROJECTS_PROGRESS){const T=p;if(C||(C=T.runId),C!==T.runId)return;const L=Number(T.i||0),k=Number(T.total||g),z=String(T.gizmoId||""),Z=!!T.ok,$=T.status,A=T.error,R=Number(T.elapsedMs||0),M=Number(T.lastOpMs||0);Z?m++:d++,e.projectsProjectsExecProgressEl.max=k||g||1,e.projectsProjectsExecProgressEl.value=Math.min(L,k||g||1),e.projectsProjectsExecProgressTextEl.textContent=`Deleting projects ${L}/${k} · ok ${m} · failed ${d} · last ${_(M)}`;const F=((P=n.projects.find(Y=>Y.gizmoId===z))==null?void 0:P.title)||z,H=Z?`✓ ${F} (${z}) — ${$??"OK"} — ${_(M)} — elapsed ${_(R)}`:`✗ ${F} (${z}) — ${$??"ERR"} — ${A||"failed"} — elapsed ${_(R)}`;i.appendExecOut(H),!Z&&s<h&&(s++,U({kind:"error",scope:"projects",message:`Delete project failed: ${F} (${z})`,ok:!1,status:$,error:A||"failed",meta:{elapsedMs:R,lastOpMs:M}})),Z&&(c.removeProject(z),n.setProjects(n.projects.filter(Y=>Y.gizmoId!==z)),Hi(1),S(),v());return}if((p==null?void 0:p.type)===B.DELETE_PROJECTS_DONE){const T=p;if(C||(C=T.runId),C!==T.runId)return;const L=Number(T.total||g),k=Number(T.okCount||m),z=Number(T.failCount||d),Z=Number(T.elapsedMs||0);U({kind:"run",scope:"projects",message:`Project delete run finished: ok ${k}/${L}, failed ${z}, elapsed ${_(Z)}`,ok:z===0,meta:{total:L,okCount:k,failCount:z,elapsedMs:Z}}),e.projectsProjectsExecProgressTextEl.textContent=`Done · ok ${k}/${L} · failed ${z} · elapsed ${_(Z)}`,s=0,C=null,m=0,d=0,g=0,!a&&l===0&&N(e,!1);return}});function w(){e.btnProjectsDelete.addEventListener("click",()=>{D()||(i.writeExecOut(""),f())}),e.projectsBtnCancelExecute.addEventListener("click",()=>i.showConfirm(!1)),e.projectsBtnConfirmExecute.addEventListener("click",()=>{D()||b()});const p=st({context:"projects"});e.mountCreateProjectProjectsEl.replaceChildren(p.el),p.el.addEventListener("cgo:createProject",P=>{var L,k;const T=P;O({scope:"projects",kind:"debug",message:"ui:createProject click",meta:{context:(L=T.detail)==null?void 0:L.context,name:(k=T.detail)==null?void 0:k.name,busy:D()}}),Se(e,async()=>{var $;const{name:z,description:Z}=T.detail;p.setBusy(!0),p.setStatus("Creating…"),O({scope:"projects",kind:"debug",message:"createProject:start",meta:{name:z,hasDescription:!!Z}});try{O({scope:"projects",kind:"debug",message:"createProject:runtimeSend CREATE_PROJECT",meta:{name:z,hasDescription:!!Z,busy:D()}});const A=await Q({type:B.CREATE_PROJECT,name:z,description:Z,prompt_starters:[]});if(!A){p.setStatus("Create failed (no response)."),U({kind:"error",scope:"projects",message:`Create project failed: ${z} (no response)`,ok:!1});return}if(!A.ok){p.setStatus(`Create failed: ${A.error||"unknown error"}`),U({kind:"error",scope:"projects",message:`Create project failed: ${z}`,ok:!1,error:A.error||"unknown error"});return}p.setStatus("Created."),p.reset();const R={gizmoId:A.gizmoId,title:A.title||z,href:A.href||"#",conversations:[],extra:{localOnly:!0,createdAt:Date.now()}},M=c.getSnapshot();c.insertProject(R,{limitProjects:M.meta.projectsLimit??G(e.projectsLimitEl.value,1,5e3,50),chatsPerProject:M.meta.projectsChatsLimit??G(e.projectsChatsLimitEl.value,1,5e3,200)}),n.setProjects(c.getSnapshot().projects),v(),U({kind:"run",scope:"projects",message:`Created project: ${R.title} (${R.gizmoId})`,ok:!0,meta:{gizmoId:R.gizmoId}})}catch(A){const R=String((A==null?void 0:A.message)||A);p.setStatus(`Create failed: ${R}`),U({kind:"error",scope:"projects",message:`Create project failed: ${(($=T.detail)==null?void 0:$.name)||"unknown"}`,ok:!1,error:R}),O({scope:"projects",kind:"error",message:"createProject:exception",error:R})}finally{p.setBusy(!1)}})})}return{id:"projects",refresh(){D()||u().catch(p=>i.setStatus(`Error: ${String((p==null?void 0:p.message)||p)}`))},mount(){},unmount(){},bind:w,dispose(){j()}}}function Vi(){let e=[],t=[],c="all",n="",i="";const a=new Set;let o=null;function r(S){e=S.singleChats||[],t=S.projects||[];const v=new Set;for(const f of e)v.add(f.id);for(const f of t)for(const y of f.conversations||[])v.add(y.id);for(const f of Array.from(a))v.has(f)||a.delete(f);o&&(t.some(y=>y.gizmoId===o)||(o=null))}function l(S){c=S}function x(S){n=S||""}function C(S){i=S||""}function m(S,v){v?a.add(S):a.delete(S)}function d(S){o=S}function g(){o=null}function s(){return o&&t.find(S=>S.gizmoId===o)||null}function h(){const S=[];if(c==="all"||c==="single")for(const f of e)S.push({...f,origin:"single"});if(c==="all"||c==="projects")for(const f of t)for(const y of f.conversations||[])S.push({...y,origin:"project",projectId:f.gizmoId,projectTitle:f.title});const v=n.trim().toLowerCase();return v?S.filter(f=>{const y=(f.title||"").toLowerCase(),E=(f.href||"").toLowerCase(),u=(f.projectTitle||"").toLowerCase();return y.includes(v)||E.includes(v)||u.includes(v)}):S}function I(){const S=i.trim().toLowerCase();return S?t.filter(v=>(v.title||"").toLowerCase().includes(S)):t}return{setFromCache:r,get sourceMode(){return c},setSourceMode:l,setFilter:x,setProjectFilter:C,selectedChatIds:a,toggleChat:m,get targetProjectId(){return o},setTargetProject:d,clearTargetProject:g,getTargetProject:s,buildSourceChats:h,buildProjects:I}}function Xi(e){function t(d){e.btnOrganizeMove.disabled=!d,e.organizeBtnConfirmExecute.disabled=!d,e.organizeBtnCancelExecute.disabled=!d,e.organizeSourceEl.disabled=!d,e.organizeFilterEl.disabled=!d,e.organizeProjectFilterEl.disabled=!d,e.cbOrganizeToggleAll.disabled=!d,e.btnOrganizeClearTarget.disabled=!d}function c(d){e.organizeSourceStatusEl.textContent=d}function n(d){e.organizeProjectsStatusEl.textContent=d}function i(d){e.organizeSourceCountEl.textContent=String(d.sourceCount),e.organizeSelectedCountEl.textContent=String(d.selectedCount),e.organizeProjectsCountEl.textContent=String(d.projectsCount),e.organizeTargetLabelEl.textContent=d.targetLabel||"—"}function a(d){e.organizeExecOutEl.textContent=d}function o(d){const g=e.organizeExecOutEl.textContent||"";e.organizeExecOutEl.textContent=g?`${g}
${d}`:d,e.organizeExecOutEl.scrollTop=e.organizeExecOutEl.scrollHeight}function r(d){e.organizeExecProgressWrapEl.hidden=!d,d||(e.organizeExecProgressEl.value=0,e.organizeExecProgressEl.max=100,e.organizeExecProgressTextEl.textContent="")}function l(d){e.organizeConfirmBoxEl.hidden=!d,d||(e.organizeCbConfirmEl.checked=!1,e.organizeConfirmTitleEl.textContent="",e.organizeConfirmPreviewEl.innerHTML="")}function x(d){e.organizeSourceListEl.innerHTML="";for(const g of d.chats){const s=document.createElement("li");s.className="item",s.style.gridTemplateColumns="28px 1fr";const h=document.createElement("div");h.className="left";const I=document.createElement("input");I.type="checkbox",I.checked=d.selectedIds.has(g.id),I.addEventListener("change",()=>{d.isBusy()||d.onToggle(g.id,I.checked)}),h.appendChild(I);const S=document.createElement("div"),v=document.createElement("div");v.className="title",v.textContent=g.title||"Untitled";const f=document.createElement("div");f.className="muted",f.style.fontSize="12px",f.textContent=g.origin==="single"?"Single chat":`Project chat · ${g.projectTitle||g.projectId||"—"}`;const y=document.createElement("a");y.className="link",y.href=g.href,y.target="_blank",y.rel="noreferrer",y.textContent=g.href,S.appendChild(v),S.appendChild(f),S.appendChild(y),s.appendChild(h),s.appendChild(S),e.organizeSourceListEl.appendChild(s)}}function C(d){e.organizeProjectListEl.innerHTML="";for(const g of d.projects){const s=document.createElement("li");s.className="item",s.style.gridTemplateColumns="28px 1fr";const h=document.createElement("div");h.className="left";const I=document.createElement("input");I.type="radio",I.name="organizeTargetProject",I.checked=d.targetProjectId===g.gizmoId,I.addEventListener("change",()=>{d.isBusy()||I.checked&&d.onPick(g.gizmoId)}),h.appendChild(I);const S=document.createElement("div"),v=document.createElement("div");v.className="title",v.textContent=g.title||"Untitled project";const f=document.createElement("div");f.className="muted",f.style.fontSize="12px",f.textContent=`${(g.conversations||[]).length} chat(s) loaded`;const y=document.createElement("a");y.className="link",y.href=g.href,y.target="_blank",y.rel="noreferrer",y.textContent=g.href,S.appendChild(v),S.appendChild(f),S.appendChild(y),s.appendChild(h),s.appendChild(S),e.organizeProjectListEl.appendChild(s)}}function m(d){e.organizeConfirmPreviewEl.innerHTML="",e.organizeConfirmTitleEl.textContent=`Move ${d.selectedChats.length} chat(s) → “${d.target.title||"Untitled project"}”`;const g=d.selectedChats.slice(0,5);for(const s of g){const h=document.createElement("li");h.textContent=s.title||s.id.slice(0,8),e.organizeConfirmPreviewEl.appendChild(h)}if(d.selectedChats.length>g.length){const s=document.createElement("li");s.textContent=`…and ${d.selectedChats.length-g.length} more`,e.organizeConfirmPreviewEl.appendChild(s)}e.organizeCbConfirmEl.checked=!1,e.organizeBtnConfirmExecute.textContent="Yes, move"}return{setActionsEnabled:t,setSourceStatus:c,setProjectsStatus:n,setCounts:i,writeExecOut:a,appendExecOut:o,showExecProgress:r,showConfirm:l,renderSourceList:x,renderProjectList:C,renderConfirmPreview:m}}function Ki(e,t,c){const n=Vi(),i=Xi(e);let a=null,o=null,r=0,l=0,x=0,C=0,m=50;function d(E){o=null,r=0,l=0,x=E,C=0,(async()=>{await ue(),m=ge().failureLogsPerRun})().catch(()=>null),i.setActionsEnabled(!1),i.showExecProgress(!0),e.organizeExecProgressEl.max=E,e.organizeExecProgressEl.value=0,e.organizeExecProgressTextEl.textContent=`Moving chats… 0/${E}`,i.writeExecOut(""),i.appendExecOut("EXECUTE MOVE (about to run)")}function g(){const E=c.getSnapshot();n.setFromCache({singleChats:E.singleChats||[],projects:E.projects||[]})}function s(){i.setActionsEnabled(!D()),g();const E=n.buildSourceChats(),u=n.buildProjects(),b=n.getTargetProject();i.renderSourceList({chats:E,selectedIds:n.selectedChatIds,isBusy:()=>D(),onToggle:(j,w)=>{n.toggleChat(j,w),s()}}),i.renderProjectList({projects:u,targetProjectId:n.targetProjectId,isBusy:()=>D(),onPick:j=>{n.setTargetProject(j),s()}}),i.setCounts({sourceCount:E.length,selectedCount:n.selectedChatIds.size,projectsCount:u.length,targetLabel:(b==null?void 0:b.title)||"—"}),i.setSourceStatus(E.length?"":"No source chats loaded (refresh Single/Projects first)."),i.setProjectsStatus(u.length?"":"No projects loaded (refresh Projects first).")}function h(E){const u=n.buildSourceChats();for(const b of u)n.toggleChat(b.id,E)}function I(E){const u=n.selectedChatIds;return E.filter(b=>u.has(b.id))}function S(){i.writeExecOut(""),i.appendExecOut("Preparing move…"),i.showConfirm(!1);const E=n.getTargetProject();if(!E){i.writeExecOut("Select exactly one destination project.");return}const u=n.buildSourceChats(),b=I(u);if(!b.length){i.writeExecOut("Select at least one chat to move.");return}i.renderConfirmPreview({selectedChats:b,target:E}),i.showConfirm(!0)}function v(E,u){E.length&&(d(E.length),N(e,!0),O({scope:"organize",kind:"debug",message:"move:start",meta:{idsCount:E.length,gizmoId:u}}),U({kind:"run",scope:"organize",message:`Move run started: ${E.length} chat(s) -> ${u}`,ok:!0,meta:{idsCount:E.length,gizmoId:u}}),Q({type:B.MOVE_CHATS_TO_PROJECT,ids:E,gizmoId:u,throttleMs:400}).catch(b=>{const j=String((b==null?void 0:b.message)||b);O({scope:"organize",kind:"error",message:"move:start failed",error:j,meta:{idsCount:E.length,gizmoId:u}}),U({kind:"error",scope:"organize",message:"Move run failed to start",ok:!1,error:j,meta:{idsCount:E.length,gizmoId:u}}),i.appendExecOut(`✗ Start move failed: ${j}`),i.setActionsEnabled(!0),i.showExecProgress(!1),N(e,!1)}))}const f=t.on(E=>{if((E==null?void 0:E.type)===B.MOVE_CHATS_TO_PROJECT_PROGRESS){const u=E;if(o||(o=u.runId),o!==u.runId)return;const b=Number(u.i||0),j=Number(u.total||x),w=String(u.id||""),p=!!u.ok,P=u.status,T=u.error,L=Number(u.elapsedMs||0),k=Number(u.lastOpMs||0);p?r++:l++,e.organizeExecProgressEl.max=j,e.organizeExecProgressEl.value=Math.min(b,j),e.organizeExecProgressTextEl.textContent=`Moving ${b}/${j} · ok ${r} · failed ${l} · last ${_(k)}`;const z=p?`✓ ${w.slice(0,8)} — ${P??"OK"} — ${_(k)} — elapsed ${_(L)}`:`✗ ${w.slice(0,8)} — ${P??"ERR"} — ${T||"failed"} — elapsed ${_(L)}`;i.appendExecOut(z),!p&&C<m&&(C++,U({kind:"error",scope:"organize",message:`Move chat failed (${w.slice(0,8)})`,ok:!1,status:P,error:T||"failed",chatId:w,meta:{elapsedMs:L,lastOpMs:k}}));return}if((E==null?void 0:E.type)===B.MOVE_CHATS_TO_PROJECT_DONE){const u=E;if(o||(o=u.runId),o!==u.runId)return;const b=Number(u.total||x),j=Number(u.okCount||r),w=Number(u.failCount||l),p=Number(u.elapsedMs||0);i.setActionsEnabled(!0),i.appendExecOut(""),i.appendExecOut(`DONE · ok ${j}/${b} · failed ${w} · elapsed ${_(p)}`),U({kind:"run",scope:"organize",message:`Move run finished: ok ${j}/${b}, failed ${w}, elapsed ${_(p)}`,ok:w===0,meta:{total:b,okCount:j,failCount:w,elapsedMs:p}}),O({scope:"organize",kind:"debug",message:"move:done",meta:{total:b,okCount:j,failCount:w,elapsedMs:p}}),i.showExecProgress(!1),N(e,!1);const P=n.getTargetProject(),L=n.buildSourceChats().filter(z=>n.selectedChatIds.has(z.id)),k=L.map(z=>z.id);if(P&&k.length){const z=new Map;for(const Z of L)z.set(Z.id,{title:Z.title,href:Z.href});c.moveChatsToProject({ids:k,targetProjectId:P.gizmoId,metaById:z}),O({scope:"organize",kind:"debug",message:"cache:moveChatsToProject applied",meta:{idsCount:k.length,targetProjectId:P.gizmoId}})}n.selectedChatIds.clear(),s(),i.appendExecOut("Cache updated (no fetch)."),i.appendExecOut("Tip: If ChatGPT’s sidebar doesn’t update instantly, refresh the ChatGPT page."),o=null,r=0,l=0,x=0,C=0;return}});function y(){e.organizeSourceEl.addEventListener("change",()=>{n.setSourceMode(e.organizeSourceEl.value),s()}),e.organizeFilterEl.addEventListener("input",()=>{n.setFilter(e.organizeFilterEl.value),s()}),e.organizeProjectFilterEl.addEventListener("input",()=>{n.setProjectFilter(e.organizeProjectFilterEl.value),s()}),e.cbOrganizeToggleAll.addEventListener("change",()=>{D()||(h(e.cbOrganizeToggleAll.checked),s())}),e.btnOrganizeClearTarget.addEventListener("click",()=>{D()||(n.clearTargetProject(),s())}),e.btnOrganizeMove.addEventListener("click",()=>{D()||S()}),e.organizeBtnCancelExecute.addEventListener("click",()=>i.showConfirm(!1)),e.organizeBtnConfirmExecute.addEventListener("click",()=>{if(D())return;if(!e.organizeCbConfirmEl.checked){i.writeExecOut("Blocked: tick the confirmation checkbox.");return}const u=n.getTargetProject();if(!u){i.writeExecOut("Blocked: select a destination project.");return}const j=n.buildSourceChats().filter(w=>n.selectedChatIds.has(w.id));if(!j.length){i.writeExecOut("Blocked: select at least one chat.");return}i.showConfirm(!1),v(j.map(w=>w.id),u.gizmoId)});const E=st({context:"organize",compact:!0});e.mountCreateProjectOrganizeEl.replaceChildren(E.el),E.el.addEventListener("cgo:createProject",u=>{const b=u;Se(e,async()=>{const{name:j,description:w}=b.detail;E.setBusy(!0),E.setStatus("Creating…"),O({scope:"organize",kind:"debug",message:"createProject:start",meta:{name:j,hasDescription:!!w}});try{O({scope:"organize",kind:"debug",message:"createProject:runtimeSend CREATE_PROJECT",meta:{name:j,hasDescription:!!w,busy:D()}});const p=await Q({type:B.CREATE_PROJECT,name:j,description:w,prompt_starters:[]});if(!p){E.setStatus("Create failed (no response)."),U({kind:"error",scope:"organize",message:`Create project failed: ${j} (no response)`,ok:!1});return}if(!p.ok){E.setStatus(`Create failed: ${p.error||"unknown error"}`),U({kind:"error",scope:"organize",message:`Create project failed: ${j}`,ok:!1,error:p.error||"unknown error"});return}E.setStatus("Created."),E.reset();const P={gizmoId:p.gizmoId,title:p.title||j,href:p.href||"#",conversations:[],extra:{localOnly:!0,createdAt:Date.now()}},T=c.getSnapshot();c.insertProject(P,{limitProjects:T.meta.projectsLimit??50,chatsPerProject:T.meta.projectsChatsLimit??200}),n.setTargetProject(P.gizmoId),s(),U({kind:"run",scope:"organize",message:`Created project: ${P.title} (${P.gizmoId})`,ok:!0,meta:{gizmoId:P.gizmoId}}),O({scope:"organize",kind:"debug",message:"createProject:done",meta:{gizmoId:P.gizmoId}})}catch(p){const P=String((p==null?void 0:p.message)||p);E.setStatus(`Create failed: ${P}`),U({kind:"error",scope:"organize",message:`Create project failed: ${j}`,ok:!1,error:P}),O({scope:"organize",kind:"error",message:"createProject:exception",error:P})}finally{E.setBusy(!1)}})})}return{id:"organize",refresh(){s()},mount(){s(),a=c.subscribe(()=>s())},unmount(){},bind:y,dispose(){f(),a==null||a(),a=null}}}function _e(e){return(e||"").toLowerCase().trim()}function me(e){if(!e)return 0;const t=Date.parse(e);return Number.isFinite(t)?t:0}function Yi(e){const[t,c,n]=e.split("-").map(i=>Number(i));return!t||!c||!n?0:new Date(t,c-1,n,0,0,0,0).getTime()}function Qi(e){const[t,c,n]=e.split("-").map(i=>Number(i));return!t||!c||!n?0:new Date(t,c-1,n,23,59,59,999).getTime()}function ot(e){const t=[e.title,e.snippet,e.id,e.gizmoId];return _e(t.filter(Boolean).join(` 
`))}function qi(e,t){const c=[e.title,e.gizmoId,ot(t)];return _e(c.filter(Boolean).join(` 
`))}function Fe(e,t){const c=e.isArchived===!0;return t==="include"?!0:t==="exclude"?!c:c}function he(e,t,c){if(t==="any")return!0;if(!e)return!1;const n=t==="24h"?24*60*60*1e3:t==="7d"?7*24*60*60*1e3:t==="30d"?30*24*60*60*1e3:365*24*60*60*1e3;return e>=c-n}function fe(e,t,c){if(!t&&!c)return!0;if(!e)return!1;if(t){const n=Yi(t);if(n&&e<n)return!1}if(c){const n=Qi(c);if(n&&e>n)return!1}return!0}function ec(e){const t=Math.max(20,Math.min(300,5e3));let c=null,n="",i={scope:"all",archived:"include",updatedWithin:"any",updatedAfter:"",updatedBefore:"",createdWithin:"any",createdAfter:"",createdBefore:""};function a(m){c=m}function o(m){n=m}function r(m){i={...i,...m}}function l(){return{...i}}function x(){return c?c.singleChats.length>0||c.projects.length>0:!1}function C(){if(!c)return{query:n,totalMatches:0,items:[]};const m=_e(n),d=Date.now(),g=[];let s=0;const h=v=>{s++,g.length<t&&g.push(v)},I=i.scope==="all"||i.scope==="single",S=i.scope==="all"||i.scope==="project";if(I)for(const v of c.singleChats){if(!Fe(v,i.archived))continue;const f=me(v.updateTime);if(!he(f,i.updatedWithin,d)||!fe(f,i.updatedAfter||void 0,i.updatedBefore||void 0))continue;const y=me(v.createTime);he(y,i.createdWithin,d)&&fe(y,i.createdAfter||void 0,i.createdBefore||void 0)&&(!m||ot(v).includes(m))&&h({kind:"single",chat:v})}if(S)for(const v of c.projects)for(const f of v.conversations||[]){if(!Fe(f,i.archived))continue;const y=me(f.updateTime);if(!he(y,i.updatedWithin,d)||!fe(y,i.updatedAfter||void 0,i.updatedBefore||void 0))continue;const E=me(f.createTime);if(!he(E,i.createdWithin,d)||!fe(E,i.createdAfter||void 0,i.createdBefore||void 0))continue;const u=qi(v,f);(!m||u.includes(m))&&h({kind:"project",project:v,chat:f})}return{query:n,totalMatches:s,items:g}}return{setSnapshot:a,setQuery:o,setFilters:r,getFilters:l,get query(){return n},hasData:x,search:C,maxResults:t}}function ie(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ge(e){if(!e)return"";const t=String(e).match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:""}function tc(e){const t=[];e.isArchived===!0&&t.push('<span class="badge badge--arch" title="Archived">A</span>');const c=Ge(e.updateTime);c&&t.push(`<span class="badge badge--date" title="Updated">u:${ie(c)}</span>`);const n=Ge(e.createTime);return n&&t.push(`<span class="badge badge--date" title="Created">c:${ie(n)}</span>`),t.length?`<span class="searchBadges">${t.join("")}</span>`:""}function nc(e){function t(a){e.searchStatusEl.textContent=a}function c(a){const{loaded:o,limits:r}=a;e.searchLoadedSinglesEl.textContent=String(o.singleChats),e.searchLoadedProjectsEl.textContent=String(o.projects),e.searchLoadedProjectChatsEl.textContent=String(o.projectChats);const l=[];typeof r.singleLimit=="number"&&l.push(`single limit ${r.singleLimit}`),typeof r.projectsLimit=="number"&&l.push(`projects limit ${r.projectsLimit}`),typeof r.projectsChatsLimit=="number"&&l.push(`chats/project limit ${r.projectsChatsLimit}`),e.searchInfoLimitsEl.textContent=l.length?`Limits: ${l.join(" · ")}`:""}function n(a){const o=[];for(const r of a){const l=ie(r.chat.title||"(untitled)"),x=ie(r.chat.href),C=r.chat.snippet?`<div class="searchSnippet">${ie(r.chat.snippet)}</div>`:"",m=tc(r.chat);if(r.kind==="single")o.push(`<li class="item searchItem"><div class="searchLine"><a class="searchTitle" href="${x}" target="_blank" rel="noopener noreferrer">${l}</a>`+m+"</div>"+C+"</li>");else{const d=ie(r.project.title||r.project.gizmoId);o.push(`<li class="item searchItem"><div class="searchLine"><a class="searchTitle" href="${x}" target="_blank" rel="noopener noreferrer">${l}</a><span class="searchProject">(${d})</span>`+m+"</div>"+C+"</li>")}}e.searchResultsEl.innerHTML=o.join("")}function i(a){if(c(a),!a.loaded.totalChats){t("No data loaded yet. Use the Info section to list Single/Projects, then search here."),e.searchResultsEl.innerHTML="";return}if(!a.query.trim()){t("Showing all loaded chats (limited). Type to filter."),n(a.results);return}t(`Results: ${a.results.length}`),n(a.results)}return{setStatus:t,render:i,renderResults:n}}function ic(e,t,c){const n=ec(),i=nc(e);function a(){const m=c.getSnapshot();n.setSnapshot(m);const d=n.search();e.searchResultsCountEl.textContent=String(d.totalMatches),i.render({loaded:m.counts,limits:{singleLimit:m.meta.singleLimit,projectsLimit:m.meta.projectsLimit,projectsChatsLimit:m.meta.projectsChatsLimit},query:d.query,results:d.items})}const o=c.subscribe(()=>{a()});function r(){const m=e.searchScopeEl.value,d=m==="projects"?"project":m;n.setFilters({scope:d,archived:e.searchArchivedEl.value,updatedWithin:e.searchUpdatedWithinEl.value,updatedAfter:e.searchUpdatedAfterEl.value||"",updatedBefore:e.searchUpdatedBeforeEl.value||"",createdWithin:e.searchCreatedWithinEl.value,createdAfter:e.searchCreatedAfterEl.value||"",createdBefore:e.searchCreatedBeforeEl.value||""})}function l(){r(),n.setQuery(e.searchQueryEl.value||""),a()}function x(){e.searchScopeEl.value="all",e.searchArchivedEl.value="include",e.searchUpdatedWithinEl.value="any",e.searchUpdatedAfterEl.value="",e.searchUpdatedBeforeEl.value="",e.searchCreatedWithinEl.value="any",e.searchCreatedAfterEl.value="",e.searchCreatedBeforeEl.value=""}function C(){e.searchQueryEl.addEventListener("input",()=>l()),e.btnSearchClear.addEventListener("click",()=>{e.searchQueryEl.value="",e.searchQueryEl.focus(),l()}),e.searchScopeEl.addEventListener("change",()=>l()),e.searchArchivedEl.addEventListener("change",()=>l()),e.searchUpdatedWithinEl.addEventListener("change",()=>l()),e.searchUpdatedAfterEl.addEventListener("change",()=>l()),e.searchUpdatedBeforeEl.addEventListener("change",()=>l()),e.searchCreatedWithinEl.addEventListener("change",()=>l()),e.searchCreatedAfterEl.addEventListener("change",()=>l()),e.searchCreatedBeforeEl.addEventListener("change",()=>l()),e.btnSearchResetFilters.addEventListener("click",()=>{x(),l()})}return{id:"search",mount(){const m=c.getSnapshot();if(!((m.counts.singleChats||0)>0||(m.counts.projects||0)>0||(m.counts.projectChats||0)>0)){i.setStatus("No data loaded. Use Scope → Refresh."),e.searchResultsCountEl.textContent="0";return}l()},unmount(){},bind:C,dispose(){o()}}}function cc(){let e=[],t=0;function c(n){e=n.items,t=n.total}return{get items(){return e},get total(){return t},set:c}}function sc(e){try{return new Date(e).toLocaleString()}catch{return String(e)}}function Je(e,t){const c=[];c.push(`Total entries: ${t.total}`),c.push("");for(const n of t.items){const i=typeof n.ok=="boolean"?n.ok?"ok":"fail":"",a=[];typeof n.status=="number"&&a.push(`status=${n.status}`),i&&a.push(i);const o=[n.scope,n.kind].filter(Boolean).join("/");c.push(`[${sc(n.ts)}] ${o}${a.length?` (${a.join(", ")})`:""}`),c.push(`  ${n.message}`),n.error&&c.push(`  error: ${n.error}`),c.push("")}e.textContent=c.join(`
`),e.scrollTop=0}function oc(e){function t(o){e.logsStatusEl.textContent=o}function c(o){e.debugStatusEl.textContent=o}function n(o){e.logsCbDebugEl.checked=o}function i(o){Je(e.logsOutEl,{total:o.total,items:o.items.map(r=>({ts:r.ts,message:r.message,scope:r.scope,kind:r.kind,ok:r.ok,status:r.status,error:r.error,meta:r.meta}))})}function a(o){Je(e.debugOutEl,{total:o.total,items:o.items.map(r=>({ts:r.ts,message:r.message,scope:r.scope,kind:r.kind,ok:r.ok,status:r.status,error:r.error,meta:r.meta}))})}return{setAuditStatus:t,setDebugStatus:c,setDebugChecked:n,renderAudit:i,renderDebug:a}}function Ie(e,t){e.cfgStatusEl&&(e.cfgStatusEl.textContent=t,window.setTimeout(()=>{e.cfgStatusEl&&e.cfgStatusEl.textContent===t&&(e.cfgStatusEl.textContent="")},1200))}async function Pe(e){if(!e.cfgTraceScopeEl||!e.cfgStopAfterOutOfScopeEl)return;await ue();const t=ge();e.cfgTraceScopeEl.checked=!!t.traceScope,e.cfgStopAfterOutOfScopeEl.value=String(t.stopAfterOutOfScopeProjects??0)}async function We(e){await ue();const t=ge();if(!e.cfgTraceScopeEl||!e.cfgStopAfterOutOfScopeEl)return t;const c=Math.max(0,Math.floor(Number(e.cfgStopAfterOutOfScopeEl.value||"0")));return{...t,traceScope:!!e.cfgTraceScopeEl.checked,stopAfterOutOfScopeProjects:Number.isFinite(c)?c:t.stopAfterOutOfScopeProjects}}function ac(e,t){const c=cc(),n=oc(e);async function i(){n.setAuditStatus("Loading…"),N(e,!0);try{const s=G(e.logsLimitEl.value,10,5e3,200),h=await Ai({limit:s,reverse:!0});c.set(h),n.renderAudit({items:c.items,total:c.total}),n.setAuditStatus(`Showing ${c.items.length} (newest first)`)}catch(s){n.setAuditStatus(`Failed: ${(s==null?void 0:s.message)||s}`)}finally{N(e,!1)}}async function a(){n.setDebugStatus("Loading…"),N(e,!0);try{const s=G(e.debugLimitEl.value,10,5e3,200),h=await Pi({limit:s,reverse:!0});n.renderDebug(h),n.setDebugStatus(`Showing ${h.items.length} (newest first)`)}catch(s){n.setDebugStatus(`Failed: ${(s==null?void 0:s.message)||s}`)}finally{N(e,!1)}}async function o(){const s=await qe();n.setDebugChecked(s)}async function r(s){if(await yi(s),n.setDebugChecked(s),!s){n.setDebugStatus("Debug OFF. Traces wiped."),e.debugOutEl.textContent="";return}n.setDebugStatus("Debug ON."),await a()}async function l(){const s=G(e.logsTrimKeepEl.value,0,5e4,2e3);n.setAuditStatus("Trimming…"),N(e,!0);try{const h=await $i({keepLast:s});await i(),n.setAuditStatus(`Trimmed. Remaining: ${h.total}`)}catch(h){n.setAuditStatus(`Trim failed: ${(h==null?void 0:h.message)||h}`)}finally{N(e,!1)}}async function x(){n.setAuditStatus("Clearing…"),N(e,!0);try{await Ri(),await i(),n.setAuditStatus("Cleared.")}catch(s){n.setAuditStatus(`Clear failed: ${(s==null?void 0:s.message)||s}`)}finally{N(e,!1)}}async function C(){n.setAuditStatus("Exporting…");try{const s=await _i({pretty:!0}),h=new Blob([s],{type:"application/json"}),I=URL.createObjectURL(h),S=document.createElement("a");S.href=I,S.download=`chatgpt-organizer-audit-${Date.now()}.json`,S.click(),setTimeout(()=>URL.revokeObjectURL(I),1e3),n.setAuditStatus("Exported.")}catch(s){n.setAuditStatus(`Export failed: ${(s==null?void 0:s.message)||s}`)}}async function m(){n.setDebugStatus("Clearing…"),N(e,!0);try{await Ii(),await a(),n.setDebugStatus("Cleared.")}catch(s){n.setDebugStatus(`Clear failed: ${(s==null?void 0:s.message)||s}`)}finally{N(e,!1)}}async function d(){n.setDebugStatus("Exporting…");try{const s=await xi({pretty:!0}),h=new Blob([s],{type:"application/json"}),I=URL.createObjectURL(h),S=document.createElement("a");S.href=I,S.download=`chatgpt-organizer-debug-${Date.now()}.json`,S.click(),setTimeout(()=>URL.revokeObjectURL(I),1e3),n.setDebugStatus("Exported.")}catch(s){n.setDebugStatus(`Export failed: ${(s==null?void 0:s.message)||s}`)}}function g(){e.btnLogsRefresh.addEventListener("click",()=>{D()||i().catch(()=>{})}),e.btnLogsTrim.addEventListener("click",()=>{D()||l().catch(()=>{})}),e.btnLogsClear.addEventListener("click",()=>{D()||x().catch(()=>{})}),e.btnLogsExport.addEventListener("click",()=>{D()||C().catch(()=>{})}),e.logsCbDebugEl.addEventListener("change",()=>{D()||r(e.logsCbDebugEl.checked).catch(()=>{})}),e.btnDebugRefresh.addEventListener("click",()=>{D()||a().catch(()=>{})}),e.btnDebugClear.addEventListener("click",()=>{D()||m().catch(()=>{})}),e.btnDebugExport.addEventListener("click",()=>{D()||d().catch(()=>{})}),e.cfgTraceScopeEl&&e.cfgStopAfterOutOfScopeEl&&e.btnCfgResetDefaults&&(e.cfgTraceScopeEl.addEventListener("change",async()=>{const s=await We(e);await ke(s),Ie(e,"Saved")}),e.cfgStopAfterOutOfScopeEl.addEventListener("change",async()=>{const s=await We(e);await ke(s),await Pe(e),Ie(e,"Saved")}),e.btnCfgResetDefaults.addEventListener("click",async()=>{await Si(),await Pe(e),Ie(e,"Reset")}))}return{id:"logs",bind:g,mount(){o().catch(()=>{}),i().catch(()=>{}),a().catch(()=>{}),Pe(e).catch(()=>{})},unmount(){},dispose(){}}}function je(e){if(!e)return 0;const t=Date.parse(e);return Number.isFinite(t)?t:0}function at(e){if(!e)return"";const t=String(e).match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:""}function rc(e){const t=[];for(const c of e.singleChats)t.push(c);for(const c of e.projects)for(const n of c.conversations||[])t.push(n);return t}function lc(e){let t=0;for(const c of e)c.isArchived===!0&&t++;return t}function dc(e){const t=[];return typeof e.singleLimit=="number"&&t.push(`single limit ${e.singleLimit}`),typeof e.projectsLimit=="number"&&t.push(`projects limit ${e.projectsLimit}`),typeof e.projectsChatsLimit=="number"&&t.push(`chats/project limit ${e.projectsChatsLimit}`),t.length?`Limits: ${t.join(" · ")}`:"Limits: —"}function uc(e){const t=Number(e.singleUpdatedTs||0),c=Number(e.projectsUpdatedTs||0);return Math.max(t,c)}function gc(e){const t={sameDay:0,d1_2:0,d3_7:0,d8_30:0,d31p:0,unknown:0},c=24*60*60*1e3;for(const n of e){const i=je(n.createTime),a=je(n.updateTime);if(!i||!a||a<i){t.unknown++;continue}const o=Math.floor((a-i)/c);o<=0?t.sameDay++:o<=2?t.d1_2++:o<=7?t.d3_7++:o<=30?t.d8_30++:t.d31p++}return t}function pc(e,t=12){const c=new Map;for(const i of e){const a=at(i.createTime);a&&c.set(a,(c.get(a)||0)+1)}const n=Array.from(c.entries()).map(([i,a])=>({day:i,count:a}));return n.sort((i,a)=>a.count-i.count||(i.day<a.day?1:-1)),n.slice(0,t)}function mc(e){const t=e.length;let c=0;const n={empty:0,small:0,medium:0,large:0,huge:0},i=e.map(a=>({title:a.title||a.gizmoId,gizmoId:a.gizmoId,chats:(a.conversations||[]).length})).sort((a,o)=>o.chats-a.chats).slice(0,10);for(const a of e){const o=(a.conversations||[]).length;o===0?(c++,n.empty++):o<=5?n.small++:o<=20?n.medium++:o<=100?n.large++:n.huge++}return{projectCount:t,emptyProjects:c,sizeBuckets:n,topProjects:i}}function hc(e){const t=new Map;for(const n of e){const i=at(n.createTime);i&&t.set(i,(t.get(i)||0)+1)}const c=Array.from(t.entries()).map(([n,i])=>({day:n,count:i}));return c.sort((n,i)=>n.day<i.day?-1:n.day>i.day?1:0),c}function fc(){let e={deletedChats:0,deletedProjects:0};function t(n){e={deletedChats:Math.max(0,Number(n.deletedChats||0)),deletedProjects:Math.max(0,Number(n.deletedProjects||0))}}function c(n){const i=rc(n),a={singleChats:n.counts.singleChats,projects:n.counts.projects,projectChats:n.counts.projectChats,totalChats:n.counts.totalChats,archivedChats:lc(i),avgChatsPerProject:n.counts.projects>0?n.counts.projectChats/Math.max(1,n.counts.projects):0,lastCacheUpdateTs:uc(n.meta),limitsHint:dc(n.meta)};let o=0,r=0;for(const C of i)je(C.createTime)&&o++,je(C.updateTime)&&r++;const l={createdKnown:o,updatedKnown:r,createdPerDayTop:pc(i,12),createdPerDay:hc(i),lifetime:gc(i)},x=mc(n.projects);return{totals:a,activity:l,projects:x,deletes:e}}return{setDeletes:t,compute:c}}function Tc(e){if(!e)return"—";const t=new Date(e),c=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${c}-${n}-${i} ${a}:${o}`}function Ec(e,t=0){return Number.isFinite(e)?t?e.toFixed(t):String(Math.round(e)):"0"}function ae(e){return String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xe(e,t,c){const n=Math.max(1,...t.map(o=>o.value)),i=(c==null?void 0:c.valueLabel)??(o=>String(o)),a=[];a.push('<div class="statsBars">');for(const o of t){const r=Math.max(0,Math.min(100,o.value/n*100)),l=o.hint?ae(o.hint):`${ae(o.label)}: ${o.value}`;a.push(`<div class="statsBarItem" title="${l}"><div class="statsBarLabel">${ae(o.label)}</div><div class="statsBarTrack"><div class="statsBarFill" style="width:${r.toFixed(1)}%"></div></div><div class="statsBarValue">${ae(i(o.value))}</div></div>`)}a.push("</div>"),e.innerHTML=a.join("")}function Cc(e,t,c){const n=new Map;for(const T of t){const L=String(T.day||"").slice(0,10);/^\d{4}-\d{2}-\d{2}$/.test(L)&&n.set(L,Number(T.count||0))}if(n.size===0){e.innerHTML='<div class="statsHeatmapWrap"><div class="statsHeatmapHeader"><div class="statsHeatmapTitle">Activity</div><div class="statsHeatmapHint">No created timestamps in the retrieved data.</div></div></div>';return}function i(T){const[L,k,z]=T.split("-").map(Z=>Number(Z));return new Date(L,(k||1)-1,z||1)}function a(T){return`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}-${String(T.getDate()).padStart(2,"0")}`}const o=Array.from(n.keys()).sort(),r=o[0],l=o[o.length-1],x=i(r),C=i(l),m=(x.getDay()+6)%7,d=new Date(x);d.setDate(x.getDate()-m);const g=(C.getDay()+6)%7,s=new Date(C);s.setDate(C.getDate()+(6-g));const h=24*60*60*1e3,I=Math.round((s.getTime()-d.getTime())/h)+1,S=Math.ceil(I/7),v=Math.max(8,Math.min(c==null?void 0:c.maxWeeks,260)),f=Math.min(S,v),y=S>f;let E=1;for(let T=0;T<f;T++)for(let L=0;L<7;L++){const k=new Date(d);k.setDate(d.getDate()+T*7+L);const z=a(k),Z=n.get(z)||0;Z>E&&(E=Z)}function u(T){if(T<=0)return 0;const L=T/E;return L<=.25?1:L<=.5?2:L<=.75?3:4}const b=[];let j=0;for(let T=0;T<f;T++)for(let L=0;L<7;L++){const k=new Date(d);k.setDate(d.getDate()+T*7+L);const z=a(k),Z=n.get(z)||0;j+=Z;const $=`statsHeatCell statsHeat${u(Z)}`,A=`${z} · ${Z} created`;b.push(`<div class="${$}" title="${ae(A)}"></div>`)}const w=new Date(d);w.setDate(d.getDate()+f*7-1);const p=a(d),P=a(w);e.innerHTML=`<div class="statsHeatmapWrap"><div class="statsHeatmapHeader"><div class="statsHeatmapTitle">From ${p} to ${P} · ${f} week(s)</div><div class="statsHeatmapHint">Total created: ${j} · Max/day: ${E}`+(y?` · Showing first ${f}/${S} weeks (increase maxWeeks or scroll)`:"")+`</div></div><div class="statsHeatmapGrid">${b.join("")}</div></div>`}function Sc(e){function t(n){e.statsStatusEl.textContent=n}function c(n){const i=n.totals;e.statsSingleChatsEl.textContent=String(i.singleChats),e.statsProjectsEl.textContent=String(i.projects),e.statsProjectChatsEl.textContent=String(i.projectChats),e.statsTotalChatsEl.textContent=String(i.totalChats),e.statsArchivedChatsEl.textContent=String(i.archivedChats),e.statsAvgChatsPerProjectEl.textContent=Ec(i.avgChatsPerProject,1),e.statsLastCacheUpdateEl.textContent=Tc(i.lastCacheUpdateTs),e.statsLimitsHintEl.textContent=i.limitsHint,e.statsDeletedChatsEl.textContent=String(n.deletes.deletedChats),e.statsDeletedProjectsEl.textContent=String(n.deletes.deletedProjects);const a=n.activity;Cc(e.statsCreatedHeatmapEl,a.createdPerDay,{maxWeeks:104});const o=a.lifetime;xe(e.statsLifetimeHistEl,[{label:"0d",value:o.sameDay,hint:"Updated the same day it was created"},{label:"1–2d",value:o.d1_2},{label:"3–7d",value:o.d3_7},{label:"8–30d",value:o.d8_30},{label:"31d+",value:o.d31p},{label:"unknown",value:o.unknown,hint:"Missing createTime/updateTime (or invalid order)"}]);const r=n.projects;xe(e.statsProjectSizeHistEl,[{label:"0",value:r.sizeBuckets.empty,hint:"Empty projects"},{label:"1–5",value:r.sizeBuckets.small},{label:"6–20",value:r.sizeBuckets.medium},{label:"21–100",value:r.sizeBuckets.large},{label:"101+",value:r.sizeBuckets.huge}]),r.topProjects.length?xe(e.statsTopProjectsEl,r.topProjects.map(l=>({label:l.title,value:l.chats,hint:`${l.title} · ${l.chats} chats`})),{valueLabel:l=>String(l)}):e.statsTopProjectsEl.innerHTML='<div class="muted">No projects loaded.</div>'}return{setStatus:t,render:c}}function bc(e,t,c){const n=fc(),i=Sc(e);let a=null,o=null;async function r(){const m=await Re();n.setDeletes({deletedChats:m.deletedChats,deletedProjects:m.deletedProjects})}async function l(m){const d=c.getSnapshot(),g=n.compute(d);i.render(g),i.setStatus(m)}function x(){const m=(d,g)=>{g==="local"&&d[ve]&&r().then(()=>l("Updated (storage)")).catch(()=>i.setStatus("Stats storage update failed"))};return Ei(m),()=>Ci(m)}function C(){e.btnStatsRecalc.addEventListener("click",()=>{l("Recalculated").catch(()=>i.setStatus("Recalc failed"))})}return{id:"stats",async mount(){i.setStatus("Loading…"),await r().catch(()=>{}),o||(o=x()),a||(a=c.subscribe(()=>{l("Updated from cache").catch(()=>i.setStatus("Update failed"))})),await l("Ready")},unmount(){},bind:C,dispose(){a&&a(),a=null,o&&o(),o=null}}}const ze="cgo.scopeUpdatedSince";function Ve(e){return String(e).padStart(2,"0")}function vc(e){const t=e.getFullYear(),c=Ve(e.getMonth()+1),n=Ve(e.getDate());return`${t}-${c}-${n}`}function jc(e,t){const c=new Date(e),n=c.getDate();return c.setMonth(c.getMonth()-t),c.getDate()!==n&&c.setDate(0),c}function Xe(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function yc(e){return new Promise(t=>setTimeout(t,e))}async function Ke(e=10*60*1e3){const t=Date.now();for(;D();){if(Date.now()-t>e)return!1;await yc(120)}return!0}(async()=>{const e=hi(),t=Li();t.start();const c=Zi(),n=Fi(e,t,c),i=Wi(e,t,c),a=ic(e,t,c),o=Ki(e,t,c),r=ac(e),l=bc(e,t,c);n.bind(),i.bind(),o.bind(),a.bind(),r.bind(),l.bind();const x=wi(e,{single:n,projects:i,organize:o,search:a,logs:r,stats:l});x.bind(),x.boot(),e.btnListSingle.hidden=!0,e.btnListProjects.hidden=!0,e.btnSearchListSingle.hidden=!0,e.btnSearchListProjects.hidden=!0;let C="";function m(){var E,u,b;const f=c.getSnapshot();return(((E=f.counts)==null?void 0:E.singleChats)??0)+(((u=f.counts)==null?void 0:u.projects)??0)+(((b=f.counts)==null?void 0:b.projectChats)??0)===0}function d(f){const y=c;typeof y.setScopeUpdatedSince=="function"&&y.setScopeUpdatedSince(f)}function g(f){m()?(e.scopeLabelEl.textContent="No data loaded — set scope & refresh",e.scopeLabelEl.classList.add("is-warn")):(e.scopeLabelEl.textContent=f?`Updated since ${f}`:"Updated since —",e.scopeLabelEl.classList.remove("is-warn")),e.scopeDialogEl.open||(e.scopeDateEl.value=f||"")}async function s(){const f=await se([ze]).catch(()=>({})),y=f==null?void 0:f[ze];return typeof y=="string"&&Xe(y)?y:vc(jc(new Date,3))}async function h(f){await oe({[ze]:f}).catch(()=>null)}async function I(){D()||(O({scope:"panel",kind:"debug",message:"refreshAll:start"}),n.refresh(),!await Ke())||(i.refresh(),await Ke(),O({scope:"panel",kind:"debug",message:"refreshAll:done"}))}function S(){if(!D()){e.scopeDateEl.value=C||"";try{e.scopeDialogEl.showModal()}catch{}}}function v(){try{e.scopeDialogEl.close()}catch{}}C=await s(),d(C),g(C),window.addEventListener("cgo:refreshAll",f=>{var u;const E=((u=f.detail)==null?void 0:u.reason)??"unknown";if(O({scope:"panel",kind:"debug",message:"event:cgo:refreshAll",meta:{reason:E}}),E!=="user"){O({scope:"panel",kind:"debug",message:"event:cgo:refreshAll blocked (reason != user)",meta:{reason:E}});return}I().catch(b=>{O({scope:"panel",kind:"error",message:"refreshAllUsingCurrentScope failed",error:String((b==null?void 0:b.message)||b)})})}),e.btnScopeChange.addEventListener("click",()=>{S()}),e.btnScopeRefresh.addEventListener("click",()=>{I().catch(()=>{})}),e.btnScopeCancel.addEventListener("click",()=>{e.scopeDateEl.value=C||"",v()}),e.btnScopeApply.addEventListener("click",()=>{const f=e.scopeDateEl.value||"";Xe(f)&&(C=f,d(C),g(C),h(C).catch(()=>{}),v(),I().catch(()=>{}))}),e.scopeDialogEl.addEventListener("keydown",f=>{var y;f.key==="Enter"&&((y=f.target)==null?void 0:y.tagName)==="INPUT"&&(f.preventDefault(),e.btnScopeApply.click())}),c.subscribe(()=>{const f=c.getSnapshot();e.scopeLoadedSinglesEl.textContent=String(f.counts.singleChats),e.scopeLoadedProjectsEl.textContent=String(f.counts.projects),e.scopeLoadedProjectChatsEl.textContent=String(f.counts.projectChats),g(C)})})();
